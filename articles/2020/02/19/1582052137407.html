<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/><meta name="theme-color" content="#3b3e43"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no"/><title>Java学习笔记-基础篇(2) - 雨羊的个人博客</title><meta name="description" content="A small and beautiful blogging system. 一款小而美的博客系统。"/><meta property="og:description" content="A small and beautiful blogging system. 一款小而美的博客系统。"/>    <meta name="keywords" content="雨羊,yuyang,Rainsheep,rainsheep,杨珑奇,yanglongqi"/><link rel="dns-prefetch" href="https://cdn.jsdelivr.net/gh/88250/solo@fa541a0/src/main/resources"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://cdn.jsdelivr.net/gh/88250/solo@fa541a0/src/main/resources"><link rel="icon" type="image/png" href="https://static.b3log.org/images/brand/solo-32.png"/><link rel="apple-touch-icon" href="https://static.b3log.org/images/brand/solo-32.png"><link rel="shortcut icon" type="image/x-icon" href="https://static.b3log.org/images/brand/solo-32.png"><meta name="copyright" content="B3log"/><meta http-equiv="Window-target" content="_top"/><meta property="og:locale" content="zh_CN"/><meta property="og:title" content="Java学习笔记-基础篇(2) - 雨羊的个人博客"/><meta property="og:site_name" content="雨羊的个人博客"/><meta property="og:url"      content="https://rainsheep.github.io/articles/2020/02/19/1582052137407.html?"/><meta property="og:image" content="https://static.b3log.org/images/brand/solo-32.png"/><link rel="search" type="application/opensearchdescription+xml" title="Java学习笔记-基础篇(2) - 雨羊的个人博客" href="/opensearch.xml"><link href="https://rainsheep.github.io/rss.xml" title="RSS" type="application/rss+xml" rel="alternate"/><link rel="manifest" href="https://rainsheep.github.io/manifest.json">        <link rel="canonical" href="https://rainsheep.github.io/articles/2020/02/19/1582052137407.html">        <link rel="stylesheet"
              href="https://cdn.jsdelivr.net/gh/88250/solo@fa541a0/src/main/resources/skins/nijigen/css/base.css?1595344563647"/>
            <link rel="prev" title="Java学习笔记-基础篇(1)" href="https://rainsheep.github.io/articles/2020/02/19/1582051510367.html">
            <link rel="next" title="MySQL学习笔记" href="https://rainsheep.github.io/articles/2020/02/20/1582176149227.html">
    </head>
<body>
<div class="bg"></div>
<div class="bg bg--1"></div>
<div class="bg bg--2"></div>
<div class="bg bg--3"></div>
<div class="bg bg--4"></div>
<div class="bg bg--5"></div>
<header class="header">
    <div class="header__wrap">
        <a href="https://rainsheep.github.io" rel="start" class="header__logo">
            <i class="icon__home"></i> 雨羊的个人博客
        </a>

        <nav class="mobile__hidden header__nav">
                <a href="/my-github-repos" target="_self" rel="section">
                    <img class="page-icon" src="/images/github-icon.png" alt="我的开源">我的开源
                </a>
            <a href="https://rainsheep.github.io/tags.html" rel="section">
                <i class="icon__tags"></i> 标签墙
            </a>
            <a href="https://rainsheep.github.io/archives.html">
                <i class="icon__inbox"></i> 存档
            </a>
            <a rel="archive" href="https://rainsheep.github.io/links.html">
                <i class="icon__link"></i> 友链
            </a>
            <a rel="alternate" href="https://rainsheep.github.io/rss.xml" rel="section">
                <i class="icon__rss"></i> RSS
            </a>
        </nav>

    </div>
</header>
<div class="header__m fn__none">
    <i class="icon__list fn__none" onclick="$(this).next().slideToggle()"></i>
    <main class="module__list fn__none"></main>
    <i class="icon__more" onclick="$(this).next().slideToggle()"></i>
    <main class="module__list">
        <ul>
                <li>
                    <a href="/my-github-repos" target="_self" rel="section">
                        <img class="page-icon" src="/images/github-icon.png" alt="我的开源">我的开源
                    </a>
                </li>
            <li>
                <a href="https://rainsheep.github.io/tags.html" rel="section">
                    <i class="icon__tags"></i> 标签墙
                </a>
            </li>
            <li>
                <a href="https://rainsheep.github.io/archives.html">
                    <i class="icon__inbox"></i> 存档
                </a>
            </li>
            <li>
                <a rel="archive" href="https://rainsheep.github.io/links.html">
                    <i class="icon__link"></i> 友链
                </a>
            </li>
            <li>
                <a rel="alternate" href="https://rainsheep.github.io/rss.xml" rel="section">
                    <i class="icon__rss"></i> RSS
                </a>
            </li>
        </ul>
    </main>
</div>
<div class="main" id="pjax">
    
    <div class="content">
        <main id="articlePage">
            <div class="article-list">
                <div class="item item--active">
                    <time class="vditor-tooltipped vditor-tooltipped__n item__date"
                          aria-label="2020年">
                        02月
                        <span class="item__day">19</span>
                    </time>

                    <h2 class="item__title">
                        <a rel="bookmark" href="https://rainsheep.github.io/articles/2020/02/19/1582052137407.html">
                            Java学习笔记-基础篇(2)
                        </a>
                    </h2>

                    <div class="item__date--m fn__none">
                        <i class="icon__date"></i>
                        2020-02-19
                    </div>

                    <div class="ft__center">
                        <span class="tag">
                            <i class="icon__tags"></i>
                            <a rel="tag" href="https://rainsheep.github.io/tags/Java">
                                Java</a>
                        </span>
                            <a class="tag" href="https://rainsheep.github.io/articles/2020/02/19/1582052137407.html#b3logsolocomments">
                                <i class="icon__comments"></i> <span data-uvstatcmt="1582052137407">0</span> 评论
                            </a>
                        <span class="tag">
                            <i class="icon__views"></i>
                        <span data-uvstaturl="https://rainsheep.github.io/articles/2020/02/19/1582052137407.html">0</span> 浏览
                        </span>
                    </div>

                    <div class="vditor-reset">
                        <h3 id="19--File-类-递归-">19.【File 类、递归】</h3>
<ul>
<li><code>java.io.File</code> 类是文件和目录路径名的抽象表示，主要用于文件和目录的创建、查找和删除等操作。</li>
<li><code>File</code> 类中的静态变量：系统分隔符
<ul>
<li><code>static String pathSeparator</code>:与系统有关的路径分隔符，Windows 为 <code>;</code>，Linux 为 <code>:</code></li>
<li><code>static public char pathSeparatorChar</code>:与系统有关的路径分隔符</li>
<li><code>static String separator</code>:与系统有关的默认名称分隔符，Windows 为 <code>\</code>，Linux 为 <code>/</code></li>
<li><code>static char separatorChar</code>:有系统有关的默认名称分隔符</li>
</ul>
</li>
<li><code>File</code> 的构造方法：
<ul>
<li><code>File(String pathname)</code>:将给定路径名字符串转换为抽象路径名来创建一个新 <code>File</code> 实例。
<ul>
<li><code>String pathname</code>:字符串的路径名称</li>
<li>路径可以是文件结尾，也可以是文件夹结尾</li>
<li>路径可以是存在，也可以是不存在</li>
<li>创建 <code>File</code> 对象，只是把字符串路径封装为 <code>File</code> 对象，不考虑路径真假情况</li>
</ul>
</li>
<li><code>File(String parent,String child)</code>:根据 <code>parent</code> 路径名字符串和 <code>child</code> 路径名字符串创建一个新 <code>File</code> 实例。</li>
<li><code>File(File parent,String child)</code>:根据 <code>parent</code> 抽象路径名和 <code>child</code> 路径名创建一个新的 <code>File</code> 实例。</li>
</ul>
</li>
<li><code>File</code> 类的常用方法：
<ul>
<li><code>public String getAbsolutePath()</code>:返回此 <code>File</code> 的绝对路径名字字符串。</li>
<li><code>public String getPath()</code>:将此 <code>File</code> 转换为路径名字符串，根据创建的时候的相对或绝对，返回对应的路径。</li>
<li><code>public String getName()</code>:返回由此 <code>File</code> 表示的文件或目录的名称。</li>
<li><code>public long length()</code>:返回由此 <code>File</code> 表示的文件的长度，以字节为单位，路径为假，则返回 0。</li>
<li><code>public boolean exists()</code>:返回文件或目录是否真实存在。</li>
<li><code>public boolean isDirectory</code>：是否是目录</li>
<li><code>public boolean isFile()</code>:是否是文件
<ul>
<li>路径不存在，返回 <code>false</code>。</li>
</ul>
</li>
<li><code>public boolean createNewFile()</code>:当且仅当目录不存在的时候，创建一个新的空文件。
<ul>
<li>创建文件的路径和文件名在 <code>File</code> 构造方法中给出。</li>
<li>创建成功返回 <code>true</code>，若文件存在，不会创建，返回 <code>false</code>。</li>
<li>只能创建文件，不能创建文件夹。</li>
<li>若创建文件的路径不存在，则抛出异常。</li>
</ul>
</li>
<li><code>public boolean delete()</code>:删除此 <code>File</code> 表示的文件或目录。
<ul>
<li>文件夹中有内容，不会删除，返回 false。</li>
<li>构造方法中路径不存在，返回 false。</li>
<li>直接在硬盘删除，不走回收站。</li>
</ul>
</li>
<li><code>public boolean mkdir()</code>:创建由此 <code>File</code> 表示的目录。
<ul>
<li>构造方法中给出的文件夹所在的路径不存在，返回 false，不会抛出异常。</li>
<li>当所创建的文件夹和文件重名时，即文件没有后缀名且和文件夹名字一样时，也返回 <code>false</code>。</li>
</ul>
</li>
<li><code>public boolean mkdirs()</code>:创建由此 <code>File</code> 表示的目录，包括任何必须但不存在的父目录。</li>
<li><code>public String[] list()</code>:表示 <code>File</code> 目录中的所有子文件或目录。</li>
<li><code>public File[] listFiles()</code>:表示 <code>File</code> 目录中的所有子文件或目录。
<ul>
<li>构造方法中给出的目录路径不存在或者不是目录，都会抛出空指针异常。</li>
</ul>
</li>
</ul>
</li>
<li>构造方法，禁止递归，编译报错。</li>
<li><code>java.io.FileFilter</code> 接口：<code>File</code> 对象的过滤器，抽象方法
<ul>
<li><code>boolean accept(File pathname)</code> 测试指定 <code>File</code> 对象是否应该包含在某个路径列表中。
<ul>
<li><code>File pathname</code>:使用 <code>ListFiles</code> 方法遍历目录，得到的每一个文件对象。</li>
</ul>
</li>
</ul>
</li>
<li><code>File</code> 类中重载方法 <code>public File[] listFiles(FileFilter filter)</code>:将 <code>File</code> 对象目录中符合过滤器条件的文件或目录返回。例子：
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">package</span> <span class="highlight-nn">package1</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.File</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span>
<span class="highlight-ln"> 5</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 6</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 7</span>        <span class="highlight-n">File</span> <span class="highlight-n">list</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">File</span><span class="highlight-o">(</span><span class="highlight-s">"C:\\Users\\10766\\Desktop"</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 8</span>        <span class="highlight-n">File</span><span class="highlight-o">[]</span> <span class="highlight-n">files</span> <span class="highlight-o">=</span> <span class="highlight-n">list</span><span class="highlight-o">.</span><span class="highlight-na">listFiles</span><span class="highlight-o">(</span><span class="highlight-n">pathname</span> <span class="highlight-o">-&gt;</span> <span class="highlight-n">pathname</span><span class="highlight-o">.</span><span class="highlight-na">getName</span><span class="highlight-o">().</span><span class="highlight-na">endsWith</span><span class="highlight-o">(</span><span class="highlight-s">".pdf"</span><span class="highlight-o">));</span>
<span class="highlight-ln"> 9</span>        <span class="highlight-c1">//File[] files = list.listFiles(new FileFilter() {
</span><span class="highlight-ln">10</span><span class="highlight-c1"></span>        <span class="highlight-c1">//    @Override
</span><span class="highlight-ln">11</span><span class="highlight-c1"></span>        <span class="highlight-c1">//    public boolean accept(File pathname) {
</span><span class="highlight-ln">12</span><span class="highlight-c1"></span>        <span class="highlight-c1">//        if (pathname.getName().endsWith(".pdf")) {
</span><span class="highlight-ln">13</span><span class="highlight-c1"></span>        <span class="highlight-c1">//            return true;
</span><span class="highlight-ln">14</span><span class="highlight-c1"></span>        <span class="highlight-c1">//        } else {
</span><span class="highlight-ln">15</span><span class="highlight-c1"></span>        <span class="highlight-c1">//            return false;
</span><span class="highlight-ln">16</span><span class="highlight-c1"></span>        <span class="highlight-c1">//        }
</span><span class="highlight-ln">17</span><span class="highlight-c1"></span>        <span class="highlight-c1">//    }
</span><span class="highlight-ln">18</span><span class="highlight-c1"></span>        <span class="highlight-c1">//});
</span><span class="highlight-ln">19</span><span class="highlight-c1"></span>        <span class="highlight-k">for</span> <span class="highlight-o">(</span><span class="highlight-n">File</span> <span class="highlight-n">file1</span> <span class="highlight-o">:</span> <span class="highlight-n">files</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">20</span>            <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">file1</span><span class="highlight-o">);</span>
<span class="highlight-ln">21</span>        <span class="highlight-o">}</span>
<span class="highlight-ln">22</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">23</span><span class="highlight-o">}</span>
</code></pre>
</li>
<li><code>java.io.FilenameFilter</code>:实现此接口的类实例可用于过滤器文件名。
<ul>
<li>抽象方法：<code>boolean accept(File dir, String name)</code> 测试指定文件是否应该包含在某一文件列表中。
<ul>
<li><code>File dir</code>:<code>File</code> 的构造方法中传递的被遍历的目录</li>
<li><code>String name</code>:使用 <code>listFiles</code> 方法遍历目录，获取的每一个文件/文件夹的名称</li>
</ul>
</li>
</ul>
</li>
<li><code>File</code> 中的重载方法 <code>File[] listFiles(FilenameFilter filter)</code>:将 <code>File</code> 对象目录中符合过滤器条件的文件或目录返回。例子：
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">package</span> <span class="highlight-nn">package1</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.File</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.FilenameFilter</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 5</span>
<span class="highlight-ln"> 6</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 7</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 8</span>        <span class="highlight-n">File</span> <span class="highlight-n">list</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">File</span><span class="highlight-o">(</span><span class="highlight-s">"C:\\Users\\10766\\Desktop"</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 9</span>        <span class="highlight-c1">//过滤pdf和文件夹
</span><span class="highlight-ln">10</span><span class="highlight-c1"></span>        <span class="highlight-n">File</span><span class="highlight-o">[]</span> <span class="highlight-n">files</span> <span class="highlight-o">=</span> <span class="highlight-n">list</span><span class="highlight-o">.</span><span class="highlight-na">listFiles</span><span class="highlight-o">(</span><span class="highlight-k">new</span> <span class="highlight-n">FilenameFilter</span><span class="highlight-o">()</span> <span class="highlight-o">{</span>
<span class="highlight-ln">11</span>            <span class="highlight-nd">@Override</span>
<span class="highlight-ln">12</span>            <span class="highlight-kd">public</span> <span class="highlight-kt">boolean</span> <span class="highlight-nf">accept</span><span class="highlight-o">(</span><span class="highlight-n">File</span> <span class="highlight-n">dir</span><span class="highlight-o">,</span> <span class="highlight-n">String</span> <span class="highlight-n">name</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">13</span>                <span class="highlight-k">return</span> <span class="highlight-k">new</span> <span class="highlight-n">File</span><span class="highlight-o">(</span><span class="highlight-n">dir</span><span class="highlight-o">,</span> <span class="highlight-n">name</span><span class="highlight-o">).</span><span class="highlight-na">isDirectory</span><span class="highlight-o">()</span> <span class="highlight-o">||</span> <span class="highlight-n">name</span><span class="highlight-o">.</span><span class="highlight-na">toLowerCase</span><span class="highlight-o">().</span><span class="highlight-na">endsWith</span><span class="highlight-o">(</span><span class="highlight-s">".pdf"</span><span class="highlight-o">);</span>
<span class="highlight-ln">14</span>            <span class="highlight-o">}</span>
<span class="highlight-ln">15</span>        <span class="highlight-o">});</span>
<span class="highlight-ln">16</span>        <span class="highlight-c1">//File[] files = list.listFiles((dir, name) -&gt; new File(dir, name).isDirectory() || name.toLowerCase().endsWith(".pdf"));
</span><span class="highlight-ln">17</span><span class="highlight-c1"></span>        <span class="highlight-k">for</span> <span class="highlight-o">(</span><span class="highlight-n">File</span> <span class="highlight-n">file1</span> <span class="highlight-o">:</span> <span class="highlight-n">files</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">18</span>            <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">file1</span><span class="highlight-o">);</span>
<span class="highlight-ln">19</span>        <span class="highlight-o">}</span>
<span class="highlight-ln">20</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">21</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
<h3 id="20--字节流-字符流-">20.【字节流、字符流】</h3>
<ul>
<li>
<p>IO 流最顶层的父类(抽象类)：</p>
<table>
<thead>
<tr>
<th></th>
<th>输入流</th>
<th>输出流</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>字节流</strong></td>
<td>字节输入流 <strong><code>InputStream</code></strong></td>
<td>字节输出流 <strong><code>OutputStream</code></strong></td>
</tr>
<tr>
<td><strong>字符流</strong></td>
<td>字符输入流 <strong><code>Reader</code></strong></td>
<td>字符输出流 <strong><code>Writer</code></strong></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>字节流适合读取字节文件(图像等)，字符流适合读取字符文件(txt)等。</p>
</li>
<li>
<p><code>java.io.OutputStream</code> 方法：</p>
<ul>
<li><code>public void close()</code>:关闭此输出流并释放与此流相关联的任何系统资源。</li>
<li><code>public void flush()</code>:刷新此输出流并强制任何缓冲的输出字节被写出。</li>
<li><code>public void write(byte[] b)</code>:将 <code>b.length</code> 字节从指定的字节数组写入此输出流。
<ul>
<li>如果写的第一个字节是正数(0-127)，那么显示的时候会查询 ASCII 表。</li>
<li>如果写的第一个字节是负数，那第一个字节会和第二个字节，两个字节组成一个中文显示，查询系统默认码表(GBK)。
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.FileOutputStream</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.IOException</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 3</span>
<span class="highlight-ln"> 4</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Demo01OutputStream</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 5</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">IOException</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 6</span>        <span class="highlight-n">FileOutputStream</span> <span class="highlight-n">fos</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">FileOutputStream</span><span class="highlight-o">(</span><span class="highlight-s">"C:\\Users\\10766\\Desktop\\a.txt"</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 7</span>        <span class="highlight-kt">byte</span><span class="highlight-o">[]</span> <span class="highlight-n">bytes</span> <span class="highlight-o">=</span> <span class="highlight-o">{-</span><span class="highlight-n">65</span><span class="highlight-o">,</span> <span class="highlight-o">-</span><span class="highlight-n">66</span><span class="highlight-o">,</span> <span class="highlight-o">-</span><span class="highlight-n">67</span><span class="highlight-o">,</span> <span class="highlight-n">68</span><span class="highlight-o">,</span> <span class="highlight-n">69</span><span class="highlight-o">};</span><span class="highlight-c1">//烤紻E
</span><span class="highlight-ln"> 8</span><span class="highlight-c1"></span>        <span class="highlight-n">fos</span><span class="highlight-o">.</span><span class="highlight-na">write</span><span class="highlight-o">(</span><span class="highlight-n">bytes</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 9</span>        <span class="highlight-n">fos</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln">10</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">11</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
</li>
<li><code>public void write(byte[] b,int off,int len)</code>:将指定字节数组写入 <code>len</code> 字节，从偏移量 <code>off</code> 开始输出到此输出流。</li>
<li><code>public abstract void write(int b)</code>:将指定的字节输出流。
<ul>
<li>要写入的字节是参数 b 的八个低位，b 的 24 个高位将被忽略。</li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>java.io.FileOutputStream extends OutputStream</code>:字节文件输出流，把内存中的数据写入到硬盘文件中。</p>
<ul>
<li><code>FileOutputStream(String name)</code> 创建一个向指定名称的文件中写入数据的输出文件流。</li>
<li><code>FileOutputStream(String name, boolean qppend)</code> 创建一个向指定名称的文件中写入数据的输出文件流。</li>
<li><code>FileOutputStream(File file)</code> 创建一个向指定 <code>File</code> 对象表示的文件中写入数据的文件输出流。</li>
<li><code>FileOutputStream(File file, boolean append)</code> 创建一个向指定 <code>File</code> 对象表示的文件中写入数据的文件输出流。</li>
<li>构造方法的作用：
<ul>
<li>创建一个对象</li>
<li>根据构造方法中传入的文件/文件路径，创建一个空的文件</li>
<li>把 <code>FileOutputStream</code> 对象指向创建好的文件</li>
</ul>
</li>
<li>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.FileOutputStream</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.IOException</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 3</span>
<span class="highlight-ln"> 4</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Demo01OutputStream</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 5</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">IOException</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 6</span>        <span class="highlight-c1">//1.创建一个FileOutputStream对象,构造方法中传递写入数据的目的地
</span><span class="highlight-ln"> 7</span><span class="highlight-c1"></span>        <span class="highlight-n">FileOutputStream</span> <span class="highlight-n">fos</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">FileOutputStream</span><span class="highlight-o">(</span><span class="highlight-s">"C:\\Users\\10766\\Desktop\\a.txt"</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 8</span>        <span class="highlight-c1">//2.调用FileOutputStream对象中的方法write,把数据写入到文件中
</span><span class="highlight-ln"> 9</span><span class="highlight-c1"></span>        <span class="highlight-c1">//public abstract void write(int b) ：将指定的字节输出流。
</span><span class="highlight-ln">10</span><span class="highlight-c1"></span>        <span class="highlight-n">fos</span><span class="highlight-o">.</span><span class="highlight-na">write</span><span class="highlight-o">(</span><span class="highlight-n">97</span><span class="highlight-o">);</span>
<span class="highlight-ln">11</span>        <span class="highlight-c1">//3.释放资源(流使用会占用一定的内存,使用完毕要把内存清空,提供程序的效率)
</span><span class="highlight-ln">12</span><span class="highlight-c1"></span>        <span class="highlight-n">fos</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln">13</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">14</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
</li>
<li>
<p>流使用会占用一定的内存，使用完毕要把内存清空，提升程序的效率。</p>
</li>
<li>
<p>字节输出流向硬盘写数据的时候的原理：<img src="https://raw.githubusercontent.com/Rainsheep/pic-bed/master/img/2020-02-09+18:36:45+p_20200209063639.png" alt=""></p>
</li>
<li>
<p><code>windows</code> 换行符为 <code>\r\n</code>，<code>Linix</code> 为 <code>\n</code>，<code>mac</code> 为 <code>\r</code>。</p>
</li>
<li>
<p><code>java.io.InputStream</code>：字节输入流</p>
<ul>
<li><code>int read()</code> 从输入流中读取数据的下一个字节，指针自动后移，读取到文件末尾返回-1。</li>
<li><code>int read(byte[] b)</code> 从输入流中读取一定数量的字节，并将其存储在缓冲区数组 b 中。
<ul>
<li>返回值为读取的有效字节个数，没有读到数据返回-1。</li>
<li>b 的长度为每次最多读取的字节数，长度一般定义为 1024(1kb)，或者 1024 的整数倍。</li>
</ul>
</li>
<li><code>void close()</code> 关闭此输入流并释放与该流关联的所有系统资源。</li>
</ul>
</li>
<li>
<p><code>java.io.FileInputStream extends InputStream</code>：文件字节输入流，把硬盘中的数据，读取到内存中使用。</p>
<ul>
<li><code>FileInputStream(String name)</code></li>
<li><code>FileInputStream(File file)</code> 参数为要读取的文件</li>
<li>构造方法的作用：
<ul>
<li>会创建一个 <code>FileInputStream</code> 对象</li>
<li>会把 <code>FileInputStream</code> 对象指向构造方法中要读取的文件</li>
</ul>
</li>
</ul>
</li>
<li>
<p>读取数据文件的原理(硬盘 →内存)：<br>
Java 程序 →JVM→OS→OS 读取数据的方法 →读取文件<br>
<img src="https://raw.githubusercontent.com/Rainsheep/pic-bed/master/img/2020-02-10+00:31:56+p_20200210123154.png" alt=""></p>
</li>
<li>
<p>读取字节文件的样例：</p>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">package</span> <span class="highlight-nn">package1</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.FileInputStream</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.IOException</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 5</span>
<span class="highlight-ln"> 6</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 7</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">IOException</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 8</span>        <span class="highlight-n">FileInputStream</span> <span class="highlight-n">fis</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">FileInputStream</span><span class="highlight-o">(</span><span class="highlight-s">"C:\\Users\\10766\\Desktop\\a.txt"</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 9</span>        <span class="highlight-kt">byte</span><span class="highlight-o">[]</span> <span class="highlight-n">bytes</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-kt">byte</span><span class="highlight-o">[</span><span class="highlight-n">1024</span><span class="highlight-o">];</span><span class="highlight-c1">//存储读取到的多个字节
</span><span class="highlight-ln">10</span><span class="highlight-c1"></span>        <span class="highlight-kt">int</span> <span class="highlight-n">len</span> <span class="highlight-o">=</span> <span class="highlight-n">0</span><span class="highlight-o">;</span> <span class="highlight-c1">//记录读取到的字节
</span><span class="highlight-ln">11</span><span class="highlight-c1"></span>        <span class="highlight-k">while</span> <span class="highlight-o">((</span><span class="highlight-n">len</span> <span class="highlight-o">=</span> <span class="highlight-n">fis</span><span class="highlight-o">.</span><span class="highlight-na">read</span><span class="highlight-o">(</span><span class="highlight-n">bytes</span><span class="highlight-o">))</span> <span class="highlight-o">!=</span> <span class="highlight-o">-</span><span class="highlight-n">1</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">12</span>            <span class="highlight-c1">//String(byte[] bytes, int offset, int length) 把字节数组的一部分转换为字符串 offset:数组的开始索引 length:转换的字节个数
</span><span class="highlight-ln">13</span><span class="highlight-c1"></span>            <span class="highlight-n">String</span> <span class="highlight-n">s</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">String</span><span class="highlight-o">(</span><span class="highlight-n">bytes</span><span class="highlight-o">,</span> <span class="highlight-n">0</span><span class="highlight-o">,</span> <span class="highlight-n">len</span><span class="highlight-o">);</span>
<span class="highlight-ln">14</span>            <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">s</span><span class="highlight-o">);</span>
<span class="highlight-ln">15</span>        <span class="highlight-o">}</span>
<span class="highlight-ln">16</span>        <span class="highlight-c1">//3.释放资源
</span><span class="highlight-ln">17</span><span class="highlight-c1"></span>        <span class="highlight-n">fis</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln">18</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">19</span><span class="highlight-o">}</span>
</code></pre>
</li>
<li>
<p>关闭流的时候，先关闭输出流，再关闭输入流。</p>
</li>
<li>
<p>复制文件的例子：</p>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">package</span> <span class="highlight-nn">package1</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.FileInputStream</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.FileOutputStream</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 5</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.IOException</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 6</span>
<span class="highlight-ln"> 7</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 8</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">IOException</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 9</span>        <span class="highlight-n">FileInputStream</span> <span class="highlight-n">fis</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">FileInputStream</span><span class="highlight-o">(</span><span class="highlight-s">"C:\\Users\\10766\\Desktop\\a.txt"</span><span class="highlight-o">);</span>
<span class="highlight-ln">10</span>        <span class="highlight-n">FileOutputStream</span> <span class="highlight-n">fos</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">FileOutputStream</span><span class="highlight-o">(</span><span class="highlight-s">"C:\\Users\\10766\\Desktop\\b.txt"</span><span class="highlight-o">,</span> <span class="highlight-kc">true</span><span class="highlight-o">);</span>
<span class="highlight-ln">11</span>        <span class="highlight-kt">byte</span><span class="highlight-o">[]</span> <span class="highlight-n">bytes</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-kt">byte</span><span class="highlight-o">[</span><span class="highlight-n">1024</span><span class="highlight-o">];</span>
<span class="highlight-ln">12</span>        <span class="highlight-kt">int</span> <span class="highlight-n">len</span> <span class="highlight-o">=</span> <span class="highlight-n">0</span><span class="highlight-o">;</span>
<span class="highlight-ln">13</span>        <span class="highlight-k">while</span> <span class="highlight-o">((</span><span class="highlight-n">len</span> <span class="highlight-o">=</span> <span class="highlight-n">fis</span><span class="highlight-o">.</span><span class="highlight-na">read</span><span class="highlight-o">(</span><span class="highlight-n">bytes</span><span class="highlight-o">))</span> <span class="highlight-o">!=</span> <span class="highlight-o">-</span><span class="highlight-n">1</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">14</span>            <span class="highlight-n">fos</span><span class="highlight-o">.</span><span class="highlight-na">write</span><span class="highlight-o">(</span><span class="highlight-n">bytes</span><span class="highlight-o">,</span> <span class="highlight-n">0</span><span class="highlight-o">,</span> <span class="highlight-n">len</span><span class="highlight-o">);</span>
<span class="highlight-ln">15</span>        <span class="highlight-o">}</span>
<span class="highlight-ln">16</span>        <span class="highlight-n">fos</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln">17</span>        <span class="highlight-n">fis</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln">18</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">19</span><span class="highlight-o">}</span>
</code></pre>
</li>
<li>
<p>字符流每次读取一个字符，不管此字符占几个字节，例如中文在 GBK 占两个字节，在 UTF-8 占用三个字节。</p>
</li>
<li>
<p><code>java.io.Reader</code>：字符输入流最顶层的父类，是一个抽象类。</p>
<ul>
<li><code>int read()</code> 读取单个字符并返回。
<ul>
<li><code>len</code> 为读取到的字符，包含中文。</li>
</ul>
</li>
<li><code>int read(char[] cbuf)</code> 一次读取多个字符，将字符读入数组。
<ul>
<li><code>len</code> 为读取到的有效字符个数。</li>
</ul>
</li>
<li><code>void close()</code> 关闭该流并释放与之关联的所有资源。</li>
</ul>
</li>
<li>
<p><code>java.io.FileReader extends InputStreamReader extends Reader</code>:文件字符输入流，把硬盘文件中的数据以字符的方式读取到内存中。</p>
<ul>
<li><code>FileReader(String filename)</code></li>
<li><code>FileReader(File file)</code></li>
</ul>
</li>
<li>
<p><code>FileReader</code> 的用法：</p>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.FileReader</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.IOException</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 3</span>
<span class="highlight-ln"> 4</span><span class="highlight-cm">/*
</span><span class="highlight-ln"> 5</span><span class="highlight-cm">    字符输入流的使用步骤:
</span><span class="highlight-ln"> 6</span><span class="highlight-cm">        1.创建FileReader对象,构造方法中绑定要读取的数据源
</span><span class="highlight-ln"> 7</span><span class="highlight-cm">        2.使用FileReader对象中的方法read读取文件
</span><span class="highlight-ln"> 8</span><span class="highlight-cm">        3.释放资源
</span><span class="highlight-ln"> 9</span><span class="highlight-cm"> */</span>
<span class="highlight-ln">10</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Demo02Reader</span> <span class="highlight-o">{</span>
<span class="highlight-ln">11</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">IOException</span> <span class="highlight-o">{</span>
<span class="highlight-ln">12</span>        <span class="highlight-c1">//1.创建FileReader对象,构造方法中绑定要读取的数据源
</span><span class="highlight-ln">13</span><span class="highlight-c1"></span>        <span class="highlight-n">FileReader</span> <span class="highlight-n">fr</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">FileReader</span><span class="highlight-o">(</span><span class="highlight-s">"09_IOAndProperties\\c.txt"</span><span class="highlight-o">);</span>
<span class="highlight-ln">14</span>        <span class="highlight-c1">//2.使用FileReader对象中的方法read读取文件
</span><span class="highlight-ln">15</span><span class="highlight-c1"></span>        <span class="highlight-c1">//int read() 读取单个字符并返回。
</span><span class="highlight-ln">16</span><span class="highlight-c1"></span>        <span class="highlight-cm">/*int len = 0;
</span><span class="highlight-ln">17</span><span class="highlight-cm">        while((len = fr.read()) != -1){
</span><span class="highlight-ln">18</span><span class="highlight-cm">            System.out.print((char)len);
</span><span class="highlight-ln">19</span><span class="highlight-cm">        }*/</span>
<span class="highlight-ln">20</span>
<span class="highlight-ln">21</span>        <span class="highlight-c1">//int read(char[] cbuf)一次读取多个字符,将字符读入数组。
</span><span class="highlight-ln">22</span><span class="highlight-c1"></span>        <span class="highlight-kt">char</span><span class="highlight-o">[]</span> <span class="highlight-n">cs</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-kt">char</span><span class="highlight-o">[</span><span class="highlight-n">1024</span><span class="highlight-o">];</span><span class="highlight-c1">//存储读取到的多个字符
</span><span class="highlight-ln">23</span><span class="highlight-c1"></span>        <span class="highlight-kt">int</span> <span class="highlight-n">len</span> <span class="highlight-o">=</span> <span class="highlight-n">0</span><span class="highlight-o">;</span><span class="highlight-c1">//记录的是每次读取的有效字符个数
</span><span class="highlight-ln">24</span><span class="highlight-c1"></span>        <span class="highlight-k">while</span> <span class="highlight-o">((</span><span class="highlight-n">len</span> <span class="highlight-o">=</span> <span class="highlight-n">fr</span><span class="highlight-o">.</span><span class="highlight-na">read</span><span class="highlight-o">(</span><span class="highlight-n">cs</span><span class="highlight-o">))</span> <span class="highlight-o">!=</span> <span class="highlight-o">-</span><span class="highlight-n">1</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">25</span>            <span class="highlight-cm">/*
</span><span class="highlight-ln">26</span><span class="highlight-cm">                String类的构造方法
</span><span class="highlight-ln">27</span><span class="highlight-cm">                String(char[] value) 把字符数组转换为字符串
</span><span class="highlight-ln">28</span><span class="highlight-cm">                String(char[] value, int offset, int count) 把字符数组的一部分转换为字符串 offset数组的开始索引 count转换的个数
</span><span class="highlight-ln">29</span><span class="highlight-cm">             */</span>
<span class="highlight-ln">30</span>            <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-k">new</span> <span class="highlight-n">String</span><span class="highlight-o">(</span><span class="highlight-n">cs</span><span class="highlight-o">,</span> <span class="highlight-n">0</span><span class="highlight-o">,</span> <span class="highlight-n">len</span><span class="highlight-o">));</span>
<span class="highlight-ln">31</span>        <span class="highlight-o">}</span>
<span class="highlight-ln">32</span>
<span class="highlight-ln">33</span>        <span class="highlight-c1">//3.释放资源
</span><span class="highlight-ln">34</span><span class="highlight-c1"></span>        <span class="highlight-n">fr</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln">35</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">36</span><span class="highlight-o">}</span>
</code></pre>
</li>
<li>
<p><code>java.io.Writer</code>:所有字符输出流的最顶层的父类，是一个抽象类。其实现类有 <code>FileWriter</code>:</p>
<ul>
<li><code>FileWriter(File file)</code></li>
<li><code>FileWriter(File file, boolean append)</code></li>
<li><code>FileWriter(Stirng filename)</code></li>
<li><code>FileWriter(Stirng filename, boolean append)</code></li>
</ul>
</li>
<li>
<p><code>java.io.FileWriter extends OutputStreamWriter extends Writer</code>:文件字符输出流。</p>
<ul>
<li><code>void write(int c)</code>：写入单个字符</li>
<li><code>void write(char[] cbuf)</code> 写入字符数组</li>
<li><code>abstract void write(char[] buf, int off, int len)</code> 写入字符数组的某一部分，<code>off</code> 数组的开始索引，<code>len</code> 写的字符个数。</li>
<li><code>void write(String str)</code> 写入字符串</li>
<li><code>void write(String str, int off, int len)</code> 写入字符串的某一部分，<code>off</code> 字符串的开始索引，<code>len</code> 写的字符个数。</li>
<li><code>void flush()</code> 刷新该流的缓冲，把内存缓冲区中的数据，刷新到文件中。</li>
<li><code>void close()</code> 关闭此流，但需要先刷新它。</li>
</ul>
</li>
<li>
<p>字符输出流的使用步骤：</p>
<ol>
<li>创建 <code>FileWriter</code> 对象，构造方法中绑定要写入数据的目的地</li>
<li>使用 <code>FileWriter</code> 中的方法 <code>write</code>,<strong>把数据写入到内存缓冲区中(字符转换为字节的过程)</strong></li>
<li>使用 <code>FileWriter</code> 中的方法 <code>flush</code>，把内存缓冲区中的数据，刷新到文件中</li>
<li>释放资源(会先把内存缓冲区中的数据刷新到文件中)</li>
</ol>
<blockquote>
<p>不刷新的数据会在内存缓冲区，输出流被刷新或者被关闭才会写入到硬盘</p>
</blockquote>
</li>
<li>
<p><code>flush</code> 和 <code>close</code> 方法的区别</p>
<ul>
<li><code>flush</code>：刷新缓冲区，使用户流对象可以继续使用。</li>
<li><code>close</code>：先刷新缓冲区，然后通知系统释放资源，流对象不可以再被使用。</li>
</ul>
</li>
<li>
<p>JDK7 新特性：在 try 的后边可以增加一个()，在括号中可以定义流对象，那么这个流对象的作用域就在 try 中有效，try 中的代码执行完毕，会自动把流对象释放，不用写 finally。</p>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.FileInputStream</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.FileOutputStream</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.IOException</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span>
<span class="highlight-ln"> 5</span><span class="highlight-cm">/*
</span><span class="highlight-ln"> 6</span><span class="highlight-cm">    格式:
</span><span class="highlight-ln"> 7</span><span class="highlight-cm">        try(定义流对象;定义流对象....){
</span><span class="highlight-ln"> 8</span><span class="highlight-cm">            可能会产出异常的代码
</span><span class="highlight-ln"> 9</span><span class="highlight-cm">        }catch(异常类变量 变量名){
</span><span class="highlight-ln">10</span><span class="highlight-cm">            异常的处理逻辑
</span><span class="highlight-ln">11</span><span class="highlight-cm">        }
</span><span class="highlight-ln">12</span><span class="highlight-cm"> */</span>
<span class="highlight-ln">13</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Demo02JDK7</span> <span class="highlight-o">{</span>
<span class="highlight-ln">14</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">15</span>        <span class="highlight-k">try</span> <span class="highlight-o">(</span>
<span class="highlight-ln">16</span>                <span class="highlight-n">FileInputStream</span> <span class="highlight-n">fis</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">FileInputStream</span><span class="highlight-o">(</span><span class="highlight-s">"c:\\1.jpg"</span><span class="highlight-o">);</span>
<span class="highlight-ln">17</span>                <span class="highlight-n">FileOutputStream</span> <span class="highlight-n">fos</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">FileOutputStream</span><span class="highlight-o">(</span><span class="highlight-s">"d:\\1.jpg"</span><span class="highlight-o">))</span> <span class="highlight-o">{</span>
<span class="highlight-ln">18</span>            <span class="highlight-kt">int</span> <span class="highlight-n">len</span> <span class="highlight-o">=</span> <span class="highlight-n">0</span><span class="highlight-o">;</span>
<span class="highlight-ln">19</span>            <span class="highlight-k">while</span> <span class="highlight-o">((</span><span class="highlight-n">len</span> <span class="highlight-o">=</span> <span class="highlight-n">fis</span><span class="highlight-o">.</span><span class="highlight-na">read</span><span class="highlight-o">())</span> <span class="highlight-o">!=</span> <span class="highlight-o">-</span><span class="highlight-n">1</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">20</span>                <span class="highlight-n">fos</span><span class="highlight-o">.</span><span class="highlight-na">write</span><span class="highlight-o">(</span><span class="highlight-n">len</span><span class="highlight-o">);</span>
<span class="highlight-ln">21</span>            <span class="highlight-o">}</span>
<span class="highlight-ln">22</span>        <span class="highlight-o">}</span> <span class="highlight-k">catch</span> <span class="highlight-o">(</span><span class="highlight-n">IOException</span> <span class="highlight-n">e</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">23</span>            <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">e</span><span class="highlight-o">);</span>
<span class="highlight-ln">24</span>        <span class="highlight-o">}</span>
<span class="highlight-ln">25</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">26</span><span class="highlight-o">}</span>
</code></pre>
</li>
<li>
<p>JDK9 新特性：try 的前边可以定义流对象，在 try 后边的()中可以直接引入流对象的名称(变量名)，在 try 代码执行完毕之后，流对象也可以释放掉，不用写 finally。</p>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.FileInputStream</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.FileOutputStream</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.IOException</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span>
<span class="highlight-ln"> 5</span><span class="highlight-cm">/*
</span><span class="highlight-ln"> 6</span><span class="highlight-cm">    格式:
</span><span class="highlight-ln"> 7</span><span class="highlight-cm">        A a = new A();
</span><span class="highlight-ln"> 8</span><span class="highlight-cm">        B b = new B();
</span><span class="highlight-ln"> 9</span><span class="highlight-cm">        try(a,b){
</span><span class="highlight-ln">10</span><span class="highlight-cm">            可能会产出异常的代码
</span><span class="highlight-ln">11</span><span class="highlight-cm">        }catch(异常类变量 变量名){
</span><span class="highlight-ln">12</span><span class="highlight-cm">            异常的处理逻辑
</span><span class="highlight-ln">13</span><span class="highlight-cm">        }
</span><span class="highlight-ln">14</span><span class="highlight-cm"> */</span>
<span class="highlight-ln">15</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Demo03JDK9</span> <span class="highlight-o">{</span>
<span class="highlight-ln">16</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">IOException</span> <span class="highlight-o">{</span>
<span class="highlight-ln">17</span>        <span class="highlight-n">FileInputStream</span> <span class="highlight-n">fis</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">FileInputStream</span><span class="highlight-o">(</span><span class="highlight-s">"c:\\1.jpg"</span><span class="highlight-o">);</span>
<span class="highlight-ln">18</span>        <span class="highlight-n">FileOutputStream</span> <span class="highlight-n">fos</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">FileOutputStream</span><span class="highlight-o">(</span><span class="highlight-s">"d:\\1.jpg"</span><span class="highlight-o">);</span>
<span class="highlight-ln">19</span>        <span class="highlight-k">try</span> <span class="highlight-o">(</span><span class="highlight-n">fis</span><span class="highlight-o">;</span> <span class="highlight-n">fos</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">20</span>            <span class="highlight-kt">int</span> <span class="highlight-n">len</span> <span class="highlight-o">=</span> <span class="highlight-n">0</span><span class="highlight-o">;</span>
<span class="highlight-ln">21</span>            <span class="highlight-k">while</span> <span class="highlight-o">((</span><span class="highlight-n">len</span> <span class="highlight-o">=</span> <span class="highlight-n">fis</span><span class="highlight-o">.</span><span class="highlight-na">read</span><span class="highlight-o">())</span> <span class="highlight-o">!=</span> <span class="highlight-o">-</span><span class="highlight-n">1</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">22</span>                <span class="highlight-n">fos</span><span class="highlight-o">.</span><span class="highlight-na">write</span><span class="highlight-o">(</span><span class="highlight-n">len</span><span class="highlight-o">);</span>
<span class="highlight-ln">23</span>            <span class="highlight-o">}</span>
<span class="highlight-ln">24</span>        <span class="highlight-o">}</span> <span class="highlight-k">catch</span> <span class="highlight-o">(</span><span class="highlight-n">IOException</span> <span class="highlight-n">e</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">25</span>            <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">e</span><span class="highlight-o">);</span>
<span class="highlight-ln">26</span>        <span class="highlight-o">}</span>
<span class="highlight-ln">27</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">28</span><span class="highlight-o">}</span>
</code></pre>
</li>
<li>
<p><code>java.util.Properties extends Hashtable&lt;K,V&gt; implements Map&lt;K,V&gt;</code>:</p>
<ul>
<li><code>Properties</code> 类表示了一个持久的属性集。</li>
<li><code>Properties</code> 可保存在流中或从流中加载</li>
<li><code>Properties</code> 集合是唯一一个和 IO 流相结合的集合
<ul>
<li>可以使用 <code>store</code> 方法，把集合中的临时数据，持久化写入到硬盘中存储</li>
<li>可以使用 <code>load</code> 方法，把硬盘中保存的文件(键值对)，读取到集合中使用</li>
</ul>
</li>
<li><code>Properties</code> 集合是一个双列集合，<code>key</code> 和 <code>value</code>  默认都是 <code>String</code>，无法更改</li>
</ul>
</li>
<li>
<p><code>Properties</code> 中常用方法：</p>
<ul>
<li><code>Object setProperty(String key, String value)</code> 调用 <code>Hashtable</code> 的方法 <code>put</code> 。</li>
<li><code>String getProperty(String key)</code> 相当于 <code>Map</code> 集合中的 <code>get(key)</code> 方法。</li>
<li><code>Set&lt;String&gt; stringPropertyNames()</code> 此方法相当于 Map 集合中的 <code>keySet</code> 方法。</li>
<li><code>void store(OutputStream out, String comments)</code> 把集合中的临时数据，持久化写入到硬盘中存储</li>
<li><code>void store(Writer writer, String comments)</code>
<ul>
<li><code>OutputStream out</code> 字节输出流，<strong>不能写中文</strong>，会乱码
<ul>
<li>
<p>为什么会产生乱码？</p>
</li>
<li>
<p>答：<code>store(OutputStream out, String comments)</code> 源码</p>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln">1</span><span class="highlight-kd">public</span> <span class="highlight-kt">void</span> <span class="highlight-nf">store</span><span class="highlight-o">(</span><span class="highlight-n">OutputStream</span> <span class="highlight-n">out</span><span class="highlight-o">,</span> <span class="highlight-n">String</span> <span class="highlight-n">comments</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">IOException</span> <span class="highlight-o">{</span>
<span class="highlight-ln">2</span>    <span class="highlight-n">store0</span><span class="highlight-o">(</span><span class="highlight-k">new</span> <span class="highlight-n">BufferedWriter</span><span class="highlight-o">(</span><span class="highlight-k">new</span> <span class="highlight-n">OutputStreamWriter</span><span class="highlight-o">(</span><span class="highlight-n">out</span><span class="highlight-o">,</span> <span class="highlight-s">"8859_1"</span><span class="highlight-o">)),</span>
<span class="highlight-ln">3</span>            <span class="highlight-n">comments</span><span class="highlight-o">,</span>
<span class="highlight-ln">4</span>            <span class="highlight-kc">true</span><span class="highlight-o">);</span>
<span class="highlight-ln">5</span><span class="highlight-o">}</span>
</code></pre>
<p><code>Properties</code> 中存储的为字符，字符需要编码为字节，编码就需要编码格式，<code>store</code> 中传入字节输出流的时候，以 <code>8859_1</code> 编码来调用 <code>OutputStreamWriter</code> 进行编码，此编码集不支持中文，<code>FileWriter</code> 则使用默认编码进行编码。</p>
</li>
</ul>
</li>
<li><code>Writer writer</code> 字符输出流，可以写中文</li>
<li><code>String comments</code> 注释，用来解释说明保存的文件是做什么用的，不能使用中文，默认 <code>Unicode</code> 编码，一般使用 <code>""</code> 空字符串，文本表现为 <code>#</code> 占一行，可以为 <code>null</code>，文本表现为没有注释行。</li>
<li>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">package</span> <span class="highlight-nn">package1</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.FileWriter</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.IOException</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 5</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.util.Properties</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 6</span>
<span class="highlight-ln"> 7</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 8</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">IOException</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 9</span>        <span class="highlight-n">Properties</span> <span class="highlight-n">properties</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">Properties</span><span class="highlight-o">();</span>
<span class="highlight-ln">10</span>        <span class="highlight-n">properties</span><span class="highlight-o">.</span><span class="highlight-na">setProperty</span><span class="highlight-o">(</span><span class="highlight-s">"赵丽颖"</span><span class="highlight-o">,</span> <span class="highlight-s">"168"</span><span class="highlight-o">);</span>
<span class="highlight-ln">11</span>        <span class="highlight-n">properties</span><span class="highlight-o">.</span><span class="highlight-na">setProperty</span><span class="highlight-o">(</span><span class="highlight-s">"杨幂"</span><span class="highlight-o">,</span> <span class="highlight-s">"22"</span><span class="highlight-o">);</span>
<span class="highlight-ln">12</span>        <span class="highlight-n">properties</span><span class="highlight-o">.</span><span class="highlight-na">store</span><span class="highlight-o">(</span><span class="highlight-k">new</span> <span class="highlight-n">FileWriter</span><span class="highlight-o">(</span><span class="highlight-s">"javase\\a.txt"</span><span class="highlight-o">),</span><span class="highlight-s">""</span><span class="highlight-o">);</span>
<span class="highlight-ln">13</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">14</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
</li>
<li><code>void load(InputStream inStream)</code> 把硬盘中保存的文件(键值对)，读取到集合中使用，不能读取中文</li>
<li><code>void load(Reader reader)</code> 可以读取中文
<ul>
<li>存储键值对的文件中，键与值默认的连接符号可以使用 =，空格(其他符号)</li>
<li>存储键值对的文件中，可以使用 # 进行注释，被注释的键值对不会再被读取</li>
<li>存储键值对的文件中，键与值默认都是字符串，不用再加引号</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="21--缓冲流-转换流-序列化流-打印流-">21.【缓冲流、转换流、序列化流、打印流】</h3>
<ul>
<li>缓冲流也叫高效流，是对 4 个基本的 <code>FileXxx</code> 流的增强：
<ul>
<li>字节缓冲流：<code>BufferedInputStream</code> , <code>BufferedOutputStream</code></li>
<li>字符缓冲流：<code>BufferedReader</code> , <code>BufferedWriter</code></li>
<li>缓冲流的原理：创建流对象时，会创建一个内置的默认大小的缓冲区数组，通过缓冲区读写，减少系统 IO 次数，从而提高读写的效率</li>
</ul>
</li>
<li><code>java.io.BufferedOutputStream extends OutputStream</code>:
<ul>
<li><code>BufferedOutputStream(OutputStream out)</code> :创建一个新的缓冲输出流，将数据写入指定的底层输出流。</li>
<li><code>BufferedOutputStream(OutputStream out, int size)</code> : 创建一个新的缓冲输出流，将具有指定缓冲区大小的数据写入指定的底层输出流。</li>
<li>关闭的时候，关闭 <code>BufferedOutputStream</code> 即可，会自己关闭 <code>OutputStream</code>。</li>
<li>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Demo01BufferedOutputStream</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 2</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">IOException</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 3</span>        <span class="highlight-c1">//1.创建FileOutputStream对象,构造方法中绑定要输出的目的地
</span><span class="highlight-ln"> 4</span><span class="highlight-c1"></span>        <span class="highlight-n">FileOutputStream</span> <span class="highlight-n">fos</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">FileOutputStream</span><span class="highlight-o">(</span><span class="highlight-s">"10_IO\\a.txt"</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 5</span>        <span class="highlight-c1">//2.创建BufferedOutputStream对象,构造方法中传递FileOutputStream对象对象,提高FileOutputStream对象效率
</span><span class="highlight-ln"> 6</span><span class="highlight-c1"></span>        <span class="highlight-n">BufferedOutputStream</span> <span class="highlight-n">bos</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">BufferedOutputStream</span><span class="highlight-o">(</span><span class="highlight-n">fos</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 7</span>        <span class="highlight-c1">//3.使用BufferedOutputStream对象中的方法write,把数据写入到内部缓冲区中
</span><span class="highlight-ln"> 8</span><span class="highlight-c1"></span>        <span class="highlight-n">bos</span><span class="highlight-o">.</span><span class="highlight-na">write</span><span class="highlight-o">(</span><span class="highlight-s">"我把数据写入到内部缓冲区中"</span><span class="highlight-o">.</span><span class="highlight-na">getBytes</span><span class="highlight-o">());</span>
<span class="highlight-ln"> 9</span>        <span class="highlight-c1">//4.使用BufferedOutputStream对象中的方法flush,把内部缓冲区中的数据,刷新到文件中
</span><span class="highlight-ln">10</span><span class="highlight-c1"></span>        <span class="highlight-n">bos</span><span class="highlight-o">.</span><span class="highlight-na">flush</span><span class="highlight-o">();</span>
<span class="highlight-ln">11</span>        <span class="highlight-c1">//5.释放资源(会先调用flush方法刷新数据,第4部可以省略)
</span><span class="highlight-ln">12</span><span class="highlight-c1"></span>        <span class="highlight-n">bos</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln">13</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">14</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
</li>
<li><code>java.io.BufferedInputStream extends InputStream</code> :
<ul>
<li><code>BufferedInputStream(InputStream in)</code> ：创建一个 <code>BufferedInputStream</code> 并保存其参数，即输入流 <code>in</code> ，以便将来使用。</li>
<li><code>BufferedInputStream(InputStream in, int size)</code>: 创建具有指定缓存区大小的对象，并保存其参数，即输入流 <code>in</code> ，以便将来使用。</li>
<li>使用步骤：
<ul>
<li>创建 <code>FileInputStream</code> 对象，构造方法中绑定要读取的数据源</li>
<li>创建 <code>BufferedInputStream</code> 对象，构造方法中传递 <code>FileInputStream</code> 对象，提高 <code>FileInputStrea</code> 对象的读取效率</li>
<li>使用 <code>BufferedInputStream</code> 对象中的方法 <code>read</code>，读取文件</li>
<li>释放资源</li>
</ul>
</li>
</ul>
</li>
<li><code>java.io.BufferedWriter extends Writer</code> :字符缓冲输出流
<ul>
<li><code>BufferedWriter(Writwe out)</code>: 创建一个使用默认大小输出缓冲区的缓冲字符输出流。</li>
<li><code>BufferedWriter(Writer out, int sz)</code> :创建一个使用给定大小输出缓冲区的新缓冲字符输出流。</li>
<li><code>void newLine()</code>: 写入一个行分隔符。会根据不同的操作系统，获取不同的行分隔符。</li>
</ul>
</li>
<li><code>java.io.BufferReader extends Reader</code>: 字符缓冲输入流。
<ul>
<li><code>BufferedReader(Reader in)</code> 创建一个使用默认大小输入缓冲区的缓冲字符输入流。</li>
<li><code>BufferedReader(Reader in, int sz)</code> : 创建一个使用指定大小缓冲区的缓冲字符输入流。</li>
<li><code>String readLine()</code> : 读取一个文本行，读入一行数据。通过下列字符之一即可认为某行已终止：换行 <code>\n</code>、回车 <code>\r</code> 或回车后直接跟着换行 <code>\r\n</code> 。返回包含该行内容的字符串，<strong>不包含任何行终止符</strong>，如果已到达流末尾，则返回 <code>null</code>。</li>
<li>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.BufferedReader</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.FileReader</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.IOException</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span>
<span class="highlight-ln"> 5</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Demo04BufferedReader</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 6</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">IOException</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 7</span>        <span class="highlight-c1">//1.创建字符缓冲输入流对象,构造方法中传递字符输入流
</span><span class="highlight-ln"> 8</span><span class="highlight-c1"></span>        <span class="highlight-n">BufferedReader</span> <span class="highlight-n">br</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">BufferedReader</span><span class="highlight-o">(</span><span class="highlight-k">new</span> <span class="highlight-n">FileReader</span><span class="highlight-o">(</span><span class="highlight-s">"10_IO\\c.txt"</span><span class="highlight-o">));</span>
<span class="highlight-ln"> 9</span>        <span class="highlight-c1">//2.使用字符缓冲输入流对象中的方法read/readLine读取文本
</span><span class="highlight-ln">10</span><span class="highlight-c1"></span>        <span class="highlight-n">String</span> <span class="highlight-n">line</span><span class="highlight-o">;</span>
<span class="highlight-ln">11</span>        <span class="highlight-k">while</span> <span class="highlight-o">((</span><span class="highlight-n">line</span> <span class="highlight-o">=</span> <span class="highlight-n">br</span><span class="highlight-o">.</span><span class="highlight-na">readLine</span><span class="highlight-o">())</span> <span class="highlight-o">!=</span> <span class="highlight-kc">null</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">12</span>            <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">line</span><span class="highlight-o">);</span>
<span class="highlight-ln">13</span>        <span class="highlight-o">}</span>
<span class="highlight-ln">14</span>        <span class="highlight-c1">//3.释放资源
</span><span class="highlight-ln">15</span><span class="highlight-c1"></span>        <span class="highlight-n">br</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln">16</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">17</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
</li>
<li>使用字符流去读取文件的时候，底层调用的是字节流读取的文件，然后字符流进行解码，解码成可以看懂的字符展示出来，例如 <code>FileReader</code> 底层调用的为 <code>FileInputStream</code>。</li>
<li><code>FileReader</code> 类使用的是 IDEA 中的默认编码(UTF-8)，当读取非默认编码文件的时候，就会出现乱码问题。</li>
<li>若要读取指定编码的文件，则需要使用转换流 <code>InputStreamReader</code>，写指定编码，则使用 <code>OutputStreamWriter</code>。</li>
<li>转换流的原理：<img src="https://raw.githubusercontent.com/Rainsheep/pic-bed/master/img/2020-02-11+20:48:14+02_%E8%BD%AC%E6%8D%A2%E6%B5%81%E7%9A%84%E5%8E%9F%E7%90%86.bmp" alt=""></li>
<li><code>java.io.OutputStreamWriter extends Writer</code> ：是字符流通向字节流的桥梁，可使用指定的编码，将要写入流中的字符编码为字节。
<ul>
<li><code>OutputStreamWriter(OutputStream out)</code>: 创建使用默认字符编码的 <code>OutputStreamWriter</code>。</li>
<li><code>OutputStreamWriter(OutputStream out, String charsetName)</code> : 创建使用指定字符集的 <code>OutputStreamWriter</code>。
<ul>
<li><code>OutputStream out</code>:字节输出流，可以用来写转换之后的字节到文件中。</li>
<li><code>String charsetName</code>:指定的编码表名称，不区分大小写。</li>
</ul>
</li>
<li>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">package</span> <span class="highlight-nn">package1</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.FileOutputStream</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.IOException</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 5</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.OutputStreamWriter</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 6</span>
<span class="highlight-ln"> 7</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 8</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">IOException</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 9</span>        <span class="highlight-c1">//1.创建OutputStreamWriter对象,构造方法中传递字节输出流和指定的编码表名称
</span><span class="highlight-ln">10</span><span class="highlight-c1"></span>        <span class="highlight-c1">//OutputStreamWriter osw = new OutputStreamWriter(new FileOutputStream("10_IO\\utf_8.txt"),"utf-8");
</span><span class="highlight-ln">11</span><span class="highlight-c1"></span>        <span class="highlight-n">OutputStreamWriter</span> <span class="highlight-n">osw</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">OutputStreamWriter</span><span class="highlight-o">(</span><span class="highlight-k">new</span> <span class="highlight-n">FileOutputStream</span><span class="highlight-o">(</span><span class="highlight-s">"10_IO\\utf_8.txt"</span><span class="highlight-o">));</span><span class="highlight-c1">//不指定默认使用UTF-8
</span><span class="highlight-ln">12</span><span class="highlight-c1"></span>        <span class="highlight-c1">//2.使用OutputStreamWriter对象中的方法write,把字符转换为字节存储缓冲区中(编码)
</span><span class="highlight-ln">13</span><span class="highlight-c1"></span>        <span class="highlight-n">osw</span><span class="highlight-o">.</span><span class="highlight-na">write</span><span class="highlight-o">(</span><span class="highlight-s">"你好"</span><span class="highlight-o">);</span>
<span class="highlight-ln">14</span>        <span class="highlight-c1">//3.使用OutputStreamWriter对象中的方法flush,把内存缓冲区中的字节刷新到文件中(使用字节流写字节的过程)
</span><span class="highlight-ln">15</span><span class="highlight-c1"></span>        <span class="highlight-n">osw</span><span class="highlight-o">.</span><span class="highlight-na">flush</span><span class="highlight-o">();</span>
<span class="highlight-ln">16</span>        <span class="highlight-c1">//4.释放资源
</span><span class="highlight-ln">17</span><span class="highlight-c1"></span>        <span class="highlight-n">osw</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln">18</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">19</span><span class="highlight-o">}</span>
</code></pre>
</li>
<li><code>flush()</code> 方法就是使用字节流写字节的过程。</li>
</ul>
</li>
<li><code>java.io.InputStreamReader extends Reader</code> : 是字节流通向字符流的桥梁，它使用指定的 <code>charset</code> 读取字节并将其解码为字符。
<ul>
<li><code>InputStreamReader(InputStream in)</code>: 创建一个使用默认字符集的  <code>InputStreamReader</code>。</li>
<li><code>InputStreamReader(InputStream in, String charsetName)</code> : 创建使用指定字符集的 <code>InputStreamReader</code>。</li>
<li>构造方法中指定的编码表名称要和文件的编码相同，否则会发生乱码。</li>
</ul>
</li>
<li><code>java.io.ObjectOutputStream extends OutputStream</code> 对象的序列化流，把对象以流的方式写入到文件中保存。原理：<img src="https://raw.githubusercontent.com/Rainsheep/pic-bed/master/img/2020-02-11+22:45:12+03_%E5%BA%8F%E5%88%97%E5%8C%96%E5%92%8C%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E7%9A%84%E6%A6%82%E8%BF%B0.bmp" alt=""></li>
<li><code>ObjectOutputStream</code> 中的方法：
<ul>
<li><code>ObjectOutputStream(OutputStream out)</code>: 创建写入指定 <code>ObjectStream</code> 的 <code>ObjectOutputStream</code>。</li>
<li><code>void writeObject(Object obj)</code> : 将指定的对象写入 <code>ObjectOutputStream</code>。</li>
</ul>
</li>
<li>要进行序列化和反序列化的类，需要实现 <code>java.io.Serializable</code> ，否则会抛出 <code>NotSerializableException</code> 。<code>Serializable</code> 接口也叫标记型接口，其中并没有内容，只起标记作用。</li>
<li>序列化之后的文件为二进制文件，无法查看。</li>
<li><code>java.io.ObjectInputStream extends InputStream</code> : 对象的反序列化流，把文件中保存的对象，以流的方式读取出来使用。
<ul>
<li>使用前提：
<ul>
<li>类必须实现 <code>Serializable</code> 接口</li>
<li>必须存在类对象的 Class 文件，否则会抛出 <code>ClassNotFoundException</code></li>
</ul>
</li>
<li><code>ObjectInputStream(InputStream in)</code> : 创建从指定 <code>InputStream</code> 读取的 <code>ObjectInputStream</code>。</li>
<li><code>Object readObject()</code> 从指定 <code>ObjectInputStream</code> 读取对象。</li>
<li>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">import</span> <span class="highlight-nn">package1.Person</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.FileInputStream</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.IOException</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 5</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.ObjectInputStream</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 6</span>
<span class="highlight-ln"> 7</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Demo02ObjectInputStream</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 8</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">IOException</span><span class="highlight-o">,</span> <span class="highlight-n">ClassNotFoundException</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 9</span>        <span class="highlight-c1">//1.创建ObjectInputStream对象,构造方法中传递字节输入流
</span><span class="highlight-ln">10</span><span class="highlight-c1"></span>        <span class="highlight-n">ObjectInputStream</span> <span class="highlight-n">ois</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">ObjectInputStream</span><span class="highlight-o">(</span><span class="highlight-k">new</span> <span class="highlight-n">FileInputStream</span><span class="highlight-o">(</span><span class="highlight-s">"10_IO\\person.txt"</span><span class="highlight-o">));</span>
<span class="highlight-ln">11</span>        <span class="highlight-c1">//2.使用ObjectInputStream对象中的方法readObject读取保存对象的文件
</span><span class="highlight-ln">12</span><span class="highlight-c1"></span>        <span class="highlight-n">Object</span> <span class="highlight-n">o</span> <span class="highlight-o">=</span> <span class="highlight-n">ois</span><span class="highlight-o">.</span><span class="highlight-na">readObject</span><span class="highlight-o">();</span>
<span class="highlight-ln">13</span>        <span class="highlight-c1">//3.释放资源
</span><span class="highlight-ln">14</span><span class="highlight-c1"></span>        <span class="highlight-n">ois</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln">15</span>        <span class="highlight-c1">//4.使用读取出来的对象(打印)
</span><span class="highlight-ln">16</span><span class="highlight-c1"></span>        <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">o</span><span class="highlight-o">);</span>
<span class="highlight-ln">17</span>        <span class="highlight-n">Person</span> <span class="highlight-n">p</span> <span class="highlight-o">=</span> <span class="highlight-o">(</span><span class="highlight-n">Person</span><span class="highlight-o">)</span> <span class="highlight-n">o</span><span class="highlight-o">;</span>
<span class="highlight-ln">18</span>        <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">p</span><span class="highlight-o">.</span><span class="highlight-na">getName</span><span class="highlight-o">()</span> <span class="highlight-o">+</span> <span class="highlight-n">p</span><span class="highlight-o">.</span><span class="highlight-na">getAge</span><span class="highlight-o">());</span>
<span class="highlight-ln">19</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">20</span>
<span class="highlight-ln">21</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
</li>
<li>被 <code>static</code> 修饰的成员变量不能被序列化，序列化的都是对象，静态优先于对象加载进内存
<pre><code class="language-java highlight-chroma"><span class="highlight-ln">1</span><span class="highlight-kd">private</span> <span class="highlight-kd">static</span> <span class="highlight-kt">int</span> <span class="highlight-n">age</span><span class="highlight-o">;</span>
<span class="highlight-ln">2</span><span class="highlight-n">oos</span><span class="highlight-o">.</span><span class="highlight-na">writeObjecy</span><span class="highlight-o">(</span><span class="highlight-k">new</span> <span class="highlight-n">Person</span><span class="highlight-o">(</span><span class="highlight-s">"小美女"</span><span class="highlight-o">,</span> <span class="highlight-n">18</span><span class="highlight-o">));</span>
<span class="highlight-ln">3</span><span class="highlight-n">Object</span> <span class="highlight-n">o</span> <span class="highlight-o">=</span> <span class="highlight-n">ois</span><span class="highlight-o">.</span><span class="highlight-na">readObject</span><span class="highlight-o">();</span>
<span class="highlight-ln">4</span><span class="highlight-n">Person</span><span class="highlight-o">{</span><span class="highlight-n">name</span> <span class="highlight-o">=</span> <span class="highlight-s">"小美女"</span><span class="highlight-o">,</span> <span class="highlight-n">age</span> <span class="highlight-o">=</span> <span class="highlight-n">0</span><span class="highlight-o">};</span>
</code></pre>
</li>
<li><code>transient</code> 关键字：瞬态关键字，被 <code>transient</code> 修饰的成员变量，不能被序列化
<pre><code class="language-java highlight-chroma"><span class="highlight-ln">1</span><span class="highlight-kd">private</span> <span class="highlight-kd">transient</span> <span class="highlight-n">age</span><span class="highlight-o">;</span>
<span class="highlight-ln">2</span><span class="highlight-n">oos</span><span class="highlight-o">.</span><span class="highlight-na">writeObject</span><span class="highlight-o">(</span><span class="highlight-k">new</span> <span class="highlight-n">Person</span><span class="highlight-o">(</span><span class="highlight-s">"小美女"</span><span class="highlight-o">,</span> <span class="highlight-n">18</span><span class="highlight-o">));</span>
<span class="highlight-ln">3</span><span class="highlight-n">Object</span> <span class="highlight-n">o</span> <span class="highlight-o">=</span> <span class="highlight-n">ois</span><span class="highlight-o">.</span><span class="highlight-na">readObject</span><span class="highlight-o">();</span>
<span class="highlight-ln">4</span><span class="highlight-n">Person</span><span class="highlight-o">{</span><span class="highlight-n">name</span> <span class="highlight-o">=</span> <span class="highlight-s">"小美女"</span><span class="highlight-o">,</span> <span class="highlight-n">age</span> <span class="highlight-o">=</span> <span class="highlight-n">0</span><span class="highlight-o">};</span>
</code></pre>
</li>
<li><code>InvaildClassException</code> 序列化冲突异常的原理及解决方法：<img src="https://raw.githubusercontent.com/Rainsheep/pic-bed/master/img/2020-02-11+23:25:05+04_%E5%BA%8F%E5%88%97%E5%8F%B7%E5%86%B2%E7%AA%81%E5%BC%82%E5%B8%B8%E7%9A%84%E5%8E%9F%E7%90%86%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.bmp" alt=""></li>
<li>当想在同一个文件保存多个对象的时候，可以将对象存储到集合中，然后序列化集合。</li>
<li><code>java.io.PrintStream extends OutputStream</code>: 打印流，为其他输出流添加了功能，使它们能够方便地打印各种数据值表示形式。
<ul>
<li>只负责数据的输出，不负责数据的读取。</li>
<li>与其他输出流不同，<code>PrintStream</code> 永远不会抛出 <code>IOException</code> 。</li>
<li>有特有的方法，<code>print</code>,<code>println</code></li>
<li>如果使用继承自父类的 <code>write</code> 方法写数据，那么查看数据的时候会查询编码表 97-&gt;a</li>
<li>如果使用自己特有的方法 <code>print/println</code> 方法写数据，写的数据原样输出 97-&gt;97</li>
<li><code>PrintStream(File file)</code> 输出的目的地是一个文件</li>
<li><code>PrintStream(File file, String csn)</code> 第二个参数为指定的字符集</li>
<li><code>PrintStream(OutputStream out)</code> 输出目的地是一个字节输出流</li>
<li><code>PrintStream(String fileName)</code> 输出的目的地是一个文件路径</li>
<li><code>PrintStream(String fileName, String csn)</code> 第二个参数为指定的字符集</li>
</ul>
</li>
<li><code>System.out</code> 对象为 <code>PrintStream</code>。</li>
<li><code>System.setOut</code> 方法可以改变输出语句的目的地，改为参数中传递的打印流的目的地。
<ul>
<li><code>static void setOut(PrintStream out)</code> 重新分配标准输出流</li>
<li>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.FileNotFoundException</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.PrintStream</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 3</span>
<span class="highlight-ln"> 4</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Demo02PrintStream</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 5</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">FileNotFoundException</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 6</span>        <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-s">"我是在控制台输出"</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 7</span>
<span class="highlight-ln"> 8</span>        <span class="highlight-n">PrintStream</span> <span class="highlight-n">ps</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">PrintStream</span><span class="highlight-o">(</span><span class="highlight-s">"10_IO\\目的地是打印流.txt"</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 9</span>        <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">setOut</span><span class="highlight-o">(</span><span class="highlight-n">ps</span><span class="highlight-o">);</span><span class="highlight-c1">//把输出语句的目的地改变为打印流的目的地
</span><span class="highlight-ln">10</span><span class="highlight-c1"></span>        <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-s">"我在打印流的目的地中输出"</span><span class="highlight-o">);</span>
<span class="highlight-ln">11</span>
<span class="highlight-ln">12</span>        <span class="highlight-n">ps</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln">13</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">14</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
</li>
</ul>
<h3 id="22--网络编程-">22.【网络编程】</h3>
<ul>
<li>
<p>UDP ：用户数据报协议(User Datagram Protocol)，是面向无连接的协议，不管对方端服务是否启动，直接发，每个数据包限制在 64k 以内，传输快，耗资小，不可靠，容易丢失数据。</p>
</li>
<li>
<p>TCP :  传输控制协议 (Transmission Control Protocol)，面向连接的，先建立连接，再发送数据，提供可靠无差错的数据传输。三次握手：<img src="https://raw.githubusercontent.com/Rainsheep/pic-bed/master/img/2020-02-13+19:13:46+p_20200213071343.png" alt=""></p>
</li>
<li>
<p>端口号由 2 个字节组成，范围为 0~65535 ， 1024 之前的端口号已被系统分配，不能使用。</p>
</li>
<li>
<p>Oracle 默认端口号为 1521。</p>
</li>
<li>
<p>套接字是两台机器间通信的端点，包含了 IP 地址和端口号的网络单位。</p>
</li>
<li>
<p>TCP 通信的概述，服务器使用客户端的字节流与客户端进行交互，服务器端套接字 <code>ServerSocket</code> 中方法 <code>Socket accept()</code> 可以获取到请求的客户端对象，但是此对象和客户端上面的 <code>Socket</code> 并非一个对象，因为不在一个机器上，自然不会指向同一个内存。<img src="https://raw.githubusercontent.com/Rainsheep/pic-bed/master/img/2020-02-13+20:09:19+02_TCP%E9%80%9A%E4%BF%A1%E7%9A%84%E6%A6%82%E8%BF%B0.bmp" alt=""></p>
</li>
<li>
<p><code>java.net.Socket</code> 类实现客户端的套接字。</p>
<ul>
<li><code>Socket(String host, int port)</code> 创建一个套接字，并将其连接到指定主机上的指定端口号。
<ul>
<li>新建 <code>Socket</code> 的时候，若无法连接至服务器，会抛出 <code>ConnectException</code> 异常。</li>
</ul>
</li>
<li><code>OutputStream getOutputStream()</code> 返回此套接字的输出流。</li>
<li><code>InputStream getInputStream()</code> 返回此套接字的输入流。</li>
<li><code>void close()</code> 关闭此套接字。</li>
<li>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.IOException</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.InputStream</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.OutputStream</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.net.Socket</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 5</span>
<span class="highlight-ln"> 6</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">TCPClient</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 7</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">IOException</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 8</span>        <span class="highlight-c1">//1.创建一个客户端对象Socket,构造方法绑定服务器的IP地址和端口号
</span><span class="highlight-ln"> 9</span><span class="highlight-c1"></span>        <span class="highlight-n">Socket</span> <span class="highlight-n">socket</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">Socket</span><span class="highlight-o">(</span><span class="highlight-s">"127.0.0.1"</span><span class="highlight-o">,</span> <span class="highlight-n">8888</span><span class="highlight-o">);</span>
<span class="highlight-ln">10</span>        <span class="highlight-c1">//2.使用Socket对象中的方法getOutputStream()获取网络字节输出流OutputStream对象
</span><span class="highlight-ln">11</span><span class="highlight-c1"></span>        <span class="highlight-n">OutputStream</span> <span class="highlight-n">os</span> <span class="highlight-o">=</span> <span class="highlight-n">socket</span><span class="highlight-o">.</span><span class="highlight-na">getOutputStream</span><span class="highlight-o">();</span>
<span class="highlight-ln">12</span>        <span class="highlight-c1">//3.使用网络字节输出流OutputStream对象中的方法write,给服务器发送数据
</span><span class="highlight-ln">13</span><span class="highlight-c1"></span>        <span class="highlight-n">os</span><span class="highlight-o">.</span><span class="highlight-na">write</span><span class="highlight-o">(</span><span class="highlight-s">"你好服务器"</span><span class="highlight-o">.</span><span class="highlight-na">getBytes</span><span class="highlight-o">());</span>
<span class="highlight-ln">14</span>        <span class="highlight-c1">//4.使用Socket对象中的方法getInputStream()获取网络字节输入流InputStream对象
</span><span class="highlight-ln">15</span><span class="highlight-c1"></span>        <span class="highlight-n">InputStream</span> <span class="highlight-n">is</span> <span class="highlight-o">=</span> <span class="highlight-n">socket</span><span class="highlight-o">.</span><span class="highlight-na">getInputStream</span><span class="highlight-o">();</span>
<span class="highlight-ln">16</span>        <span class="highlight-c1">//5.使用网络字节输入流InputStream对象中的方法read,读取服务器回写的数据
</span><span class="highlight-ln">17</span><span class="highlight-c1"></span>        <span class="highlight-kt">byte</span><span class="highlight-o">[]</span> <span class="highlight-n">bytes</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-kt">byte</span><span class="highlight-o">[</span><span class="highlight-n">1024</span><span class="highlight-o">];</span>
<span class="highlight-ln">18</span>        <span class="highlight-kt">int</span> <span class="highlight-n">len</span> <span class="highlight-o">=</span> <span class="highlight-n">is</span><span class="highlight-o">.</span><span class="highlight-na">read</span><span class="highlight-o">(</span><span class="highlight-n">bytes</span><span class="highlight-o">);</span>
<span class="highlight-ln">19</span>        <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-k">new</span> <span class="highlight-n">String</span><span class="highlight-o">(</span><span class="highlight-n">bytes</span><span class="highlight-o">,</span> <span class="highlight-n">0</span><span class="highlight-o">,</span> <span class="highlight-n">len</span><span class="highlight-o">));</span>
<span class="highlight-ln">20</span>        <span class="highlight-c1">//6.释放资源(Socket)
</span><span class="highlight-ln">21</span><span class="highlight-c1"></span>        <span class="highlight-n">socket</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln">22</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">23</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
</li>
<li>
<p><code>java.net.ServerSocket</code> 类实现服务器端套接字。</p>
<ul>
<li><code>ServerSocket(int port)</code> 创建绑定到指定端口的服务器套接字。</li>
<li><code>Socket accept()</code> 监听并接受到此套接字的连接。</li>
<li>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.IOException</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.InputStream</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.OutputStream</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.net.ServerSocket</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 5</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.net.Socket</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 6</span>
<span class="highlight-ln"> 7</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">TCPServer</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 8</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">IOException</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 9</span>        <span class="highlight-c1">//1.创建服务器ServerSocket对象和系统要指定的端口号
</span><span class="highlight-ln">10</span><span class="highlight-c1"></span>        <span class="highlight-n">ServerSocket</span> <span class="highlight-n">server</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">ServerSocket</span><span class="highlight-o">(</span><span class="highlight-n">8888</span><span class="highlight-o">);</span>
<span class="highlight-ln">11</span>        <span class="highlight-c1">//2.使用ServerSocket对象中的方法accept,获取到请求的客户端对象Socket
</span><span class="highlight-ln">12</span><span class="highlight-c1"></span>        <span class="highlight-n">Socket</span> <span class="highlight-n">socket</span> <span class="highlight-o">=</span> <span class="highlight-n">server</span><span class="highlight-o">.</span><span class="highlight-na">accept</span><span class="highlight-o">();</span>
<span class="highlight-ln">13</span>        <span class="highlight-c1">//3.使用Socket对象中的方法getInputStream()获取网络字节输入流InputStream对象
</span><span class="highlight-ln">14</span><span class="highlight-c1"></span>        <span class="highlight-n">InputStream</span> <span class="highlight-n">is</span> <span class="highlight-o">=</span> <span class="highlight-n">socket</span><span class="highlight-o">.</span><span class="highlight-na">getInputStream</span><span class="highlight-o">();</span>
<span class="highlight-ln">15</span>        <span class="highlight-c1">//4.使用网络字节输入流InputStream对象中的方法read,读取客户端发送的数据
</span><span class="highlight-ln">16</span><span class="highlight-c1"></span>        <span class="highlight-kt">byte</span><span class="highlight-o">[]</span> <span class="highlight-n">bytes</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-kt">byte</span><span class="highlight-o">[</span><span class="highlight-n">1024</span><span class="highlight-o">];</span>
<span class="highlight-ln">17</span>        <span class="highlight-kt">int</span> <span class="highlight-n">len</span> <span class="highlight-o">=</span> <span class="highlight-n">is</span><span class="highlight-o">.</span><span class="highlight-na">read</span><span class="highlight-o">(</span><span class="highlight-n">bytes</span><span class="highlight-o">);</span>
<span class="highlight-ln">18</span>        <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-k">new</span> <span class="highlight-n">String</span><span class="highlight-o">(</span><span class="highlight-n">bytes</span><span class="highlight-o">,</span> <span class="highlight-n">0</span><span class="highlight-o">,</span> <span class="highlight-n">len</span><span class="highlight-o">));</span>
<span class="highlight-ln">19</span>        <span class="highlight-c1">//5.使用Socket对象中的方法getOutputStream()获取网络字节输出流OutputStream对象
</span><span class="highlight-ln">20</span><span class="highlight-c1"></span>        <span class="highlight-n">OutputStream</span> <span class="highlight-n">os</span> <span class="highlight-o">=</span> <span class="highlight-n">socket</span><span class="highlight-o">.</span><span class="highlight-na">getOutputStream</span><span class="highlight-o">();</span>
<span class="highlight-ln">21</span>        <span class="highlight-c1">//6.使用网络字节输出流OutputStream对象中的方法write,给客户端回写数据
</span><span class="highlight-ln">22</span><span class="highlight-c1"></span>        <span class="highlight-n">os</span><span class="highlight-o">.</span><span class="highlight-na">write</span><span class="highlight-o">(</span><span class="highlight-s">"收到谢谢"</span><span class="highlight-o">.</span><span class="highlight-na">getBytes</span><span class="highlight-o">());</span>
<span class="highlight-ln">23</span>        <span class="highlight-c1">//7.释放资源(Socket,ServerSocket)
</span><span class="highlight-ln">24</span><span class="highlight-c1"></span>        <span class="highlight-n">socket</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln">25</span>        <span class="highlight-n">server</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln">26</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">27</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
</li>
<li>
<p><code>Socket</code> 的 <code>OutputStream</code> 字节输出流中的 <code>read()</code> 方法，如果没有输入可用，则 <code>read</code> 将堵塞，读不到数据 的时候会堵塞，直到另一端发送终止序列或者将输出流关闭，可以调用 <code>socket.shutdownOutput()</code> 来半关闭 <code>Socket</code> (只关闭输出流，不关闭输入流，也不会关闭连接)。</p>
<p><code>void shutdownOutput()</code> 禁用此套接字的输出流。对于 TCP 套接字，任何以前写入的数据都将被发送，并且后跟 TCP 的正常连接终止序列。</p>
<blockquote>
<p>注意：当 read 阻塞的时候，另一端关掉 socket 就会关掉连接，此端的字节输出流自然也会被关闭。</p>
</blockquote>
</li>
<li>
<p><code>socket.shutdownOutput()</code> 与 <code>outputStream.close()</code> 的区别，前者是半关闭，只关闭输出流，<code>Scoket</code> 连接并不会被关闭，输出流半关闭以后，另一端输入流 <code>read</code> 会一直读入输出连接终止的信号，后者会关闭 <code>Socket</code> 连接。</p>
</li>
<li>
<p>文件上传案例：<br>
<img src="https://raw.githubusercontent.com/Rainsheep/pic-bed/master/img/2020-02-14+00:42:49+03_%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9A%84%E5%8E%9F%E7%90%86.bmp" alt=""><br>
<img src="https://raw.githubusercontent.com/Rainsheep/pic-bed/master/img/2020-02-14+00:43:30+04_%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%A1%88%E4%BE%8B%E7%9A%84%E9%98%BB%E5%A1%9E%E9%97%AE%E9%A2%98.bmp" alt=""></p>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">package</span> <span class="highlight-nn">package1</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.FileInputStream</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.IOException</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 5</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.InputStream</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 6</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.OutputStream</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 7</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.net.Socket</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 8</span>
<span class="highlight-ln"> 9</span><span class="highlight-cm">/*
</span><span class="highlight-ln">10</span><span class="highlight-cm">    文件上传案例的客户端:读取本地文件,上传到服务器,读取服务器回写的数据
</span><span class="highlight-ln">11</span><span class="highlight-cm">
</span><span class="highlight-ln">12</span><span class="highlight-cm">    明确:
</span><span class="highlight-ln">13</span><span class="highlight-cm">        数据源:c:\\1.jpg
</span><span class="highlight-ln">14</span><span class="highlight-cm">        目的地:服务器
</span><span class="highlight-ln">15</span><span class="highlight-cm">
</span><span class="highlight-ln">16</span><span class="highlight-cm">    实现步骤:
</span><span class="highlight-ln">17</span><span class="highlight-cm">        1.创建一个本地字节输入流FileInputStream对象,构造方法中绑定要读取的数据源
</span><span class="highlight-ln">18</span><span class="highlight-cm">        2.创建一个客户端Socket对象,构造方法中绑定服务器的IP地址和端口号
</span><span class="highlight-ln">19</span><span class="highlight-cm">        3.使用Socket中的方法getOutputStream,获取网络字节输出流OutputStream对象
</span><span class="highlight-ln">20</span><span class="highlight-cm">        4.使用本地字节输入流FileInputStream对象中的方法read,读取本地文件
</span><span class="highlight-ln">21</span><span class="highlight-cm">        5.使用网络字节输出流OutputStream对象中的方法write,把读取到的文件上传到服务器
</span><span class="highlight-ln">22</span><span class="highlight-cm">        6.使用Socket中的方法getInputStream,获取网络字节输入流InputStream对象
</span><span class="highlight-ln">23</span><span class="highlight-cm">        7.使用网络字节输入流InputStream对象中的方法read读取服务回写的数据
</span><span class="highlight-ln">24</span><span class="highlight-cm">        8.释放资源(FileInputStream,Socket)
</span><span class="highlight-ln">25</span><span class="highlight-cm"> */</span>
<span class="highlight-ln">26</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">TCPClient</span> <span class="highlight-o">{</span>
<span class="highlight-ln">27</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">IOException</span> <span class="highlight-o">{</span>
<span class="highlight-ln">28</span>        <span class="highlight-c1">//1.创建一个本地字节输入流FileInputStream对象,构造方法中绑定要读取的数据源
</span><span class="highlight-ln">29</span><span class="highlight-c1"></span>        <span class="highlight-n">FileInputStream</span> <span class="highlight-n">fis</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">FileInputStream</span><span class="highlight-o">(</span><span class="highlight-s">"d:\\1.jpg"</span><span class="highlight-o">);</span>
<span class="highlight-ln">30</span>        <span class="highlight-c1">//2.创建一个客户端Socket对象,构造方法中绑定服务器的IP地址和端口号
</span><span class="highlight-ln">31</span><span class="highlight-c1"></span>        <span class="highlight-n">Socket</span> <span class="highlight-n">socket</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">Socket</span><span class="highlight-o">(</span><span class="highlight-s">"127.0.0.1"</span><span class="highlight-o">,</span> <span class="highlight-n">8888</span><span class="highlight-o">);</span>
<span class="highlight-ln">32</span>        <span class="highlight-c1">//3.使用Socket中的方法getOutputStream,获取网络字节输出流OutputStream对象
</span><span class="highlight-ln">33</span><span class="highlight-c1"></span>        <span class="highlight-n">OutputStream</span> <span class="highlight-n">os</span> <span class="highlight-o">=</span> <span class="highlight-n">socket</span><span class="highlight-o">.</span><span class="highlight-na">getOutputStream</span><span class="highlight-o">();</span>
<span class="highlight-ln">34</span>        <span class="highlight-c1">//4.使用本地字节输入流FileInputStream对象中的方法read,读取本地文件
</span><span class="highlight-ln">35</span><span class="highlight-c1"></span>        <span class="highlight-kt">int</span> <span class="highlight-n">len</span> <span class="highlight-o">=</span> <span class="highlight-n">0</span><span class="highlight-o">;</span>
<span class="highlight-ln">36</span>        <span class="highlight-kt">byte</span><span class="highlight-o">[]</span> <span class="highlight-n">bytes</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-kt">byte</span><span class="highlight-o">[</span><span class="highlight-n">1024</span><span class="highlight-o">];</span>
<span class="highlight-ln">37</span>        <span class="highlight-k">while</span> <span class="highlight-o">((</span><span class="highlight-n">len</span> <span class="highlight-o">=</span> <span class="highlight-n">fis</span><span class="highlight-o">.</span><span class="highlight-na">read</span><span class="highlight-o">(</span><span class="highlight-n">bytes</span><span class="highlight-o">))</span> <span class="highlight-o">!=</span> <span class="highlight-o">-</span><span class="highlight-n">1</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">38</span>            <span class="highlight-c1">//5.使用网络字节输出流OutputStream对象中的方法write,把读取到的文件上传到服务器
</span><span class="highlight-ln">39</span><span class="highlight-c1"></span>            <span class="highlight-n">os</span><span class="highlight-o">.</span><span class="highlight-na">write</span><span class="highlight-o">(</span><span class="highlight-n">bytes</span><span class="highlight-o">,</span> <span class="highlight-n">0</span><span class="highlight-o">,</span> <span class="highlight-n">len</span><span class="highlight-o">);</span>
<span class="highlight-ln">40</span>        <span class="highlight-o">}</span>
<span class="highlight-ln">41</span>        <span class="highlight-n">os</span><span class="highlight-o">.</span><span class="highlight-na">flush</span><span class="highlight-o">();</span>
<span class="highlight-ln">42</span>        <span class="highlight-c1">//此处write不会向服务器传结束标记，服务器read就会处于阻塞状态，服务器就不会向客户端回写数据，客户端的read也将被堵塞
</span><span class="highlight-ln">43</span><span class="highlight-c1"></span>
<span class="highlight-ln">44</span>        <span class="highlight-cm">/*
</span><span class="highlight-ln">45</span><span class="highlight-cm">            解决:上传完文件,给服务器写一个结束标记
</span><span class="highlight-ln">46</span><span class="highlight-cm">            void shutdownOutput() 禁用此套接字的输出流。
</span><span class="highlight-ln">47</span><span class="highlight-cm">            对于 TCP 套接字，任何以前写入的数据都将被发送，并且后跟 TCP 的正常连接终止序列。
</span><span class="highlight-ln">48</span><span class="highlight-cm">         */</span>
<span class="highlight-ln">49</span>        <span class="highlight-n">socket</span><span class="highlight-o">.</span><span class="highlight-na">shutdownOutput</span><span class="highlight-o">();</span>
<span class="highlight-ln">50</span>
<span class="highlight-ln">51</span>        <span class="highlight-c1">//6.使用Socket中的方法getInputStream,获取网络字节输入流InputStream对象
</span><span class="highlight-ln">52</span><span class="highlight-c1"></span>        <span class="highlight-n">InputStream</span> <span class="highlight-n">is</span> <span class="highlight-o">=</span> <span class="highlight-n">socket</span><span class="highlight-o">.</span><span class="highlight-na">getInputStream</span><span class="highlight-o">();</span>
<span class="highlight-ln">53</span>
<span class="highlight-ln">54</span>        <span class="highlight-c1">//7.使用网络字节输入流InputStream对象中的方法read读取服务回写的数据
</span><span class="highlight-ln">55</span><span class="highlight-c1"></span>        <span class="highlight-k">while</span> <span class="highlight-o">((</span><span class="highlight-n">len</span> <span class="highlight-o">=</span> <span class="highlight-n">is</span><span class="highlight-o">.</span><span class="highlight-na">read</span><span class="highlight-o">(</span><span class="highlight-n">bytes</span><span class="highlight-o">))</span> <span class="highlight-o">!=</span> <span class="highlight-o">-</span><span class="highlight-n">1</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">56</span>            <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-k">new</span> <span class="highlight-n">String</span><span class="highlight-o">(</span><span class="highlight-n">bytes</span><span class="highlight-o">,</span> <span class="highlight-n">0</span><span class="highlight-o">,</span> <span class="highlight-n">len</span><span class="highlight-o">));</span>
<span class="highlight-ln">57</span>        <span class="highlight-o">}</span>
<span class="highlight-ln">58</span>
<span class="highlight-ln">59</span>        <span class="highlight-c1">//8.释放资源(FileInputStream,Socket)
</span><span class="highlight-ln">60</span><span class="highlight-c1"></span>        <span class="highlight-n">fis</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln">61</span>        <span class="highlight-n">socket</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln">62</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">63</span><span class="highlight-o">}</span>
</code></pre>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">package</span> <span class="highlight-nn">package1</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.File</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.FileOutputStream</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 5</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.IOException</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 6</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.InputStream</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 7</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.net.ServerSocket</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 8</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.net.Socket</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 9</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.util.Random</span><span class="highlight-o">;</span>
<span class="highlight-ln">10</span>
<span class="highlight-ln">11</span><span class="highlight-cm">/*
</span><span class="highlight-ln">12</span><span class="highlight-cm">    文件上传案例服务器端:读取客户端上传的文件,保存到服务器的硬盘,给客户端回写"上传成功"
</span><span class="highlight-ln">13</span><span class="highlight-cm">
</span><span class="highlight-ln">14</span><span class="highlight-cm">    明确:
</span><span class="highlight-ln">15</span><span class="highlight-cm">        数据源:客户端上传的文件
</span><span class="highlight-ln">16</span><span class="highlight-cm">        目的地:服务器的硬盘 d:\\upload\\1.jpg
</span><span class="highlight-ln">17</span><span class="highlight-cm">
</span><span class="highlight-ln">18</span><span class="highlight-cm">    实现步骤:
</span><span class="highlight-ln">19</span><span class="highlight-cm">        1.创建一个服务器ServerSocket对象,和系统要指定的端口号
</span><span class="highlight-ln">20</span><span class="highlight-cm">        2.使用ServerSocket对象中的方法accept,获取到请求的客户端Socket对象
</span><span class="highlight-ln">21</span><span class="highlight-cm">        3.使用Socket对象中的方法getInputStream,获取到网络字节输入流InputStream对象
</span><span class="highlight-ln">22</span><span class="highlight-cm">        4.判断d:\\upload文件夹是否存在,不存在则创建
</span><span class="highlight-ln">23</span><span class="highlight-cm">        5.创建一个本地字节输出流FileOutputStream对象,构造方法中绑定要输出的目的地
</span><span class="highlight-ln">24</span><span class="highlight-cm">        6.使用网络字节输入流InputStream对象中的方法read,读取客户端上传的文件
</span><span class="highlight-ln">25</span><span class="highlight-cm">        7.使用本地字节输出流FileOutputStream对象中的方法write,把读取到的文件保存到服务器的硬盘上
</span><span class="highlight-ln">26</span><span class="highlight-cm">        8.使用Socket对象中的方法getOutputStream,获取到网络字节输出流OutputStream对象
</span><span class="highlight-ln">27</span><span class="highlight-cm">        9.使用网络字节输出流OutputStream对象中的方法write,给客户端回写"上传成功"
</span><span class="highlight-ln">28</span><span class="highlight-cm">        10.释放资源(FileOutputStream,Socket,ServerSocket)
</span><span class="highlight-ln">29</span><span class="highlight-cm"> */</span>
<span class="highlight-ln">30</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">TCPServer</span> <span class="highlight-o">{</span>
<span class="highlight-ln">31</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">IOException</span> <span class="highlight-o">{</span>
<span class="highlight-ln">32</span>        <span class="highlight-c1">//1.创建一个服务器ServerSocket对象,和系统要指定的端口号
</span><span class="highlight-ln">33</span><span class="highlight-c1"></span>        <span class="highlight-n">ServerSocket</span> <span class="highlight-n">server</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">ServerSocket</span><span class="highlight-o">(</span><span class="highlight-n">8888</span><span class="highlight-o">);</span>
<span class="highlight-ln">34</span>        <span class="highlight-c1">//2.使用ServerSocket对象中的方法accept,获取到请求的客户端Socket对象
</span><span class="highlight-ln">35</span><span class="highlight-c1"></span>
<span class="highlight-ln">36</span>        <span class="highlight-cm">/*
</span><span class="highlight-ln">37</span><span class="highlight-cm">            让服务器一直处于监听状态(死循环accept方法)
</span><span class="highlight-ln">38</span><span class="highlight-cm">            有一个客户端上传文件,就保存一个文件
</span><span class="highlight-ln">39</span><span class="highlight-cm">         */</span>
<span class="highlight-ln">40</span>        <span class="highlight-k">while</span> <span class="highlight-o">(</span><span class="highlight-kc">true</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">41</span>            <span class="highlight-n">Socket</span> <span class="highlight-n">socket</span> <span class="highlight-o">=</span> <span class="highlight-n">server</span><span class="highlight-o">.</span><span class="highlight-na">accept</span><span class="highlight-o">();</span>
<span class="highlight-ln">42</span>
<span class="highlight-ln">43</span>            <span class="highlight-cm">/*
</span><span class="highlight-ln">44</span><span class="highlight-cm">                使用多线程技术,提高程序的效率
</span><span class="highlight-ln">45</span><span class="highlight-cm">                有一个客户端上传文件,就开启一个线程,完成文件的上传
</span><span class="highlight-ln">46</span><span class="highlight-cm">             */</span>
<span class="highlight-ln">47</span>            <span class="highlight-k">new</span> <span class="highlight-n">Thread</span><span class="highlight-o">(</span><span class="highlight-k">new</span> <span class="highlight-n">Runnable</span><span class="highlight-o">()</span> <span class="highlight-o">{</span>
<span class="highlight-ln">48</span>                <span class="highlight-c1">//完成文件的上传
</span><span class="highlight-ln">49</span><span class="highlight-c1"></span>                <span class="highlight-nd">@Override</span>
<span class="highlight-ln">50</span>                <span class="highlight-kd">public</span> <span class="highlight-kt">void</span> <span class="highlight-nf">run</span><span class="highlight-o">()</span> <span class="highlight-o">{</span>
<span class="highlight-ln">51</span>                    <span class="highlight-k">try</span> <span class="highlight-o">{</span>
<span class="highlight-ln">52</span>                        <span class="highlight-c1">//3.使用Socket对象中的方法getInputStream,获取到网络字节输入流InputStream对象
</span><span class="highlight-ln">53</span><span class="highlight-c1"></span>                        <span class="highlight-n">InputStream</span> <span class="highlight-n">is</span> <span class="highlight-o">=</span> <span class="highlight-n">socket</span><span class="highlight-o">.</span><span class="highlight-na">getInputStream</span><span class="highlight-o">();</span>
<span class="highlight-ln">54</span>                        <span class="highlight-c1">//4.判断d:\\upload文件夹是否存在,不存在则创建
</span><span class="highlight-ln">55</span><span class="highlight-c1"></span>                        <span class="highlight-n">File</span> <span class="highlight-n">file</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">File</span><span class="highlight-o">(</span><span class="highlight-s">"d:\\upload"</span><span class="highlight-o">);</span>
<span class="highlight-ln">56</span>                        <span class="highlight-k">if</span> <span class="highlight-o">(!</span><span class="highlight-n">file</span><span class="highlight-o">.</span><span class="highlight-na">exists</span><span class="highlight-o">())</span> <span class="highlight-o">{</span>
<span class="highlight-ln">57</span>                            <span class="highlight-n">file</span><span class="highlight-o">.</span><span class="highlight-na">mkdirs</span><span class="highlight-o">();</span>
<span class="highlight-ln">58</span>                        <span class="highlight-o">}</span>
<span class="highlight-ln">59</span>
<span class="highlight-ln">60</span>                    <span class="highlight-cm">/*
</span><span class="highlight-ln">61</span><span class="highlight-cm">                        自定义一个文件的命名规则:防止同名的文件被覆盖
</span><span class="highlight-ln">62</span><span class="highlight-cm">                        规则:域名+毫秒值+随机数
</span><span class="highlight-ln">63</span><span class="highlight-cm">                     */</span>
<span class="highlight-ln">64</span>                        <span class="highlight-n">String</span> <span class="highlight-n">fileName</span> <span class="highlight-o">=</span> <span class="highlight-s">"itcast"</span> <span class="highlight-o">+</span> <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">currentTimeMillis</span><span class="highlight-o">()</span> <span class="highlight-o">+</span> <span class="highlight-k">new</span> <span class="highlight-n">Random</span><span class="highlight-o">().</span><span class="highlight-na">nextInt</span><span class="highlight-o">(</span><span class="highlight-n">999999</span><span class="highlight-o">)</span> <span class="highlight-o">+</span> <span class="highlight-s">".jpg"</span><span class="highlight-o">;</span>
<span class="highlight-ln">65</span>
<span class="highlight-ln">66</span>                        <span class="highlight-c1">//5.创建一个本地字节输出流FileOutputStream对象,构造方法中绑定要输出的目的地
</span><span class="highlight-ln">67</span><span class="highlight-c1"></span>                        <span class="highlight-n">FileOutputStream</span> <span class="highlight-n">fos</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">FileOutputStream</span><span class="highlight-o">(</span><span class="highlight-k">new</span> <span class="highlight-n">File</span><span class="highlight-o">(</span><span class="highlight-n">file</span><span class="highlight-o">,</span> <span class="highlight-n">fileName</span><span class="highlight-o">));</span>
<span class="highlight-ln">68</span>
<span class="highlight-ln">69</span>                        <span class="highlight-c1">//6.使用网络字节输入流InputStream对象中的方法read,读取客户端上传的文件
</span><span class="highlight-ln">70</span><span class="highlight-c1"></span>                        <span class="highlight-kt">int</span> <span class="highlight-n">len</span> <span class="highlight-o">=</span> <span class="highlight-n">0</span><span class="highlight-o">;</span>
<span class="highlight-ln">71</span>                        <span class="highlight-kt">byte</span><span class="highlight-o">[]</span> <span class="highlight-n">bytes</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-kt">byte</span><span class="highlight-o">[</span><span class="highlight-n">1024</span><span class="highlight-o">];</span>
<span class="highlight-ln">72</span>                        <span class="highlight-k">while</span> <span class="highlight-o">((</span><span class="highlight-n">len</span> <span class="highlight-o">=</span> <span class="highlight-n">is</span><span class="highlight-o">.</span><span class="highlight-na">read</span><span class="highlight-o">(</span><span class="highlight-n">bytes</span><span class="highlight-o">))</span> <span class="highlight-o">!=</span> <span class="highlight-o">-</span><span class="highlight-n">1</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">73</span>                            <span class="highlight-c1">//7.使用本地字节输出流FileOutputStream对象中的方法write,把读取到的文件保存到服务器的硬盘上
</span><span class="highlight-ln">74</span><span class="highlight-c1"></span>                            <span class="highlight-n">fos</span><span class="highlight-o">.</span><span class="highlight-na">write</span><span class="highlight-o">(</span><span class="highlight-n">bytes</span><span class="highlight-o">,</span> <span class="highlight-n">0</span><span class="highlight-o">,</span> <span class="highlight-n">len</span><span class="highlight-o">);</span>
<span class="highlight-ln">75</span>                        <span class="highlight-o">}</span>
<span class="highlight-ln">76</span>                        <span class="highlight-n">fos</span><span class="highlight-o">.</span><span class="highlight-na">flush</span><span class="highlight-o">();</span>
<span class="highlight-ln">77</span>
<span class="highlight-ln">78</span>                        <span class="highlight-c1">//8.使用Socket对象中的方法getOutputStream,获取到网络字节输出流OutputStream对象
</span><span class="highlight-ln">79</span><span class="highlight-c1"></span>                        <span class="highlight-c1">//9.使用网络字节输出流OutputStream对象中的方法write,给客户端回写"上传成功"
</span><span class="highlight-ln">80</span><span class="highlight-c1"></span>                        <span class="highlight-n">socket</span><span class="highlight-o">.</span><span class="highlight-na">getOutputStream</span><span class="highlight-o">().</span><span class="highlight-na">write</span><span class="highlight-o">(</span><span class="highlight-s">"上传成功"</span><span class="highlight-o">.</span><span class="highlight-na">getBytes</span><span class="highlight-o">());</span>
<span class="highlight-ln">81</span>                        <span class="highlight-c1">//10.释放资源(FileOutputStream,Socket,ServerSocket)
</span><span class="highlight-ln">82</span><span class="highlight-c1"></span>                        <span class="highlight-n">fos</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln">83</span>                        <span class="highlight-n">socket</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln">84</span>                    <span class="highlight-o">}</span> <span class="highlight-k">catch</span> <span class="highlight-o">(</span><span class="highlight-n">IOException</span> <span class="highlight-n">e</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">85</span>                        <span class="highlight-n">e</span><span class="highlight-o">.</span><span class="highlight-na">printStackTrace</span><span class="highlight-o">();</span>
<span class="highlight-ln">86</span>                    <span class="highlight-o">}</span>
<span class="highlight-ln">87</span>                <span class="highlight-o">}</span>
<span class="highlight-ln">88</span>            <span class="highlight-o">}).</span><span class="highlight-na">start</span><span class="highlight-o">();</span>
<span class="highlight-ln">89</span>        <span class="highlight-o">}</span>
<span class="highlight-ln">90</span>        <span class="highlight-c1">//服务器就不用关闭
</span><span class="highlight-ln">91</span><span class="highlight-c1"></span>        <span class="highlight-c1">//server.close();
</span><span class="highlight-ln">92</span><span class="highlight-c1"></span>    <span class="highlight-o">}</span>
<span class="highlight-ln">93</span><span class="highlight-o">}</span>
</code></pre>
</li>
<li>
<p>模拟 B/S 服务器：<img src="https://raw.githubusercontent.com/Rainsheep/pic-bed/master/img/2020-02-14+01:40:46+05_%E6%A8%A1%E6%8B%9FBS%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%88%86%E6%9E%90.bmp" alt=""><br>
浏览器解析服务器回写的 HTML 页面，页面中如果有图片，浏览器就会单独的开启一个线程，读取服务器中的图片。</p>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">package</span> <span class="highlight-nn">package1</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.*</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.net.ServerSocket</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 5</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.net.Socket</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 6</span>
<span class="highlight-ln"> 7</span><span class="highlight-cm">/*
</span><span class="highlight-ln"> 8</span><span class="highlight-cm">    创建BS版本TCP服务器
</span><span class="highlight-ln"> 9</span><span class="highlight-cm"> */</span>
<span class="highlight-ln">10</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">TCPServer</span> <span class="highlight-o">{</span>
<span class="highlight-ln">11</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">IOException</span> <span class="highlight-o">{</span>
<span class="highlight-ln">12</span>        <span class="highlight-c1">//创建一个服务器ServerSocket,和系统要指定的端口号
</span><span class="highlight-ln">13</span><span class="highlight-c1"></span>        <span class="highlight-n">ServerSocket</span> <span class="highlight-n">server</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">ServerSocket</span><span class="highlight-o">(</span><span class="highlight-n">8080</span><span class="highlight-o">);</span>
<span class="highlight-ln">14</span>
<span class="highlight-ln">15</span>        <span class="highlight-cm">/*
</span><span class="highlight-ln">16</span><span class="highlight-cm">            浏览器解析服务器回写的html页面,页面中如果有图片,那么浏览器就会单独的开启一个线程,读取服务器的图片
</span><span class="highlight-ln">17</span><span class="highlight-cm">            我们就的让服务器一直处于监听状态,客户端请求一次,服务器就回写一次
</span><span class="highlight-ln">18</span><span class="highlight-cm">         */</span>
<span class="highlight-ln">19</span>        <span class="highlight-k">while</span> <span class="highlight-o">(</span><span class="highlight-kc">true</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">20</span>            <span class="highlight-c1">//使用accept方法获取到请求的客户端对象(浏览器)
</span><span class="highlight-ln">21</span><span class="highlight-c1"></span>            <span class="highlight-n">Socket</span> <span class="highlight-n">socket</span> <span class="highlight-o">=</span> <span class="highlight-n">server</span><span class="highlight-o">.</span><span class="highlight-na">accept</span><span class="highlight-o">();</span>
<span class="highlight-ln">22</span>
<span class="highlight-ln">23</span>            <span class="highlight-k">new</span> <span class="highlight-n">Thread</span><span class="highlight-o">(</span><span class="highlight-k">new</span> <span class="highlight-n">Runnable</span><span class="highlight-o">()</span> <span class="highlight-o">{</span>
<span class="highlight-ln">24</span>                <span class="highlight-nd">@Override</span>
<span class="highlight-ln">25</span>                <span class="highlight-kd">public</span> <span class="highlight-kt">void</span> <span class="highlight-nf">run</span><span class="highlight-o">()</span> <span class="highlight-o">{</span>
<span class="highlight-ln">26</span>                    <span class="highlight-k">try</span> <span class="highlight-o">{</span>
<span class="highlight-ln">27</span>                        <span class="highlight-c1">//使用Socket对象中的方法getInputStream,获取到网络字节输入流InputStream对象
</span><span class="highlight-ln">28</span><span class="highlight-c1"></span>                        <span class="highlight-n">InputStream</span> <span class="highlight-n">is</span> <span class="highlight-o">=</span> <span class="highlight-n">socket</span><span class="highlight-o">.</span><span class="highlight-na">getInputStream</span><span class="highlight-o">();</span>
<span class="highlight-ln">29</span>                        <span class="highlight-c1">//使用网络字节输入流InputStream对象中的方法read读取客户端的请求信息
</span><span class="highlight-ln">30</span><span class="highlight-c1"></span>                        <span class="highlight-cm">/*byte[] bytes = new byte[1024];
</span><span class="highlight-ln">31</span><span class="highlight-cm">                        int len = 0;
</span><span class="highlight-ln">32</span><span class="highlight-cm">                        while((len = is.read(bytes))!=-1){
</span><span class="highlight-ln">33</span><span class="highlight-cm">                            System.out.println(new String(bytes,0,len));
</span><span class="highlight-ln">34</span><span class="highlight-cm">                        }*/</span>
<span class="highlight-ln">35</span>
<span class="highlight-ln">36</span>                        <span class="highlight-c1">//把is网络字节输入流对象,转换为字符缓冲输入流
</span><span class="highlight-ln">37</span><span class="highlight-c1"></span>                        <span class="highlight-n">BufferedReader</span> <span class="highlight-n">br</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">BufferedReader</span><span class="highlight-o">(</span><span class="highlight-k">new</span> <span class="highlight-n">InputStreamReader</span><span class="highlight-o">(</span><span class="highlight-n">is</span><span class="highlight-o">));</span>
<span class="highlight-ln">38</span>                        <span class="highlight-c1">//把客户端请求信息的第一行读取出来 GET /11_Net/web/index.html HTTP/1.1
</span><span class="highlight-ln">39</span><span class="highlight-c1"></span>                        <span class="highlight-n">String</span> <span class="highlight-n">line</span> <span class="highlight-o">=</span> <span class="highlight-n">br</span><span class="highlight-o">.</span><span class="highlight-na">readLine</span><span class="highlight-o">();</span>
<span class="highlight-ln">40</span>                        <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">line</span><span class="highlight-o">);</span>
<span class="highlight-ln">41</span>                        <span class="highlight-c1">//把读取的信息进行切割,只要中间部分 /11_Net/web/index.html
</span><span class="highlight-ln">42</span><span class="highlight-c1"></span>                        <span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">arr</span> <span class="highlight-o">=</span> <span class="highlight-n">line</span><span class="highlight-o">.</span><span class="highlight-na">split</span><span class="highlight-o">(</span><span class="highlight-s">" "</span><span class="highlight-o">);</span>
<span class="highlight-ln">43</span>                        <span class="highlight-c1">//把路径前边的/去掉,进行截取 11_Net/web/index.html
</span><span class="highlight-ln">44</span><span class="highlight-c1"></span>                        <span class="highlight-n">String</span> <span class="highlight-n">htmlpath</span> <span class="highlight-o">=</span> <span class="highlight-n">arr</span><span class="highlight-o">[</span><span class="highlight-n">1</span><span class="highlight-o">].</span><span class="highlight-na">substring</span><span class="highlight-o">(</span><span class="highlight-n">1</span><span class="highlight-o">);</span>
<span class="highlight-ln">45</span>
<span class="highlight-ln">46</span>                        <span class="highlight-c1">//创建一个本地字节输入流,构造方法中绑定要读取的html路径
</span><span class="highlight-ln">47</span><span class="highlight-c1"></span>                        <span class="highlight-n">FileInputStream</span> <span class="highlight-n">fis</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">FileInputStream</span><span class="highlight-o">(</span><span class="highlight-n">htmlpath</span><span class="highlight-o">);</span>
<span class="highlight-ln">48</span>                        <span class="highlight-c1">//使用Socket中的方法getOutputStream获取网络字节输出流OutputStream对象
</span><span class="highlight-ln">49</span><span class="highlight-c1"></span>                        <span class="highlight-n">OutputStream</span> <span class="highlight-n">os</span> <span class="highlight-o">=</span> <span class="highlight-n">socket</span><span class="highlight-o">.</span><span class="highlight-na">getOutputStream</span><span class="highlight-o">();</span>
<span class="highlight-ln">50</span>
<span class="highlight-ln">51</span>                        <span class="highlight-c1">// 写入HTTP协议响应头,固定写法
</span><span class="highlight-ln">52</span><span class="highlight-c1"></span>                        <span class="highlight-n">os</span><span class="highlight-o">.</span><span class="highlight-na">write</span><span class="highlight-o">(</span><span class="highlight-s">"HTTP/1.1 200 OK\r\n"</span><span class="highlight-o">.</span><span class="highlight-na">getBytes</span><span class="highlight-o">());</span>
<span class="highlight-ln">53</span>                        <span class="highlight-n">os</span><span class="highlight-o">.</span><span class="highlight-na">write</span><span class="highlight-o">(</span><span class="highlight-s">"Content-Type:text/html\r\n"</span><span class="highlight-o">.</span><span class="highlight-na">getBytes</span><span class="highlight-o">());</span>
<span class="highlight-ln">54</span>                        <span class="highlight-c1">// 必须要写入空行,否则浏览器不解析
</span><span class="highlight-ln">55</span><span class="highlight-c1"></span>                        <span class="highlight-n">os</span><span class="highlight-o">.</span><span class="highlight-na">write</span><span class="highlight-o">(</span><span class="highlight-s">"\r\n"</span><span class="highlight-o">.</span><span class="highlight-na">getBytes</span><span class="highlight-o">());</span>
<span class="highlight-ln">56</span>
<span class="highlight-ln">57</span>                        <span class="highlight-c1">//一读一写复制文件,把服务读取的html文件回写到客户端
</span><span class="highlight-ln">58</span><span class="highlight-c1"></span>                        <span class="highlight-kt">int</span> <span class="highlight-n">len</span> <span class="highlight-o">=</span> <span class="highlight-n">0</span><span class="highlight-o">;</span>
<span class="highlight-ln">59</span>                        <span class="highlight-kt">byte</span><span class="highlight-o">[]</span> <span class="highlight-n">bytes</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-kt">byte</span><span class="highlight-o">[</span><span class="highlight-n">1024</span><span class="highlight-o">];</span>
<span class="highlight-ln">60</span>                        <span class="highlight-k">while</span> <span class="highlight-o">((</span><span class="highlight-n">len</span> <span class="highlight-o">=</span> <span class="highlight-n">fis</span><span class="highlight-o">.</span><span class="highlight-na">read</span><span class="highlight-o">(</span><span class="highlight-n">bytes</span><span class="highlight-o">))</span> <span class="highlight-o">!=</span> <span class="highlight-o">-</span><span class="highlight-n">1</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">61</span>                            <span class="highlight-n">os</span><span class="highlight-o">.</span><span class="highlight-na">write</span><span class="highlight-o">(</span><span class="highlight-n">bytes</span><span class="highlight-o">,</span> <span class="highlight-n">0</span><span class="highlight-o">,</span> <span class="highlight-n">len</span><span class="highlight-o">);</span>
<span class="highlight-ln">62</span>                        <span class="highlight-o">}</span>
<span class="highlight-ln">63</span>
<span class="highlight-ln">64</span>                        <span class="highlight-c1">//释放资源
</span><span class="highlight-ln">65</span><span class="highlight-c1"></span>                        <span class="highlight-n">fis</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln">66</span>                        <span class="highlight-n">socket</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln">67</span>                    <span class="highlight-o">}</span> <span class="highlight-k">catch</span> <span class="highlight-o">(</span><span class="highlight-n">IOException</span> <span class="highlight-n">e</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">68</span>                        <span class="highlight-n">e</span><span class="highlight-o">.</span><span class="highlight-na">printStackTrace</span><span class="highlight-o">();</span>
<span class="highlight-ln">69</span>                    <span class="highlight-o">}</span>
<span class="highlight-ln">70</span>                <span class="highlight-o">}</span>
<span class="highlight-ln">71</span>            <span class="highlight-o">}).</span><span class="highlight-na">start</span><span class="highlight-o">();</span>
<span class="highlight-ln">72</span>        <span class="highlight-o">}</span>
<span class="highlight-ln">73</span>        <span class="highlight-c1">//server.close();
</span><span class="highlight-ln">74</span><span class="highlight-c1"></span>    <span class="highlight-o">}</span>
<span class="highlight-ln">75</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
<h3 id="23--函数式接口-">23.【函数式接口】</h3>
<ul>
<li>
<p><code>@FunctionalInterface</code> 函数式接口注解，编译器强制检查该接口是否是函数式接口。</p>
</li>
<li>
<p>Lambda 原理和匿名内部类不同，使用 Lambda 编译后不会产生 <code>.class</code> 文件。</p>
</li>
<li>
<p>Lambda 使用前提：必须存在函数式接口；特点：延迟加载。延迟加载说明：</p>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-cm">/*
</span><span class="highlight-ln"> 2</span><span class="highlight-cm">    日志案例
</span><span class="highlight-ln"> 3</span><span class="highlight-cm">
</span><span class="highlight-ln"> 4</span><span class="highlight-cm">    发现以下代码存在的一些性能浪费的问题
</span><span class="highlight-ln"> 5</span><span class="highlight-cm">    调用showLog方法,传递的第二个参数是一个拼接后的字符串
</span><span class="highlight-ln"> 6</span><span class="highlight-cm">    先把字符串拼接好,然后在调用showLog方法
</span><span class="highlight-ln"> 7</span><span class="highlight-cm">    showLog方法中如果传递的日志等级不是1级
</span><span class="highlight-ln"> 8</span><span class="highlight-cm">    就感觉字符串就白拼接了,存在了浪费
</span><span class="highlight-ln"> 9</span><span class="highlight-cm"> */</span>
<span class="highlight-ln">10</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Demo01Logger</span> <span class="highlight-o">{</span>
<span class="highlight-ln">11</span>    <span class="highlight-c1">//定义一个根据日志的级别,显示日志信息的方法
</span><span class="highlight-ln">12</span><span class="highlight-c1"></span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">showLog</span><span class="highlight-o">(</span><span class="highlight-kt">int</span> <span class="highlight-n">level</span><span class="highlight-o">,</span> <span class="highlight-n">String</span> <span class="highlight-n">message</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">13</span>        <span class="highlight-k">if</span> <span class="highlight-o">(</span><span class="highlight-n">level</span> <span class="highlight-o">==</span> <span class="highlight-n">1</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">14</span>            <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">message</span><span class="highlight-o">);</span>
<span class="highlight-ln">15</span>        <span class="highlight-o">}</span>
<span class="highlight-ln">16</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">17</span>
<span class="highlight-ln">18</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">19</span>        <span class="highlight-c1">//定义三个日志信息
</span><span class="highlight-ln">20</span><span class="highlight-c1"></span>        <span class="highlight-n">String</span> <span class="highlight-n">msg1</span> <span class="highlight-o">=</span> <span class="highlight-s">"Hello"</span><span class="highlight-o">;</span>
<span class="highlight-ln">21</span>        <span class="highlight-n">String</span> <span class="highlight-n">msg2</span> <span class="highlight-o">=</span> <span class="highlight-s">"World"</span><span class="highlight-o">;</span>
<span class="highlight-ln">22</span>        <span class="highlight-n">String</span> <span class="highlight-n">msg3</span> <span class="highlight-o">=</span> <span class="highlight-s">"Java"</span><span class="highlight-o">;</span>
<span class="highlight-ln">23</span>
<span class="highlight-ln">24</span>        <span class="highlight-c1">//调用showLog方法,传递日志级别和日志信息
</span><span class="highlight-ln">25</span><span class="highlight-c1"></span>        <span class="highlight-n">showLog</span><span class="highlight-o">(</span><span class="highlight-n">2</span><span class="highlight-o">,</span> <span class="highlight-n">msg1</span> <span class="highlight-o">+</span> <span class="highlight-n">msg2</span> <span class="highlight-o">+</span> <span class="highlight-n">msg3</span><span class="highlight-o">);</span>
<span class="highlight-ln">26</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">27</span><span class="highlight-o">}</span>
</code></pre>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-cm">/*
</span><span class="highlight-ln"> 2</span><span class="highlight-cm">    使用Lambda优化日志案例
</span><span class="highlight-ln"> 3</span><span class="highlight-cm">    Lambda的特点:延迟加载
</span><span class="highlight-ln"> 4</span><span class="highlight-cm">    Lambda的使用前提,必须存在函数式接口
</span><span class="highlight-ln"> 5</span><span class="highlight-cm"> */</span>
<span class="highlight-ln"> 6</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Demo02Lambda</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 7</span>    <span class="highlight-c1">//定义一个显示日志的方法,方法的参数传递日志的等级和MessageBuilder接口
</span><span class="highlight-ln"> 8</span><span class="highlight-c1"></span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">showLog</span><span class="highlight-o">(</span><span class="highlight-kt">int</span> <span class="highlight-n">level</span><span class="highlight-o">,</span> <span class="highlight-n">MessageBuilder</span> <span class="highlight-n">mb</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 9</span>        <span class="highlight-c1">//对日志的等级进行判断,如果是1级,则调用MessageBuilder接口中的builderMessage方法
</span><span class="highlight-ln">10</span><span class="highlight-c1"></span>        <span class="highlight-k">if</span> <span class="highlight-o">(</span><span class="highlight-n">level</span> <span class="highlight-o">==</span> <span class="highlight-n">1</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">11</span>            <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">mb</span><span class="highlight-o">.</span><span class="highlight-na">builderMessage</span><span class="highlight-o">());</span>
<span class="highlight-ln">12</span>        <span class="highlight-o">}</span>
<span class="highlight-ln">13</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">14</span>
<span class="highlight-ln">15</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">16</span>        <span class="highlight-c1">//定义三个日志信息
</span><span class="highlight-ln">17</span><span class="highlight-c1"></span>        <span class="highlight-n">String</span> <span class="highlight-n">msg1</span> <span class="highlight-o">=</span> <span class="highlight-s">"Hello"</span><span class="highlight-o">;</span>
<span class="highlight-ln">18</span>        <span class="highlight-n">String</span> <span class="highlight-n">msg2</span> <span class="highlight-o">=</span> <span class="highlight-s">"World"</span><span class="highlight-o">;</span>
<span class="highlight-ln">19</span>        <span class="highlight-n">String</span> <span class="highlight-n">msg3</span> <span class="highlight-o">=</span> <span class="highlight-s">"Java"</span><span class="highlight-o">;</span>
<span class="highlight-ln">20</span>
<span class="highlight-ln">21</span>        <span class="highlight-cm">/*
</span><span class="highlight-ln">22</span><span class="highlight-cm">            使用Lambda表达式作为参数传递,仅仅是把参数传递到showLog方法中
</span><span class="highlight-ln">23</span><span class="highlight-cm">            只有满足条件,日志的等级是1级
</span><span class="highlight-ln">24</span><span class="highlight-cm">                才会调用接口MessageBuilder中的方法builderMessage
</span><span class="highlight-ln">25</span><span class="highlight-cm">                才会进行字符串的拼接
</span><span class="highlight-ln">26</span><span class="highlight-cm">            如果条件不满足,日志的等级不是1级
</span><span class="highlight-ln">27</span><span class="highlight-cm">                那么MessageBuilder接口中的方法builderMessage也不会执行
</span><span class="highlight-ln">28</span><span class="highlight-cm">                所以拼接字符串的代码也不会执行
</span><span class="highlight-ln">29</span><span class="highlight-cm">            所以不会存在性能的浪费
</span><span class="highlight-ln">30</span><span class="highlight-cm">         */</span>
<span class="highlight-ln">31</span>        <span class="highlight-n">showLog</span><span class="highlight-o">(</span><span class="highlight-n">1</span><span class="highlight-o">,</span> <span class="highlight-o">()</span> <span class="highlight-o">-&gt;</span> <span class="highlight-o">{</span>
<span class="highlight-ln">32</span>            <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-s">"不满足条件不执行"</span><span class="highlight-o">);</span>
<span class="highlight-ln">33</span>            <span class="highlight-c1">//返回一个拼接好的字符串
</span><span class="highlight-ln">34</span><span class="highlight-c1"></span>            <span class="highlight-k">return</span> <span class="highlight-n">msg1</span> <span class="highlight-o">+</span> <span class="highlight-n">msg2</span> <span class="highlight-o">+</span> <span class="highlight-n">msg3</span><span class="highlight-o">;</span>
<span class="highlight-ln">35</span>        <span class="highlight-o">});</span>
<span class="highlight-ln">36</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">37</span><span class="highlight-o">}</span>
</code></pre>
</li>
<li>
<p>函数是接口可以作为方法的返回值类型，此时可以返回一个 Lambda 表达式。</p>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln">1</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.util.Comparator</span><span class="highlight-o">;</span>
<span class="highlight-ln">2</span>
<span class="highlight-ln">3</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln">4</span>    <span class="highlight-kd">public</span> <span class="highlight-n">Comparator</span><span class="highlight-o">&lt;</span><span class="highlight-n">String</span><span class="highlight-o">&gt;</span> <span class="highlight-nf">getComparator</span><span class="highlight-o">()</span> <span class="highlight-o">{</span>
<span class="highlight-ln">5</span>        <span class="highlight-k">return</span> <span class="highlight-o">(</span><span class="highlight-n">o1</span><span class="highlight-o">,</span> <span class="highlight-n">o2</span><span class="highlight-o">)</span> <span class="highlight-o">-&gt;</span> <span class="highlight-n">o2</span><span class="highlight-o">.</span><span class="highlight-na">length</span><span class="highlight-o">()</span> <span class="highlight-o">-</span> <span class="highlight-n">o1</span><span class="highlight-o">.</span><span class="highlight-na">length</span><span class="highlight-o">();</span>
<span class="highlight-ln">6</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">7</span><span class="highlight-o">}</span>
</code></pre>
</li>
<li>
<p>JDK 提供了丰富的函数式接口，主要在 <code>java.util.function</code> 包中。</p>
</li>
<li>
<p>函数式接口的使用方法一般都是：现有一个方法，在方法的参数中包含一个函数式接口，然后调用方法的时候，使用 Lambda 来实习这个函数式接口。</p>
</li>
<li>
<p><code>java.util.function.Supplier&lt;T&gt;</code>  被称为生产型接口，指定的泛型是什么类型，<code>get</code> 方法就会生产什么类型的数据，接口仅包含一个无参方法：</p>
<ul>
<li><code>T get()</code> 用来获取一个指定类型的对象数据。</li>
<li>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">package</span> <span class="highlight-nn">package1</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.util.function.Supplier</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span>
<span class="highlight-ln"> 5</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Demo01Supplier</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 6</span>    <span class="highlight-c1">//定义一个方法,方法的参数传递Supplier&lt;T&gt;接口,泛型执行String,get方法就会返回一个String
</span><span class="highlight-ln"> 7</span><span class="highlight-c1"></span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-n">String</span> <span class="highlight-nf">getString</span><span class="highlight-o">(</span><span class="highlight-n">Supplier</span><span class="highlight-o">&lt;</span><span class="highlight-n">String</span><span class="highlight-o">&gt;</span> <span class="highlight-n">sup</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 8</span>        <span class="highlight-k">return</span> <span class="highlight-n">sup</span><span class="highlight-o">.</span><span class="highlight-na">get</span><span class="highlight-o">();</span>
<span class="highlight-ln"> 9</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">10</span>
<span class="highlight-ln">11</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">12</span>        <span class="highlight-c1">//调用getString方法,方法的参数Supplier是一个函数式接口,所以可以传递Lambda表达式
</span><span class="highlight-ln">13</span><span class="highlight-c1"></span>        <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">getString</span><span class="highlight-o">(()</span> <span class="highlight-o">-&gt;</span> <span class="highlight-s">"胡歌"</span><span class="highlight-o">));</span>
<span class="highlight-ln">14</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">15</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
</li>
<li>
<p><code>java.util.function.Consumer&lt;T&gt;</code> 接口为消费型接口，消费一个数据。</p>
<ul>
<li><code>void accept(T t)</code> 费一个指定泛型的数据。
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.util.function.Consumer</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 4</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 5</span>        <span class="highlight-n">method</span><span class="highlight-o">(</span><span class="highlight-s">"mi"</span><span class="highlight-o">,</span> <span class="highlight-n">name</span> <span class="highlight-o">-&gt;</span> <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">name</span><span class="highlight-o">));</span>
<span class="highlight-ln"> 6</span>    <span class="highlight-o">}</span>
<span class="highlight-ln"> 7</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">method</span><span class="highlight-o">(</span><span class="highlight-n">String</span> <span class="highlight-n">name</span><span class="highlight-o">,</span> <span class="highlight-n">Consumer</span><span class="highlight-o">&lt;</span><span class="highlight-n">String</span><span class="highlight-o">&gt;</span> <span class="highlight-n">con</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 8</span>        <span class="highlight-n">con</span><span class="highlight-o">.</span><span class="highlight-na">accept</span><span class="highlight-o">(</span><span class="highlight-n">name</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 9</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">10</span><span class="highlight-o">}</span>
</code></pre>
</li>
<li><code>default Consumer&lt;T&gt; andTher(Consumer&lt;? super T&gt; after)</code> 可以把两个 Consumer 接口组合到一起，在对数据进行消费，前面的先进行消费。
<ul>
<li>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.util.function.Consumer</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Demo02AndThen</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 4</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">method</span><span class="highlight-o">(</span><span class="highlight-n">String</span> <span class="highlight-n">s</span><span class="highlight-o">,</span> <span class="highlight-n">Consumer</span><span class="highlight-o">&lt;</span><span class="highlight-n">String</span><span class="highlight-o">&gt;</span> <span class="highlight-n">con1</span><span class="highlight-o">,</span> <span class="highlight-n">Consumer</span><span class="highlight-o">&lt;</span><span class="highlight-n">String</span><span class="highlight-o">&gt;</span> <span class="highlight-n">con2</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 5</span>        <span class="highlight-c1">//使用andThen方法,把两个Consumer接口连接到一起,在消费数据
</span><span class="highlight-ln"> 6</span><span class="highlight-c1"></span>        <span class="highlight-n">con1</span><span class="highlight-o">.</span><span class="highlight-na">andThen</span><span class="highlight-o">(</span><span class="highlight-n">con2</span><span class="highlight-o">).</span><span class="highlight-na">accept</span><span class="highlight-o">(</span><span class="highlight-n">s</span><span class="highlight-o">);</span><span class="highlight-c1">//con1连接con2,先执行con1消费数据,在执行con2消费数据
</span><span class="highlight-ln"> 7</span><span class="highlight-c1"></span>        <span class="highlight-c1">//等价于下面两行
</span><span class="highlight-ln"> 8</span><span class="highlight-c1"></span>        <span class="highlight-c1">//con1.accept(s);
</span><span class="highlight-ln"> 9</span><span class="highlight-c1"></span>        <span class="highlight-c1">//con2.accept(s);
</span><span class="highlight-ln">10</span><span class="highlight-c1"></span>    <span class="highlight-o">}</span>
<span class="highlight-ln">11</span>
<span class="highlight-ln">12</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">13</span>        <span class="highlight-n">method</span><span class="highlight-o">(</span><span class="highlight-s">"Hello"</span><span class="highlight-o">,</span>
<span class="highlight-ln">14</span>                <span class="highlight-o">(</span><span class="highlight-n">t</span><span class="highlight-o">)</span> <span class="highlight-o">-&gt;</span> <span class="highlight-o">{</span>
<span class="highlight-ln">15</span>                    <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">t</span><span class="highlight-o">.</span><span class="highlight-na">toUpperCase</span><span class="highlight-o">());</span>
<span class="highlight-ln">16</span>                <span class="highlight-o">},</span>
<span class="highlight-ln">17</span>                <span class="highlight-o">(</span><span class="highlight-n">t</span><span class="highlight-o">)</span> <span class="highlight-o">-&gt;</span> <span class="highlight-o">{</span>
<span class="highlight-ln">18</span>                    <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">t</span><span class="highlight-o">.</span><span class="highlight-na">toLowerCase</span><span class="highlight-o">());</span>
<span class="highlight-ln">19</span>                <span class="highlight-o">});</span>
<span class="highlight-ln">20</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">21</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>java.util.function.Predicate&lt;T&gt;</code> 接口，对某种数据类型的数据进行判断，结果返回一个 <code>boolean</code> 值。</p>
<ul>
<li><code>boolean test(T t)</code> 用来对指定数据类型数据进行判断的方法。
<ul>
<li>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.util.function.Predicate</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 4</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">boolean</span> <span class="highlight-nf">method</span><span class="highlight-o">(</span><span class="highlight-n">String</span> <span class="highlight-n">s</span><span class="highlight-o">,</span> <span class="highlight-n">Predicate</span><span class="highlight-o">&lt;</span><span class="highlight-n">String</span><span class="highlight-o">&gt;</span> <span class="highlight-n">p</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 5</span>        <span class="highlight-k">return</span> <span class="highlight-n">p</span><span class="highlight-o">.</span><span class="highlight-na">test</span><span class="highlight-o">(</span><span class="highlight-n">s</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 6</span>    <span class="highlight-o">}</span>
<span class="highlight-ln"> 7</span>
<span class="highlight-ln"> 8</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 9</span>        <span class="highlight-kt">boolean</span> <span class="highlight-n">f</span> <span class="highlight-o">=</span> <span class="highlight-n">method</span><span class="highlight-o">(</span><span class="highlight-s">"hello"</span><span class="highlight-o">,</span> <span class="highlight-n">s</span> <span class="highlight-o">-&gt;</span> <span class="highlight-n">s</span><span class="highlight-o">.</span><span class="highlight-na">length</span><span class="highlight-o">()</span> <span class="highlight-o">&gt;</span> <span class="highlight-n">5</span><span class="highlight-o">);</span>
<span class="highlight-ln">10</span>        <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">f</span><span class="highlight-o">);</span>
<span class="highlight-ln">11</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">12</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
</li>
<li><code>default Predicate&lt;T&gt; and(Predicate&lt;? super T&gt; other)</code> 连接两个判断条件，都满足返回 <code>true</code>。
<ul>
<li>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.util.function.Predicate</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 4</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 5</span>        <span class="highlight-kt">boolean</span> <span class="highlight-n">f</span> <span class="highlight-o">=</span> <span class="highlight-n">method</span><span class="highlight-o">(</span><span class="highlight-s">"hello"</span><span class="highlight-o">,</span> <span class="highlight-n">s</span> <span class="highlight-o">-&gt;</span> <span class="highlight-n">s</span><span class="highlight-o">.</span><span class="highlight-na">length</span><span class="highlight-o">()</span> <span class="highlight-o">==</span> <span class="highlight-n">5</span><span class="highlight-o">,</span><span class="highlight-n">s</span> <span class="highlight-o">-&gt;</span> <span class="highlight-n">s</span><span class="highlight-o">.</span><span class="highlight-na">startsWith</span><span class="highlight-o">(</span><span class="highlight-s">"h"</span><span class="highlight-o">));</span>
<span class="highlight-ln"> 6</span>        <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">f</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 7</span>    <span class="highlight-o">}</span>
<span class="highlight-ln"> 8</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">boolean</span> <span class="highlight-nf">method</span><span class="highlight-o">(</span><span class="highlight-n">String</span> <span class="highlight-n">s</span><span class="highlight-o">,</span> <span class="highlight-n">Predicate</span><span class="highlight-o">&lt;</span><span class="highlight-n">String</span><span class="highlight-o">&gt;</span> <span class="highlight-n">p1</span><span class="highlight-o">,</span><span class="highlight-n">Predicate</span><span class="highlight-o">&lt;</span><span class="highlight-n">String</span><span class="highlight-o">&gt;</span> <span class="highlight-n">p2</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 9</span>        <span class="highlight-k">return</span> <span class="highlight-n">p1</span><span class="highlight-o">.</span><span class="highlight-na">and</span><span class="highlight-o">(</span><span class="highlight-n">p2</span><span class="highlight-o">).</span><span class="highlight-na">test</span><span class="highlight-o">(</span><span class="highlight-n">s</span><span class="highlight-o">);</span>
<span class="highlight-ln">10</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">11</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
</li>
<li><code>default Predicate&lt;T&gt; or(Predicate&lt;? super T&gt; other)</code>   连接两个判断条件，任何一个满足返回 <code>true</code>。</li>
<li><code>default Predicate&lt;T&gt; negate() </code> 对判定的结果取反。
<ul>
<li>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.util.function.Predicate</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 4</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 5</span>        <span class="highlight-kt">boolean</span> <span class="highlight-n">f</span> <span class="highlight-o">=</span> <span class="highlight-n">method</span><span class="highlight-o">(</span><span class="highlight-s">"hello"</span><span class="highlight-o">,</span> <span class="highlight-n">s</span> <span class="highlight-o">-&gt;</span> <span class="highlight-n">s</span><span class="highlight-o">.</span><span class="highlight-na">length</span><span class="highlight-o">()</span> <span class="highlight-o">==</span> <span class="highlight-n">5</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 6</span>        <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">f</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 7</span>    <span class="highlight-o">}</span>
<span class="highlight-ln"> 8</span>
<span class="highlight-ln"> 9</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">boolean</span> <span class="highlight-nf">method</span><span class="highlight-o">(</span><span class="highlight-n">String</span> <span class="highlight-n">s</span><span class="highlight-o">,</span> <span class="highlight-n">Predicate</span><span class="highlight-o">&lt;</span><span class="highlight-n">String</span><span class="highlight-o">&gt;</span> <span class="highlight-n">p</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">10</span>        <span class="highlight-k">return</span> <span class="highlight-n">p</span><span class="highlight-o">.</span><span class="highlight-na">negate</span><span class="highlight-o">().</span><span class="highlight-na">test</span><span class="highlight-o">(</span><span class="highlight-n">s</span><span class="highlight-o">);</span>
<span class="highlight-ln">11</span>        <span class="highlight-c1">//等效于
</span><span class="highlight-ln">12</span><span class="highlight-c1"></span>        <span class="highlight-c1">//return !p.test(s);
</span><span class="highlight-ln">13</span><span class="highlight-c1"></span>    <span class="highlight-o">}</span>
<span class="highlight-ln">14</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>java.util.function.Function&lt;T,R&gt;</code>  接口根据一个类型的数据得到另一个类型的数据。</p>
<ul>
<li><code>R apply(T t)</code> 根据类型 T 的参数获取类型 R 的结果。
<ul>
<li>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 2</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 3</span>        <span class="highlight-kt">int</span> <span class="highlight-n">ans</span> <span class="highlight-o">=</span> <span class="highlight-n">method</span><span class="highlight-o">(</span><span class="highlight-s">"123"</span><span class="highlight-o">,</span> <span class="highlight-n">s</span> <span class="highlight-o">-&gt;</span> <span class="highlight-n">Integer</span><span class="highlight-o">.</span><span class="highlight-na">parseInt</span><span class="highlight-o">(</span><span class="highlight-n">s</span><span class="highlight-o">));</span>
<span class="highlight-ln"> 4</span>        <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">ans</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 5</span>    <span class="highlight-o">}</span>
<span class="highlight-ln"> 6</span>
<span class="highlight-ln"> 7</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">int</span> <span class="highlight-nf">method</span><span class="highlight-o">(</span><span class="highlight-n">String</span> <span class="highlight-n">s</span><span class="highlight-o">,</span> <span class="highlight-n">Function</span><span class="highlight-o">&lt;</span><span class="highlight-n">String</span><span class="highlight-o">,</span><span class="highlight-n">Integer</span><span class="highlight-o">&gt;</span> <span class="highlight-n">f</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 8</span>        <span class="highlight-k">return</span> <span class="highlight-n">f</span><span class="highlight-o">.</span><span class="highlight-na">apply</span><span class="highlight-o">(</span><span class="highlight-n">s</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 9</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">10</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
</li>
<li><code>default &lt;V&gt; Function&lt;T,V&gt; andThen(Function&lt;? super R,? extends V&gt; after)</code>  用来进行组合操作，转换两次。
<ul>
<li>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.util.function.Function</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 4</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 5</span>        <span class="highlight-kt">int</span> <span class="highlight-n">ans</span> <span class="highlight-o">=</span> <span class="highlight-n">method</span><span class="highlight-o">(</span><span class="highlight-s">"123"</span><span class="highlight-o">,</span> <span class="highlight-n">s</span> <span class="highlight-o">-&gt;</span> <span class="highlight-n">Integer</span><span class="highlight-o">.</span><span class="highlight-na">parseInt</span><span class="highlight-o">(</span><span class="highlight-n">s</span><span class="highlight-o">),</span> <span class="highlight-n">integer</span> <span class="highlight-o">-&gt;</span> <span class="highlight-n">integer</span> <span class="highlight-o">+</span> <span class="highlight-n">100</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 6</span>        <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">ans</span><span class="highlight-o">);</span><span class="highlight-c1">//223
</span><span class="highlight-ln"> 7</span><span class="highlight-c1"></span>    <span class="highlight-o">}</span>
<span class="highlight-ln"> 8</span>
<span class="highlight-ln"> 9</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">int</span> <span class="highlight-nf">method</span><span class="highlight-o">(</span><span class="highlight-n">String</span> <span class="highlight-n">s</span><span class="highlight-o">,</span> <span class="highlight-n">Function</span><span class="highlight-o">&lt;</span><span class="highlight-n">String</span><span class="highlight-o">,</span> <span class="highlight-n">Integer</span><span class="highlight-o">&gt;</span> <span class="highlight-n">f1</span><span class="highlight-o">,</span> <span class="highlight-n">Function</span><span class="highlight-o">&lt;</span><span class="highlight-n">Integer</span><span class="highlight-o">,</span> <span class="highlight-n">Integer</span><span class="highlight-o">&gt;</span> <span class="highlight-n">f2</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">10</span>        <span class="highlight-k">return</span> <span class="highlight-n">f1</span><span class="highlight-o">.</span><span class="highlight-na">andThen</span><span class="highlight-o">(</span><span class="highlight-n">f2</span><span class="highlight-o">).</span><span class="highlight-na">apply</span><span class="highlight-o">(</span><span class="highlight-n">s</span><span class="highlight-o">);</span>
<span class="highlight-ln">11</span>        <span class="highlight-c1">//等效于
</span><span class="highlight-ln">12</span><span class="highlight-c1"></span>        <span class="highlight-c1">//Integer t = f1.appply(s);
</span><span class="highlight-ln">13</span><span class="highlight-c1"></span>        <span class="highlight-c1">//return f2.apply(t);
</span><span class="highlight-ln">14</span><span class="highlight-c1"></span>    <span class="highlight-o">}</span>
<span class="highlight-ln">15</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="24--Stream流-方法引用-">24.【Stream 流、方法引用】</h3>
<ul>
<li>
<p>Lambda 让我们更加专注于<strong>做什么</strong>，而不是<strong>怎么做</strong>。</p>
</li>
<li>
<p>Stream 流思想：</p>
<ul>
<li>Stream 流其实是一个集合元素的函数式模型(中间操作通过函数式接口实现)，它并不是集合，也不是数据结构，其本身并不存储任何元素(或其地址值)。</li>
<li>Stream 流是一个来自数据源的元素队列
<ul>
<li>元素是特定类型的对象，形成一个队列。 Java 中的 Stream 并不会存储元素，而是按需计算。</li>
<li>数据源(流的来源)。可以是集合、数组等。</li>
</ul>
</li>
<li>Stream 操作两个基础的特征：
<ul>
<li>Pipelining(流水线): 中间操作都会返回流对象本身(原有的 Stream 对象不变，返回新对象)。这样多个操作可以串联成一个管道， 如同流式风格。这样做可以对操作进行优化，比如<strong>延迟执行</strong>和短路。</li>
<li>内部迭代： 以前对集合遍历都是通过 <code>Iterator</code> 或者增强 for 的方式，显式的在集合外部进行迭代， 这叫做外部迭代。 Stream 提供了内部迭代的方式，流可以直接调用遍历方法。</li>
</ul>
</li>
<li>Stream 流并不会修改数据源。</li>
<li>Stream 是延迟执行的，中间操作只是暂时保留，不会执行，遇到终止操作，才会执行，延迟执行来自于 Lambda 。</li>
<li>Stream 流对象只可以使用一次。</li>
</ul>
</li>
<li>
<p><code>java.util.stream.Stream&lt;T&gt;</code> 是 JDK8 新加入的接口，并非函数式接口。</p>
<ul>
<li><code>IntStream mapToInt(ToIntFunction&lt;? super T&gt; mapper)</code> 返回一个 <code>IntStream</code>，其中包含将给定函数应用于此流的元素的结果。例如：<code>mapToInt(Integer::intValue)</code>。</li>
</ul>
</li>
<li>
<p><code>java.util.stream.IntStream</code> 这是 <code>int</code> 原始专业 <code>Stream</code>，适用于 <code>int</code> ，<code>Stream</code> 只适用于对象 。</p>
<ul>
<li><code>Stream&lt;Integer&gt; boxed()</code> 返回一个 <code>Integer</code>   组成的 <code>Stream</code>。</li>
</ul>
</li>
<li>
<p><code>IntStream</code> 和 <code>Stream</code> 没有继承关系，有共同父类。</p>
</li>
<li>
<p>Stream 流的获取方式：</p>
<ul>
<li><code>Collection</code> 集合：<code>default Stream&lt;E&gt; stream()</code> 获取。</li>
<li><code>Object</code> 数组：Stream 接口中静态方法 <code>static &lt;T&gt; Stream&lt;T&gt; of(T... values)</code> ，获取流，参数可传递数组。</li>
<li>基本类型数组：<code>static IntStream Arrays.stream(arr)</code>，不能使用 <code>Stream.of(T... values)</code> 获取，后者只适用于对象，整个数组会被当做一个对象，而前者返回 <code>IntStream</code> 适用于 <code>int</code> 类型。</li>
</ul>
</li>
<li>
<p>Stream 流中的方法分为：</p>
<ul>
<li>延迟方法：返回值类型仍是 Stream 接口自身类型的方法，因此支持链式调用。</li>
<li>终结方法：返回值类型不再是 Stream 接口自身类型的方法，因此不再支持链式调用，终结方法使用以后，就不能继续调用 Stream 流中别的方法，常见的有 <code>count()</code> 和 <code>forEach()</code> 方法。</li>
</ul>
</li>
<li>
<p>Stream 流中的常用方法：</p>
<ul>
<li>
<p><code>Stream&lt;T&gt; filter(Predicate&lt;? super T&gt; predicate)</code> 用于对 Stream 流中的数据进行过滤。</p>
</li>
<li>
<p><code>Stream&lt;R&gt; map(Function&lt;? super T, ? extends R&gt; mapper)</code> 该接口需要一个 <code>Function</code> 函数式接口参数，可以将当前流中的 T 类型数据转换为另一种 R 类型的流。</p>
</li>
<li>
<p><code>long count()</code> 是一个终结方法，用于统计 Stream 流中元素的个数。</p>
</li>
<li>
<p><code>Stream&lt;T&gt; limit(long maxSize)</code> 对流进行截取，只取用前 n 个。</p>
</li>
<li>
<p><code>Stream&lt;T&gt; skip(long n)</code> 用于跳过元素，如果流的当前长度大于 n，则跳过前 n 个，否则将会得到一个长度为 0 的空流。</p>
</li>
<li>
<p><code>Stream&lt;T&gt; sorted()</code> 返回由此流的元素组成的流，根据自然顺序排序。</p>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln">1</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.util.stream.Stream</span><span class="highlight-o">;</span>
<span class="highlight-ln">2</span>
<span class="highlight-ln">3</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln">4</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">5</span>        <span class="highlight-n">Stream</span><span class="highlight-o">&lt;</span><span class="highlight-n">Integer</span><span class="highlight-o">&gt;</span> <span class="highlight-n">stream</span> <span class="highlight-o">=</span> <span class="highlight-n">Stream</span><span class="highlight-o">.</span><span class="highlight-na">of</span><span class="highlight-o">(</span><span class="highlight-n">1</span><span class="highlight-o">,</span> <span class="highlight-o">-</span><span class="highlight-n">2</span><span class="highlight-o">,</span> <span class="highlight-o">-</span><span class="highlight-n">3</span><span class="highlight-o">,</span> <span class="highlight-n">4</span><span class="highlight-o">,</span> <span class="highlight-o">-</span><span class="highlight-n">5</span><span class="highlight-o">);</span>
<span class="highlight-ln">6</span>        <span class="highlight-n">stream</span><span class="highlight-o">.</span><span class="highlight-na">sorted</span><span class="highlight-o">().</span><span class="highlight-na">forEach</span><span class="highlight-o">(</span><span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">::</span><span class="highlight-n">println</span><span class="highlight-o">);</span>
<span class="highlight-ln">7</span>        <span class="highlight-c1">//-5,-3,-2,1,4
</span><span class="highlight-ln">8</span><span class="highlight-c1"></span>    <span class="highlight-o">}</span>
<span class="highlight-ln">9</span><span class="highlight-o">}</span>
</code></pre>
</li>
<li>
<p><code>Stream&lt;T&gt; sorted(Comparator&lt;? super T&gt; comparator)</code> 返回由该流的元素组成的流，根据提供的 Comparator 进行排序。</p>
</li>
<li>
<p><code>void forEach(Consumer&lt;? super T&gt; action)</code> 该方法接收一个 <code>Consumer</code> 接口函数(消费型接口)，会将每一个流元素交给该函数进行处理。</p>
</li>
<li>
<p><code>static &lt;T&gt; Stream&lt;T&gt; concat(Stream&lt;? extends T&gt; a, Stream&lt;? extends T&gt; n)</code> 合并两个流，得到一个新的流。</p>
</li>
<li>
<p><code>Object[] toArray() </code> 返回一个包含此流的元素的数组。</p>
</li>
<li>
<p><code>&lt;A&gt; A[] toArray(IntFunction&lt;A[]&gt; generator)</code>  变为数组，例如：<code>toArray(String[]::new)</code>。</p>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln">1</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.util.stream.Stream</span><span class="highlight-o">;</span>
<span class="highlight-ln">2</span>
<span class="highlight-ln">3</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln">4</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">5</span>        <span class="highlight-n">Stream</span><span class="highlight-o">&lt;</span><span class="highlight-n">Integer</span><span class="highlight-o">&gt;</span> <span class="highlight-n">stream</span> <span class="highlight-o">=</span> <span class="highlight-n">Stream</span><span class="highlight-o">.</span><span class="highlight-na">of</span><span class="highlight-o">(</span><span class="highlight-n">1</span><span class="highlight-o">,</span> <span class="highlight-o">-</span><span class="highlight-n">2</span><span class="highlight-o">,</span> <span class="highlight-o">-</span><span class="highlight-n">3</span><span class="highlight-o">,</span> <span class="highlight-n">4</span><span class="highlight-o">,</span> <span class="highlight-o">-</span><span class="highlight-n">5</span><span class="highlight-o">);</span>
<span class="highlight-ln">6</span>        <span class="highlight-n">Integer</span><span class="highlight-o">[]</span> <span class="highlight-n">integers</span> <span class="highlight-o">=</span> <span class="highlight-n">stream</span><span class="highlight-o">.</span><span class="highlight-na">toArray</span><span class="highlight-o">(</span><span class="highlight-n">Integer</span><span class="highlight-o">[]::</span><span class="highlight-k">new</span><span class="highlight-o">);</span>
<span class="highlight-ln">7</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">8</span><span class="highlight-o">}</span>
</code></pre>
</li>
<li>
<p><code>&lt;R,A&gt; R collect(Collector&lt;? super T,A,R&gt; collector)  </code>: 通过此方法，可以将流转变为集合。</p>
<ul>
<li>
<p>此类中的参数 <code>Collector</code> 为 <code>java.util.stream</code> 包下面的。</p>
</li>
<li>
<p>R 返回值即为要得到的集合，可以是 <code>List</code>、<code>Map</code>、<code>Set</code> 等。</p>
</li>
<li>
<p>参数 <code>Collector</code> 可通过 <code>java.util.stream.Collectors</code> 中的方法获取。</p>
<ul>
<li>
<p><code>toCollection(Supplier&lt;C&gt; collectionFactory) </code> 返回一个 <code>Collector</code> ，按照遇到的顺序将输入元素累加到一个新的 <code>Collection</code> 中。</p>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.util.ArrayList</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.util.stream.Collectors</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.util.stream.Stream</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span>
<span class="highlight-ln"> 5</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 6</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">Exception</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 7</span>        <span class="highlight-n">Stream</span><span class="highlight-o">&lt;</span><span class="highlight-n">Integer</span><span class="highlight-o">&gt;</span> <span class="highlight-n">stream</span> <span class="highlight-o">=</span> <span class="highlight-n">Stream</span><span class="highlight-o">.</span><span class="highlight-na">of</span><span class="highlight-o">(</span><span class="highlight-n">1</span><span class="highlight-o">,</span> <span class="highlight-n">2</span><span class="highlight-o">,</span> <span class="highlight-n">3</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 8</span>        <span class="highlight-n">ArrayList</span><span class="highlight-o">&lt;</span><span class="highlight-n">Integer</span><span class="highlight-o">&gt;</span> <span class="highlight-n">collect</span> <span class="highlight-o">=</span> <span class="highlight-n">stream</span><span class="highlight-o">.</span><span class="highlight-na">collect</span><span class="highlight-o">(</span><span class="highlight-n">Collectors</span><span class="highlight-o">.</span><span class="highlight-na">toCollection</span><span class="highlight-o">(</span><span class="highlight-n">ArrayList</span><span class="highlight-o">::</span><span class="highlight-k">new</span><span class="highlight-o">));</span>
<span class="highlight-ln"> 9</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">10</span><span class="highlight-o">}</span>
</code></pre>
</li>
<li>
<p><code>toList() </code> 返回一个 Collector ，它将输入元素 <code>List</code> 到一个新的 <code>List</code> 。</p>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.util.List</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.util.stream.Collectors</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.util.stream.Stream</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span>
<span class="highlight-ln"> 5</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 6</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 7</span>        <span class="highlight-n">Stream</span><span class="highlight-o">&lt;</span><span class="highlight-n">Integer</span><span class="highlight-o">&gt;</span> <span class="highlight-n">stream</span> <span class="highlight-o">=</span> <span class="highlight-n">Stream</span><span class="highlight-o">.</span><span class="highlight-na">of</span><span class="highlight-o">(</span><span class="highlight-n">1</span><span class="highlight-o">,</span> <span class="highlight-o">-</span><span class="highlight-n">2</span><span class="highlight-o">,</span> <span class="highlight-o">-</span><span class="highlight-n">3</span><span class="highlight-o">,</span> <span class="highlight-n">4</span><span class="highlight-o">,</span> <span class="highlight-o">-</span><span class="highlight-n">5</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 8</span>        <span class="highlight-n">List</span><span class="highlight-o">&lt;</span><span class="highlight-n">Integer</span><span class="highlight-o">&gt;</span> <span class="highlight-n">list</span> <span class="highlight-o">=</span> <span class="highlight-n">stream</span><span class="highlight-o">.</span><span class="highlight-na">collect</span><span class="highlight-o">(</span><span class="highlight-n">Collectors</span><span class="highlight-o">.</span><span class="highlight-na">toList</span><span class="highlight-o">());</span>
<span class="highlight-ln"> 9</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">10</span><span class="highlight-o">}</span>
</code></pre>
</li>
<li>
<p><code>toSet() </code> 返回一个 Collector ，将输入元素 <code>Set</code> 到一个新的 <code>Set </code>。</p>
</li>
<li>
<p><code>toMap(Function&lt;? super T,? extends K&gt; keyMapper, Function&lt;? super T,? extends U&gt; valueMapper) </code> 返回一个 <code>Collector</code> ，它将元素累加到一个 <code>Map</code> ，其键和值是将所提供的映射函数应用于输入元素的结果。</p>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.util.Map</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.util.stream.Collectors</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.util.stream.Stream</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span>
<span class="highlight-ln"> 5</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 6</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 7</span>        <span class="highlight-n">Stream</span><span class="highlight-o">&lt;</span><span class="highlight-n">String</span><span class="highlight-o">&gt;</span> <span class="highlight-n">stream</span> <span class="highlight-o">=</span> <span class="highlight-n">Stream</span><span class="highlight-o">.</span><span class="highlight-na">of</span><span class="highlight-o">(</span><span class="highlight-s">"张三"</span><span class="highlight-o">,</span> <span class="highlight-s">"李四"</span><span class="highlight-o">,</span> <span class="highlight-s">"王五"</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 8</span>        <span class="highlight-n">Map</span><span class="highlight-o">&lt;</span><span class="highlight-n">String</span><span class="highlight-o">,</span> <span class="highlight-n">String</span><span class="highlight-o">&gt;</span> <span class="highlight-n">map</span> <span class="highlight-o">=</span> <span class="highlight-n">stream</span><span class="highlight-o">.</span><span class="highlight-na">collect</span><span class="highlight-o">(</span><span class="highlight-n">Collectors</span><span class="highlight-o">.</span><span class="highlight-na">toMap</span><span class="highlight-o">(</span><span class="highlight-n">o</span> <span class="highlight-o">-&gt;</span> <span class="highlight-n">o</span><span class="highlight-o">,</span> <span class="highlight-n">s</span> <span class="highlight-o">-&gt;</span> <span class="highlight-n">s</span> <span class="highlight-o">+</span> <span class="highlight-s">"的value"</span><span class="highlight-o">));</span>
<span class="highlight-ln"> 9</span>        <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">map</span><span class="highlight-o">);</span>
<span class="highlight-ln">10</span>        <span class="highlight-c1">//{李四=李四的value, 张三=张三的value, 王五=王五的value}
</span><span class="highlight-ln">11</span><span class="highlight-c1"></span>    <span class="highlight-o">}</span>
<span class="highlight-ln">12</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>方法引用：符号：<code>::</code> ，例如 <code>(System.out::println)</code>  ，参数类型是可推导可省略的。</p>
<ul>
<li>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln">1</span><span class="highlight-nd">@FunctionalInterface</span>
<span class="highlight-ln">2</span><span class="highlight-kd">public</span> <span class="highlight-kd">interface</span> <span class="highlight-nc">MyInterface</span> <span class="highlight-o">{</span>
<span class="highlight-ln">3</span>    <span class="highlight-kt">void</span> <span class="highlight-nf">print</span><span class="highlight-o">(</span><span class="highlight-n">String</span> <span class="highlight-n">name</span><span class="highlight-o">);</span>
<span class="highlight-ln">4</span><span class="highlight-o">}</span>
</code></pre>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln">1</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln">2</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">3</span>        <span class="highlight-n">printMethod</span><span class="highlight-o">(</span><span class="highlight-s">"hello"</span><span class="highlight-o">,</span> <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">::</span><span class="highlight-n">println</span><span class="highlight-o">);</span>
<span class="highlight-ln">4</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">5</span>
<span class="highlight-ln">6</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">printMethod</span><span class="highlight-o">(</span><span class="highlight-n">String</span> <span class="highlight-n">s</span><span class="highlight-o">,</span> <span class="highlight-n">MyInterface</span> <span class="highlight-n">p</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">7</span>        <span class="highlight-n">p</span><span class="highlight-o">.</span><span class="highlight-na">print</span><span class="highlight-o">(</span><span class="highlight-n">s</span><span class="highlight-o">);</span>
<span class="highlight-ln">8</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">9</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
</li>
<li>
<p>Lambda 中传递的参数，一定是方法引用中引用的方法可以接收的类型，否则会抛异常。</p>
</li>
<li>
<p>类的构造器的引用：<code>类名称::new</code> 。</p>
</li>
<li>
<p>数组的构造器引用：<code>T[]::new</code>。</p>
</li>
</ul>
<h3 id="25--基础加强-反射-注解-">25.【基础加强、反射、注解】</h3>
<ul>
<li>测试规范：
<ul>
<li>类名：被测试的类名 Test</li>
<li>包名：xxx.xxx.test，和要测试的包中的类平级</li>
<li>方法名：test 测试的方法名</li>
<li>返回值：void(不返回)</li>
<li>参数：空参(不调用)</li>
<li>注解：@Test</li>
</ul>
</li>
<li>Junit 中 <code>Assert.assertEquals(o1,o2)</code> 判断两个参数是否相等。o1 为期望值，o2 为要判断的值。</li>
<li>@Before 注解所有测试方法执行之前都会执行该方法，常用于资源申请。</li>
<li>@After 注解，所有测试方法执行完后，都会自动执行该方法，常用于资源释放。</li>
<li>三个阶段：<img src="https://raw.githubusercontent.com/Rainsheep/pic-bed/master/img/2020-02-16+00:54:34+Java%E4%BB%A3%E7%A0%81%E7%9A%84%E4%B8%89%E4%B8%AA%E9%98%B6%E6%AE%B5.bmp" alt="">
<ul>
<li>Java 代码在计算机中有 Source 源代码阶段、Class 类对象阶段、Runtime 运行时阶段三个阶段。</li>
<li>类加载器(ClassLoader) 将字节码文件(.class 文件) 加载进内存。</li>
<li>Class 类用来描述所有字节码文件共同的特征和行为。有三部分比较重要的东西，成员变量(封装为 Field 对象)，构造方法(封装为 Constructor 对象)，成员方法(封装为 Method 对象)，因为会有多个成员变量、构造方法、成员方法，所以用数组存储。</li>
</ul>
</li>
<li>反射：将类的各个组成部分封装为其他对象。
<ul>
<li>可以在程序运行过程中，操作这些对象(比如 IDE 的自动提示功能，就是读取了 Method[])。</li>
<li>可以解耦，提高程序的可扩展性。</li>
</ul>
</li>
<li>获取 Class 对象的三种方式(分别对应三个阶段)：
<ul>
<li><code>Class.forName("全类名")</code> 将字节码文件加载进内存，<strong>返回 Class 对象</strong>，多用于配置文件，将类名定义在配置文件中。读取文件，加载类。</li>
<li><code>类名.class</code> 通过类名的属性 <code>class</code> 获取，多用于参数的传递。</li>
<li><code>对象.getClass()</code> 此方法定义在 <code>Object</code> 类中，多用于对象的获取字节码的方式。</li>
</ul>
</li>
<li>同一个字节码文件(.class)在一次程序运行过程中，只会被加载一次，不论通过哪一种方式获取的 Class 对象都是同一个。</li>
<li>Class 对象功能：
<ul>
<li>获取成员变量
<ul>
<li><code>Field[] getFields()</code>  获取所有 <code>public</code> 修饰的成员变量。</li>
<li><code>Field getField(String name)</code> 获取指定名称的 <code>public</code> 修饰的成员变量。</li>
<li><code>Field[] getDeclaredFields()</code>  获取所有的成员变量，不考虑修饰符，反射可以在类的外面访问到类中私有的东西。</li>
<li><code>Field getDeclaredField(String name)</code></li>
<li>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">package</span> <span class="highlight-nn">package1</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.lang.reflect.Field</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span>
<span class="highlight-ln"> 5</span><span class="highlight-kd">class</span> <span class="highlight-nc">Person</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 6</span>    <span class="highlight-kd">public</span> <span class="highlight-kt">int</span> <span class="highlight-n">a</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 7</span>    <span class="highlight-kd">public</span> <span class="highlight-n">String</span> <span class="highlight-n">s</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 8</span>    <span class="highlight-kd">protected</span> <span class="highlight-n">String</span> <span class="highlight-n">b</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 9</span>    <span class="highlight-n">String</span> <span class="highlight-n">c</span><span class="highlight-o">;</span>
<span class="highlight-ln">10</span>    <span class="highlight-kd">private</span> <span class="highlight-n">String</span> <span class="highlight-n">d</span><span class="highlight-o">;</span>
<span class="highlight-ln">11</span><span class="highlight-o">}</span>
<span class="highlight-ln">12</span>
<span class="highlight-ln">13</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln">14</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">15</span>        <span class="highlight-n">Class</span><span class="highlight-o">&lt;</span><span class="highlight-n">Person</span><span class="highlight-o">&gt;</span> <span class="highlight-n">personClass</span> <span class="highlight-o">=</span> <span class="highlight-n">Person</span><span class="highlight-o">.</span><span class="highlight-na">class</span><span class="highlight-o">;</span>
<span class="highlight-ln">16</span>        <span class="highlight-k">for</span> <span class="highlight-o">(</span><span class="highlight-n">Field</span> <span class="highlight-n">field</span> <span class="highlight-o">:</span> <span class="highlight-n">personClass</span><span class="highlight-o">.</span><span class="highlight-na">getFields</span><span class="highlight-o">())</span> <span class="highlight-o">{</span>
<span class="highlight-ln">17</span>            <span class="highlight-c1">//只获取public
</span><span class="highlight-ln">18</span><span class="highlight-c1"></span>            <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">field</span><span class="highlight-o">);</span>
<span class="highlight-ln">19</span>        <span class="highlight-o">}</span>
<span class="highlight-ln">20</span>        <span class="highlight-c1">//结果
</span><span class="highlight-ln">21</span><span class="highlight-c1"></span>        <span class="highlight-c1">//public int package1.Person.a
</span><span class="highlight-ln">22</span><span class="highlight-c1"></span>        <span class="highlight-c1">//public java.lang.String package1.Person.s
</span><span class="highlight-ln">23</span><span class="highlight-c1"></span>
<span class="highlight-ln">24</span>        <span class="highlight-k">for</span> <span class="highlight-o">(</span><span class="highlight-n">Field</span> <span class="highlight-n">declaredField</span> <span class="highlight-o">:</span> <span class="highlight-n">personClass</span><span class="highlight-o">.</span><span class="highlight-na">getDeclaredFields</span><span class="highlight-o">())</span> <span class="highlight-o">{</span>
<span class="highlight-ln">25</span>            <span class="highlight-c1">//获取所有
</span><span class="highlight-ln">26</span><span class="highlight-c1"></span>            <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">declaredField</span><span class="highlight-o">);</span>
<span class="highlight-ln">27</span>        <span class="highlight-o">}</span>
<span class="highlight-ln">28</span>        <span class="highlight-c1">//public int package1.Person.a
</span><span class="highlight-ln">29</span><span class="highlight-c1"></span>        <span class="highlight-c1">//public java.lang.String package1.Person.s
</span><span class="highlight-ln">30</span><span class="highlight-c1"></span>        <span class="highlight-c1">//protected java.lang.String package1.Person.b
</span><span class="highlight-ln">31</span><span class="highlight-c1"></span>        <span class="highlight-c1">//java.lang.String package1.Person.c
</span><span class="highlight-ln">32</span><span class="highlight-c1"></span>        <span class="highlight-c1">//private java.lang.String package1.Person.d
</span><span class="highlight-ln">33</span><span class="highlight-c1"></span>    <span class="highlight-o">}</span>
<span class="highlight-ln">34</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
</li>
<li>获取构造方法
<ul>
<li><code>Constructor&lt;?&gt;[] getConstructors()</code> 获取 <code>public</code> 修饰的构造方法。</li>
<li><code>Constructor&lt;T&gt; getConstructor(Class&lt;?&gt;... parameterTypes)</code>  传入不同参数，获取参数对象的构造器，如果第二个参数为 <code>null</code> ，则按空数组处理。</li>
<li><code>Constructor&lt;T&gt; getDeclaredConstructor(Class&lt;?&gt;... parameterTypes)</code></li>
<li><code>Constructor&lt;?&gt;[] getDeclaredConstructors()</code> 获取所有构造方法。</li>
</ul>
</li>
<li>获取成员方法
<ul>
<li><code>Method[] getMethods()</code></li>
<li><code>Method getMethod(String name, Class&lt;?&gt;... parameterTypes)</code>  第一个参数为方法名，第二个参数为方法的参数的 Class 文件，用于辨别方法重载，如果第二个参数为 <code>null</code> ，则按空数组处理。</li>
<li><code>Method[] getDeclaredMethods()</code></li>
<li><code>Method getDeclaredMethod(String name, Class&lt;?&gt;... parameterTypes)</code></li>
</ul>
</li>
<li><code>String getName()</code> 获取该 Class 的全类名。</li>
<li><code>String getSimpleName()</code> 获取该 Class 的简短类名。</li>
<li><code>ClassLoader getClassLoader()</code> 获取该 Class 的类加载器。</li>
<li><code>T newInstance()</code> 调用该类的空参构造，返回该类的一个对象。</li>
</ul>
</li>
<li><code>java.lang.reflect.Field</code> 常用方法：
<ul>
<li><code>void set(Object obj, Object value)</code> 为对象的此 Field 设置值。</li>
<li><code>Object get(Object obj)</code> 获取某对象的这个 Field 的值
<ul>
<li>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">package</span> <span class="highlight-nn">package1</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.lang.reflect.Field</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span>
<span class="highlight-ln"> 5</span><span class="highlight-kd">class</span> <span class="highlight-nc">Person</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 6</span>    <span class="highlight-kd">public</span> <span class="highlight-n">String</span> <span class="highlight-n">name</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 7</span><span class="highlight-o">}</span>
<span class="highlight-ln"> 8</span>
<span class="highlight-ln"> 9</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln">10</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">Exception</span> <span class="highlight-o">{</span>
<span class="highlight-ln">11</span>        <span class="highlight-n">Class</span><span class="highlight-o">&lt;</span><span class="highlight-n">Person</span><span class="highlight-o">&gt;</span> <span class="highlight-n">personClass</span> <span class="highlight-o">=</span> <span class="highlight-n">Person</span><span class="highlight-o">.</span><span class="highlight-na">class</span><span class="highlight-o">;</span><span class="highlight-c1">//得到class对象
</span><span class="highlight-ln">12</span><span class="highlight-c1"></span>        <span class="highlight-n">Field</span> <span class="highlight-n">name</span> <span class="highlight-o">=</span> <span class="highlight-n">personClass</span><span class="highlight-o">.</span><span class="highlight-na">getField</span><span class="highlight-o">(</span><span class="highlight-s">"name"</span><span class="highlight-o">);</span><span class="highlight-c1">//得到name的Field对象
</span><span class="highlight-ln">13</span><span class="highlight-c1"></span>        <span class="highlight-n">Person</span> <span class="highlight-n">person</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">Person</span><span class="highlight-o">();</span><span class="highlight-c1">//新建对象
</span><span class="highlight-ln">14</span><span class="highlight-c1"></span>        <span class="highlight-n">name</span><span class="highlight-o">.</span><span class="highlight-na">set</span><span class="highlight-o">(</span><span class="highlight-n">person</span><span class="highlight-o">,</span> <span class="highlight-s">"test"</span><span class="highlight-o">);</span><span class="highlight-c1">//为对象person的变量name设置值
</span><span class="highlight-ln">15</span><span class="highlight-c1"></span>        <span class="highlight-n">Object</span> <span class="highlight-n">ans</span> <span class="highlight-o">=</span> <span class="highlight-n">name</span><span class="highlight-o">.</span><span class="highlight-na">get</span><span class="highlight-o">(</span><span class="highlight-n">person</span><span class="highlight-o">);</span><span class="highlight-c1">//获取person对象中变量name的值
</span><span class="highlight-ln">16</span><span class="highlight-c1"></span>        <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">ans</span><span class="highlight-o">);</span>
<span class="highlight-ln">17</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">18</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
</li>
<li><code>String getName()</code> 返回此 <code>Field</code> 对象表示的字段的名称</li>
<li><code>setAccessible(true)</code> 暴力反射，使用私有的东西的时候，需要首先用此语句忽略访问权限修饰符，否则会抛出 <code>IllegalAccessException</code> 异常。此方法是 <code>Constructor</code>, <code>Field</code>, <code>Method</code> 的父类 <code>java.lang.reflect.AccessibleObject</code> 所具有的方法，三者都可以使用。
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">package</span> <span class="highlight-nn">package1</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.lang.reflect.Field</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span>
<span class="highlight-ln"> 5</span><span class="highlight-kd">class</span> <span class="highlight-nc">Person</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 6</span>    <span class="highlight-kd">private</span> <span class="highlight-n">String</span> <span class="highlight-n">name</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 7</span>
<span class="highlight-ln"> 8</span>    <span class="highlight-kd">public</span> <span class="highlight-nf">Person</span><span class="highlight-o">(</span><span class="highlight-n">String</span> <span class="highlight-n">name</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 9</span>        <span class="highlight-k">this</span><span class="highlight-o">.</span><span class="highlight-na">name</span> <span class="highlight-o">=</span> <span class="highlight-n">name</span><span class="highlight-o">;</span>
<span class="highlight-ln">10</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">11</span><span class="highlight-o">}</span>
<span class="highlight-ln">12</span>
<span class="highlight-ln">13</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln">14</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">Exception</span> <span class="highlight-o">{</span>
<span class="highlight-ln">15</span>        <span class="highlight-n">Class</span><span class="highlight-o">&lt;</span><span class="highlight-n">Person</span><span class="highlight-o">&gt;</span> <span class="highlight-n">personClass</span> <span class="highlight-o">=</span> <span class="highlight-n">Person</span><span class="highlight-o">.</span><span class="highlight-na">class</span><span class="highlight-o">;</span><span class="highlight-c1">//得到class对象
</span><span class="highlight-ln">16</span><span class="highlight-c1"></span>        <span class="highlight-n">Field</span> <span class="highlight-n">name</span> <span class="highlight-o">=</span> <span class="highlight-n">personClass</span><span class="highlight-o">.</span><span class="highlight-na">getDeclaredField</span><span class="highlight-o">(</span><span class="highlight-s">"name"</span><span class="highlight-o">);</span><span class="highlight-c1">//得到name的Field对象
</span><span class="highlight-ln">17</span><span class="highlight-c1"></span>        <span class="highlight-n">Person</span> <span class="highlight-n">person</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">Person</span><span class="highlight-o">(</span><span class="highlight-s">"test"</span><span class="highlight-o">);</span><span class="highlight-c1">//新建对象
</span><span class="highlight-ln">18</span><span class="highlight-c1"></span>        <span class="highlight-n">name</span><span class="highlight-o">.</span><span class="highlight-na">setAccessible</span><span class="highlight-o">(</span><span class="highlight-kc">true</span><span class="highlight-o">);</span><span class="highlight-c1">//暴力反射
</span><span class="highlight-ln">19</span><span class="highlight-c1"></span>        <span class="highlight-n">Object</span> <span class="highlight-n">ans</span> <span class="highlight-o">=</span> <span class="highlight-n">name</span><span class="highlight-o">.</span><span class="highlight-na">get</span><span class="highlight-o">(</span><span class="highlight-n">person</span><span class="highlight-o">);</span>
<span class="highlight-ln">20</span>        <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">ans</span><span class="highlight-o">);</span>
<span class="highlight-ln">21</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">22</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
</li>
<li><code>java.lang.reflect.Constructor</code> 常用方法：
<ul>
<li><code>T newInstance(Object... initargs)</code>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">package</span> <span class="highlight-nn">package1</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.lang.reflect.Constructor</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span>
<span class="highlight-ln"> 5</span><span class="highlight-kd">class</span> <span class="highlight-nc">Person</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 6</span>    <span class="highlight-kd">private</span> <span class="highlight-n">String</span> <span class="highlight-n">name</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 7</span>
<span class="highlight-ln"> 8</span>    <span class="highlight-kd">public</span> <span class="highlight-nf">Person</span><span class="highlight-o">()</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 9</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">10</span>
<span class="highlight-ln">11</span>    <span class="highlight-kd">public</span> <span class="highlight-nf">Person</span><span class="highlight-o">(</span><span class="highlight-n">String</span> <span class="highlight-n">name</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">12</span>        <span class="highlight-k">this</span><span class="highlight-o">.</span><span class="highlight-na">name</span> <span class="highlight-o">=</span> <span class="highlight-n">name</span><span class="highlight-o">;</span>
<span class="highlight-ln">13</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">14</span><span class="highlight-o">}</span>
<span class="highlight-ln">15</span>
<span class="highlight-ln">16</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln">17</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">Exception</span> <span class="highlight-o">{</span>
<span class="highlight-ln">18</span>        <span class="highlight-n">Class</span><span class="highlight-o">&lt;</span><span class="highlight-n">Person</span><span class="highlight-o">&gt;</span> <span class="highlight-n">personClass</span> <span class="highlight-o">=</span> <span class="highlight-n">Person</span><span class="highlight-o">.</span><span class="highlight-na">class</span><span class="highlight-o">;</span><span class="highlight-c1">//得到class对象
</span><span class="highlight-ln">19</span><span class="highlight-c1"></span>        <span class="highlight-n">Constructor</span><span class="highlight-o">&lt;</span><span class="highlight-n">Person</span><span class="highlight-o">&gt;</span> <span class="highlight-n">constructor</span> <span class="highlight-o">=</span> <span class="highlight-n">personClass</span><span class="highlight-o">.</span><span class="highlight-na">getConstructor</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">.</span><span class="highlight-na">class</span><span class="highlight-o">);</span>
<span class="highlight-ln">20</span>        <span class="highlight-n">Person</span> <span class="highlight-n">p1</span> <span class="highlight-o">=</span> <span class="highlight-n">constructor</span><span class="highlight-o">.</span><span class="highlight-na">newInstance</span><span class="highlight-o">(</span><span class="highlight-s">"小明"</span><span class="highlight-o">);</span>
<span class="highlight-ln">21</span>
<span class="highlight-ln">22</span>        <span class="highlight-c1">//对于空参构造方法，为了化简操作，Class 提供 T newInstance()方法
</span><span class="highlight-ln">23</span><span class="highlight-c1"></span>        <span class="highlight-n">Person</span> <span class="highlight-n">p2</span> <span class="highlight-o">=</span> <span class="highlight-n">personClass</span><span class="highlight-o">.</span><span class="highlight-na">newInstance</span><span class="highlight-o">();</span>
<span class="highlight-ln">24</span>        <span class="highlight-c1">//等价于
</span><span class="highlight-ln">25</span><span class="highlight-c1"></span>        <span class="highlight-n">Person</span> <span class="highlight-n">p3</span> <span class="highlight-o">=</span> <span class="highlight-n">personClass</span><span class="highlight-o">.</span><span class="highlight-na">getConstructor</span><span class="highlight-o">().</span><span class="highlight-na">newInstance</span><span class="highlight-o">();</span>
<span class="highlight-ln">26</span>
<span class="highlight-ln">27</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">28</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
</li>
<li><code>java.lang.reflect.Method</code> 常用方法：
<ul>
<li><code>Object invoke(Object obj, Object... args)</code> 执行方法</li>
<li><code>String getName()</code> 获取方法名</li>
</ul>
</li>
<li><code>java.lang.ClassLoader</code> 常用方法
<ul>
<li><code>InputStream getResourceAsStream(String name)</code>  返回读取指定资源的输入流。</li>
</ul>
</li>
<li>获取配置文件的四种方法的区别：
<ul>
<li><code>URL XXX.class.getResource("A.properties")</code> 从 XXX 类的包路径下面查找文件。</li>
<li><code>URL XXX.class.getResource("/A.properties")</code> 从 XXX 类的根路径(classpath 路径，编译前的 src)下面查找文件。</li>
<li><code>URL XXX.class.getResourceAsStream()</code> 同理</li>
<li><code>URL XXX.class.getClassLoader().getResource("A.properties")</code> 从 XXX 类的根路径(classpath 路径，编译前的 src，ClassLoader 路径)下面查找文件，可以自己写包路径 <code>packageName/A.properties</code>。</li>
<li><code>URL XXX.class.getClassLoader().getResource("/")</code> 返回 null。</li>
<li><code>URL XXX.class.getClassLoader().getResourceAsStream()</code> 同理。</li>
</ul>
</li>
<li>框架类案例，修改配置文件，可以执行任意类的任意方法
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">package</span> <span class="highlight-nn">cn.itcast.reflect</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">cn.itcast.domain.Person</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span><span class="highlight-kn">import</span> <span class="highlight-nn">cn.itcast.domain.Student</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 5</span>
<span class="highlight-ln"> 6</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.IOException</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 7</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.InputStream</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 8</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.lang.reflect.Method</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 9</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.util.Properties</span><span class="highlight-o">;</span>
<span class="highlight-ln">10</span>
<span class="highlight-ln">11</span><span class="highlight-cm">/**
</span><span class="highlight-ln">12</span><span class="highlight-cm"> * 框架类
</span><span class="highlight-ln">13</span><span class="highlight-cm"> */</span>
<span class="highlight-ln">14</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">ReflectTest</span> <span class="highlight-o">{</span>
<span class="highlight-ln">15</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">Exception</span> <span class="highlight-o">{</span>
<span class="highlight-ln">16</span>        <span class="highlight-c1">//可以创建任意类的对象，可以执行任意方法
</span><span class="highlight-ln">17</span><span class="highlight-c1"></span>
<span class="highlight-ln">18</span>		<span class="highlight-cm">/*
</span><span class="highlight-ln">19</span><span class="highlight-cm">			配置文件：pro.properties
</span><span class="highlight-ln">20</span><span class="highlight-cm">			className=
</span><span class="highlight-ln">21</span><span class="highlight-cm">			methodName=
</span><span class="highlight-ln">22</span><span class="highlight-cm">		*/</span>
<span class="highlight-ln">23</span>
<span class="highlight-ln">24</span>        <span class="highlight-cm">/*
</span><span class="highlight-ln">25</span><span class="highlight-cm">            前提：不能改变该类的任何代码。可以创建任意类的对象，可以执行任意方法
</span><span class="highlight-ln">26</span><span class="highlight-cm">         */</span>
<span class="highlight-ln">27</span>
<span class="highlight-ln">28</span>        <span class="highlight-c1">//1.加载配置文件
</span><span class="highlight-ln">29</span><span class="highlight-c1"></span>        <span class="highlight-c1">//1.1创建Properties对象
</span><span class="highlight-ln">30</span><span class="highlight-c1"></span>        <span class="highlight-n">Properties</span> <span class="highlight-n">pro</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">Properties</span><span class="highlight-o">();</span>
<span class="highlight-ln">31</span>        <span class="highlight-c1">//1.2加载配置文件，转换为一个集合
</span><span class="highlight-ln">32</span><span class="highlight-c1"></span>        <span class="highlight-c1">//1.2.1获取class目录下的配置文件
</span><span class="highlight-ln">33</span><span class="highlight-c1"></span>        <span class="highlight-n">ClassLoader</span> <span class="highlight-n">classLoader</span> <span class="highlight-o">=</span> <span class="highlight-n">ReflectTest</span><span class="highlight-o">.</span><span class="highlight-na">class</span><span class="highlight-o">.</span><span class="highlight-na">getClassLoader</span><span class="highlight-o">();</span>
<span class="highlight-ln">34</span>        <span class="highlight-n">InputStream</span> <span class="highlight-n">is</span> <span class="highlight-o">=</span> <span class="highlight-n">classLoader</span><span class="highlight-o">.</span><span class="highlight-na">getResourceAsStream</span><span class="highlight-o">(</span><span class="highlight-s">"pro.properties"</span><span class="highlight-o">);</span>
<span class="highlight-ln">35</span>        <span class="highlight-n">pro</span><span class="highlight-o">.</span><span class="highlight-na">load</span><span class="highlight-o">(</span><span class="highlight-n">is</span><span class="highlight-o">);</span>
<span class="highlight-ln">36</span>
<span class="highlight-ln">37</span>        <span class="highlight-c1">//2.获取配置文件中定义的数据
</span><span class="highlight-ln">38</span><span class="highlight-c1"></span>        <span class="highlight-n">String</span> <span class="highlight-n">className</span> <span class="highlight-o">=</span> <span class="highlight-n">pro</span><span class="highlight-o">.</span><span class="highlight-na">getProperty</span><span class="highlight-o">(</span><span class="highlight-s">"className"</span><span class="highlight-o">);</span>
<span class="highlight-ln">39</span>        <span class="highlight-n">String</span> <span class="highlight-n">methodName</span> <span class="highlight-o">=</span> <span class="highlight-n">pro</span><span class="highlight-o">.</span><span class="highlight-na">getProperty</span><span class="highlight-o">(</span><span class="highlight-s">"methodName"</span><span class="highlight-o">);</span>
<span class="highlight-ln">40</span>
<span class="highlight-ln">41</span>
<span class="highlight-ln">42</span>        <span class="highlight-c1">//3.加载该类进内存
</span><span class="highlight-ln">43</span><span class="highlight-c1"></span>        <span class="highlight-n">Class</span> <span class="highlight-n">cls</span> <span class="highlight-o">=</span> <span class="highlight-n">Class</span><span class="highlight-o">.</span><span class="highlight-na">forName</span><span class="highlight-o">(</span><span class="highlight-n">className</span><span class="highlight-o">);</span>
<span class="highlight-ln">44</span>        <span class="highlight-c1">//4.创建对象
</span><span class="highlight-ln">45</span><span class="highlight-c1"></span>        <span class="highlight-n">Object</span> <span class="highlight-n">obj</span> <span class="highlight-o">=</span> <span class="highlight-n">cls</span><span class="highlight-o">.</span><span class="highlight-na">newInstance</span><span class="highlight-o">();</span>
<span class="highlight-ln">46</span>        <span class="highlight-c1">//5.获取方法对象
</span><span class="highlight-ln">47</span><span class="highlight-c1"></span>        <span class="highlight-n">Method</span> <span class="highlight-n">method</span> <span class="highlight-o">=</span> <span class="highlight-n">cls</span><span class="highlight-o">.</span><span class="highlight-na">getMethod</span><span class="highlight-o">(</span><span class="highlight-n">methodName</span><span class="highlight-o">);</span>
<span class="highlight-ln">48</span>        <span class="highlight-c1">//6.执行方法
</span><span class="highlight-ln">49</span><span class="highlight-c1"></span>        <span class="highlight-n">method</span><span class="highlight-o">.</span><span class="highlight-na">invoke</span><span class="highlight-o">(</span><span class="highlight-n">obj</span><span class="highlight-o">);</span>
<span class="highlight-ln">50</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">51</span><span class="highlight-o">}</span>
</code></pre>
</li>
<li>注解作用分类
<ul>
<li>编写文档</li>
<li>代码分析，使用反射</li>
<li>编译检查</li>
</ul>
</li>
<li>Java 中预定义的注解
<ul>
<li><code>@Override</code> 检测被该注解标注的方法是否继承自父类(接口)。</li>
<li><code>@Deprecated</code> 表示已经过时，仍然可以使用。</li>
<li><code>@SuppressWarnings</code> 压制警告，例如：<code>@SuppressWarnings("all")</code>。</li>
</ul>
</li>
<li><code>cmd</code> 中反编译：<code>javap -c Name.class</code>。</li>
<li>注解的格式：
<pre><code class="language-java highlight-chroma"><span class="highlight-ln">1</span><span class="highlight-n">元注解</span>
<span class="highlight-ln">2</span><span class="highlight-kd">public</span> <span class="highlight-nd">@interface</span> <span class="highlight-n">注解名称</span> <span class="highlight-o">{</span>
<span class="highlight-ln">3</span>    <span class="highlight-n">属性列表</span><span class="highlight-o">;</span>
<span class="highlight-ln">4</span><span class="highlight-o">}</span>
</code></pre>
</li>
<li>注解本质就是一个接口，默认继承 <code>java.lang.annotation.Annotation</code> 接口(所有注解都要扩展的接口)。反编译代码：
<pre><code class="language-java highlight-chroma"><span class="highlight-ln">1</span><span class="highlight-kd">public</span> <span class="highlight-kd">interface</span> <span class="highlight-nc">MyAnno</span> <span class="highlight-kd">extends</span> <span class="highlight-n">java</span><span class="highlight-o">.</span><span class="highlight-na">lang</span><span class="highlight-o">.</span><span class="highlight-na">annotation</span><span class="highlight-o">.</span><span class="highlight-na">Annotation</span> <span class="highlight-o">{</span>
<span class="highlight-ln">2</span><span class="highlight-o">}</span>
</code></pre>
</li>
<li>枚举：用 <code>enum</code> 修饰，说明该类型是一个枚举类型
<pre><code class="language-java highlight-chroma"><span class="highlight-ln">1</span><span class="highlight-kd">public</span> <span class="highlight-kd">enum</span> <span class="highlight-n">MyEnum</span> <span class="highlight-o">{</span>
<span class="highlight-ln">2</span>    <span class="highlight-n">RED</span><span class="highlight-o">,</span><span class="highlight-n">YELLOW</span><span class="highlight-o">,</span><span class="highlight-n">GREEN</span><span class="highlight-o">;</span>
<span class="highlight-ln">3</span><span class="highlight-o">}</span>
<span class="highlight-ln">4</span><span class="highlight-c1">//使用
</span><span class="highlight-ln">5</span><span class="highlight-c1">//MyEnum.RED
</span></code></pre>
</li>
<li>注解的属性：接口中的抽象方法。
<ul>
<li>属性的返回值有以下类型(不能为 <code>void</code>)：
<ul>
<li>基本数据</li>
<li>String</li>
<li>枚举</li>
<li>注解</li>
<li>以上类型的数组</li>
<li>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln">1</span><span class="highlight-kd">public</span> <span class="highlight-nd">@interface</span> <span class="highlight-n">MyAnno</span> <span class="highlight-o">{</span>
<span class="highlight-ln">2</span>    <span class="highlight-kt">int</span> <span class="highlight-nf">a</span><span class="highlight-o">();</span>
<span class="highlight-ln">3</span>    <span class="highlight-n">String</span> <span class="highlight-nf">b</span><span class="highlight-o">();</span>
<span class="highlight-ln">4</span>    <span class="highlight-n">MyEnum</span> <span class="highlight-nf">c</span><span class="highlight-o">();</span>
<span class="highlight-ln">5</span>    <span class="highlight-n">Override</span> <span class="highlight-nf">d</span><span class="highlight-o">();</span>
<span class="highlight-ln">6</span>    <span class="highlight-kt">int</span><span class="highlight-o">[]</span> <span class="highlight-nf">e</span><span class="highlight-o">();</span>
<span class="highlight-ln">7</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
</li>
<li>定义了注解的属性，在使用的时候必须给属性赋值(有默认值的话则可以不赋值)。
<ul>
<li>如果定义属性的时候，使用了 <code>default</code>  关键字给属性默认初始化，则使用注解的时候，可以不进行属性的赋值。
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-nd">@interface</span> <span class="highlight-n">MyAnno</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 2</span>    <span class="highlight-kt">int</span> <span class="highlight-nf">a</span><span class="highlight-o">();</span>
<span class="highlight-ln"> 3</span>    <span class="highlight-n">String</span> <span class="highlight-nf">b</span><span class="highlight-o">()</span> <span class="highlight-k">default</span> <span class="highlight-s">""</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span>    <span class="highlight-n">Override</span> <span class="highlight-nf">d</span><span class="highlight-o">();</span>
<span class="highlight-ln"> 5</span><span class="highlight-o">}</span>
<span class="highlight-ln"> 6</span>
<span class="highlight-ln"> 7</span><span class="highlight-nd">@MyAnno</span><span class="highlight-o">(</span><span class="highlight-n">a</span><span class="highlight-o">=</span><span class="highlight-n">5</span><span class="highlight-o">,</span><span class="highlight-n">d</span><span class="highlight-o">=</span><span class="highlight-nd">@Override</span><span class="highlight-o">)</span>
<span class="highlight-ln"> 8</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 9</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">10</span>
<span class="highlight-ln">11</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">12</span><span class="highlight-o">}</span>
</code></pre>
</li>
<li>如果只给一个属性赋值，并且属性的名称是 <code>value</code> 的话，则 <code>value</code> 可以省略，直接定义值即可。
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-nd">@interface</span> <span class="highlight-n">MyAnno</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 2</span>    <span class="highlight-n">String</span> <span class="highlight-nf">value</span><span class="highlight-o">()</span> <span class="highlight-k">default</span> <span class="highlight-s">""</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 3</span>    <span class="highlight-n">String</span> <span class="highlight-nf">a</span><span class="highlight-o">()</span> <span class="highlight-k">default</span> <span class="highlight-s">""</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span><span class="highlight-o">}</span>
<span class="highlight-ln"> 5</span>
<span class="highlight-ln"> 6</span><span class="highlight-nd">@MyAnno</span><span class="highlight-o">(</span><span class="highlight-s">"name"</span><span class="highlight-o">)</span>
<span class="highlight-ln"> 7</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 8</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 9</span>
<span class="highlight-ln">10</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">11</span><span class="highlight-o">}</span>
</code></pre>
</li>
<li>数组赋值时，值使用 <code>{}</code> 包裹，如果数组中只有一个值，则 <code>{}</code> 可以省略。
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-nd">@interface</span> <span class="highlight-n">MyAnno</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 2</span>    <span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-nf">a</span><span class="highlight-o">()</span> <span class="highlight-k">default</span> <span class="highlight-s">""</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 3</span>    <span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-nf">value</span><span class="highlight-o">()</span> <span class="highlight-k">default</span> <span class="highlight-s">""</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span><span class="highlight-o">}</span>
<span class="highlight-ln"> 5</span>
<span class="highlight-ln"> 6</span><span class="highlight-c1">//@MyAnno(a = {"aaa"})
</span><span class="highlight-ln"> 7</span><span class="highlight-c1">//@MyAnno(a = "aaa")
</span><span class="highlight-ln"> 8</span><span class="highlight-c1">//@MyAnno(value = {"aaa"})
</span><span class="highlight-ln"> 9</span><span class="highlight-c1">//@MyAnno(value = "aaa")
</span><span class="highlight-ln">10</span><span class="highlight-c1">//@MyAnno("aaa")
</span><span class="highlight-ln">11</span><span class="highlight-c1"></span><span class="highlight-nd">@MyAnno</span><span class="highlight-o">(</span><span class="highlight-n">value</span> <span class="highlight-o">=</span> <span class="highlight-s">"aaa"</span><span class="highlight-o">,</span><span class="highlight-n">a</span> <span class="highlight-o">=</span> <span class="highlight-o">{</span><span class="highlight-s">"aaa"</span><span class="highlight-o">,</span><span class="highlight-s">"bbb"</span><span class="highlight-o">})</span>
<span class="highlight-ln">12</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln">13</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">14</span>
<span class="highlight-ln">15</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">16</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
<li>元注解：用于描述注解的注解。
<ul>
<li><code>@Target</code> ：描述注解能够作用的位置。
<ul>
<li>属性 <code>ElementType[] value()</code> (枚举类型)可取值：
<ul>
<li><code>TYPE</code>：可以作用于类上</li>
<li><code>METHOD</code>：可以作用于方法上</li>
<li><code>FIELD</code>：可以作用于成员变量上</li>
<li>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln">1</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.lang.annotation.ElementType</span><span class="highlight-o">;</span>
<span class="highlight-ln">2</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.lang.annotation.Target</span><span class="highlight-o">;</span>
<span class="highlight-ln">3</span>
<span class="highlight-ln">4</span><span class="highlight-nd">@Target</span><span class="highlight-o">({</span><span class="highlight-n">ElementType</span><span class="highlight-o">.</span><span class="highlight-na">TYPE</span><span class="highlight-o">,</span><span class="highlight-n">ElementType</span><span class="highlight-o">.</span><span class="highlight-na">METHOD</span><span class="highlight-o">})</span>
<span class="highlight-ln">5</span><span class="highlight-kd">public</span> <span class="highlight-nd">@interface</span> <span class="highlight-n">MyAnno</span> <span class="highlight-o">{</span>
<span class="highlight-ln">6</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
<li><code>@Retention</code>：描述注解被保留的阶段。
<ul>
<li>属性 <code>RetentionPolicy value()</code> (枚举类型)可取值(对应 Java 代码的三个阶段)：
<ul>
<li><code>SOURCE</code>：注解仅会保留在 <code>.java</code> 文件中。</li>
<li><code>CLASS</code>：注解会保留到 <code>.class</code> 字节码文件中。</li>
<li><code>RUNTIME</code>：注解会保留到 <code>.class</code> 字节码文件中，并被 JVM 读取到，自己写的注解一般使用这个。</li>
</ul>
</li>
</ul>
</li>
<li><code>@Documented</code>：描述注解会被抽取到 API 文档中。</li>
<li><code>@Inherited</code>：描述注解会被子类继承</li>
</ul>
</li>
<li>在程序中解析注解：获取注解中定义的属性值。
<ol>
<li>
<p>获取注解定义的位置的对象(Class, Method, Field)</p>
</li>
<li>
<p>获取指定的注解</p>
<ul>
<li><code>A getAnnotation(Class&lt;A&gt; annocationClass)</code>: 其实就是在内存中生成了一个该注解接口的子类实现对象。</li>
<li><code>boolean isAnnotationPresent(Class&lt;? extends Annotation&gt; annotationClass)</code> 判断是否有指定注解。</li>
</ul>
</li>
<li>
<p>调用注解中的抽象方法获取配置属性的值。(<code>注解对象.抽象方法名</code>)</p>
</li>
<li>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">package</span> <span class="highlight-nn">package1</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">annotation.Pro</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span>
<span class="highlight-ln"> 5</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.lang.reflect.Method</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 6</span>
<span class="highlight-ln"> 7</span><span class="highlight-cm">/**
</span><span class="highlight-ln"> 8</span><span class="highlight-cm"> * 框架类
</span><span class="highlight-ln"> 9</span><span class="highlight-cm"> */</span>
<span class="highlight-ln">10</span>
<span class="highlight-ln">11</span>
<span class="highlight-ln">12</span><span class="highlight-nd">@Pro</span><span class="highlight-o">(</span><span class="highlight-n">className</span> <span class="highlight-o">=</span> <span class="highlight-s">"package1.Demo"</span><span class="highlight-o">,</span> <span class="highlight-n">methodName</span> <span class="highlight-o">=</span> <span class="highlight-s">"show"</span><span class="highlight-o">)</span>
<span class="highlight-ln">13</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">ReflectTest</span> <span class="highlight-o">{</span>
<span class="highlight-ln">14</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">Exception</span> <span class="highlight-o">{</span>
<span class="highlight-ln">15</span>
<span class="highlight-ln">16</span>        <span class="highlight-cm">/*
</span><span class="highlight-ln">17</span><span class="highlight-cm">            前提：不能改变该类的任何代码。可以创建任意类的对象，可以执行任意方法
</span><span class="highlight-ln">18</span><span class="highlight-cm">         */</span>
<span class="highlight-ln">19</span>
<span class="highlight-ln">20</span>
<span class="highlight-ln">21</span>        <span class="highlight-c1">//1.解析注解
</span><span class="highlight-ln">22</span><span class="highlight-c1"></span>        <span class="highlight-c1">//1.1获取该类的字节码文件对象
</span><span class="highlight-ln">23</span><span class="highlight-c1"></span>        <span class="highlight-n">Class</span><span class="highlight-o">&lt;</span><span class="highlight-n">ReflectTest</span><span class="highlight-o">&gt;</span> <span class="highlight-n">reflectTestClass</span> <span class="highlight-o">=</span> <span class="highlight-n">ReflectTest</span><span class="highlight-o">.</span><span class="highlight-na">class</span><span class="highlight-o">;</span>
<span class="highlight-ln">24</span>        <span class="highlight-c1">//2.获取上边的注解对象
</span><span class="highlight-ln">25</span><span class="highlight-c1"></span>        <span class="highlight-c1">//其实就是在内存中生成了一个该注解接口的子类实现对象
</span><span class="highlight-ln">26</span><span class="highlight-c1"></span>        <span class="highlight-cm">/*
</span><span class="highlight-ln">27</span><span class="highlight-cm">
</span><span class="highlight-ln">28</span><span class="highlight-cm">            public class ProImpl implements Pro{
</span><span class="highlight-ln">29</span><span class="highlight-cm">                public String className(){
</span><span class="highlight-ln">30</span><span class="highlight-cm">                    return "cn.itcast.annotation.Demo1";
</span><span class="highlight-ln">31</span><span class="highlight-cm">                }
</span><span class="highlight-ln">32</span><span class="highlight-cm">                public String methodName(){
</span><span class="highlight-ln">33</span><span class="highlight-cm">                    return "show";
</span><span class="highlight-ln">34</span><span class="highlight-cm">                }
</span><span class="highlight-ln">35</span><span class="highlight-cm">
</span><span class="highlight-ln">36</span><span class="highlight-cm">            }
</span><span class="highlight-ln">37</span><span class="highlight-cm">        */</span>
<span class="highlight-ln">38</span>
<span class="highlight-ln">39</span>        <span class="highlight-n">Pro</span> <span class="highlight-n">an</span> <span class="highlight-o">=</span> <span class="highlight-n">reflectTestClass</span><span class="highlight-o">.</span><span class="highlight-na">getAnnotation</span><span class="highlight-o">(</span><span class="highlight-n">Pro</span><span class="highlight-o">.</span><span class="highlight-na">class</span><span class="highlight-o">);</span>
<span class="highlight-ln">40</span>        <span class="highlight-c1">//3.调用注解对象中定义的抽象方法，获取返回值
</span><span class="highlight-ln">41</span><span class="highlight-c1"></span>        <span class="highlight-n">String</span> <span class="highlight-n">className</span> <span class="highlight-o">=</span> <span class="highlight-n">an</span><span class="highlight-o">.</span><span class="highlight-na">className</span><span class="highlight-o">();</span>
<span class="highlight-ln">42</span>        <span class="highlight-n">String</span> <span class="highlight-n">methodName</span> <span class="highlight-o">=</span> <span class="highlight-n">an</span><span class="highlight-o">.</span><span class="highlight-na">methodName</span><span class="highlight-o">();</span>
<span class="highlight-ln">43</span>        <span class="highlight-c1">//System.out.println(className);
</span><span class="highlight-ln">44</span><span class="highlight-c1"></span>        <span class="highlight-c1">//System.out.println(methodName);
</span><span class="highlight-ln">45</span><span class="highlight-c1"></span>
<span class="highlight-ln">46</span>
<span class="highlight-ln">47</span>        <span class="highlight-c1">//3.加载该类进内存
</span><span class="highlight-ln">48</span><span class="highlight-c1"></span>        <span class="highlight-n">Class</span> <span class="highlight-n">cls</span> <span class="highlight-o">=</span> <span class="highlight-n">Class</span><span class="highlight-o">.</span><span class="highlight-na">forName</span><span class="highlight-o">(</span><span class="highlight-n">className</span><span class="highlight-o">);</span>
<span class="highlight-ln">49</span>        <span class="highlight-c1">//4.创建对象
</span><span class="highlight-ln">50</span><span class="highlight-c1"></span>        <span class="highlight-n">Object</span> <span class="highlight-n">obj</span> <span class="highlight-o">=</span> <span class="highlight-n">cls</span><span class="highlight-o">.</span><span class="highlight-na">newInstance</span><span class="highlight-o">();</span>
<span class="highlight-ln">51</span>        <span class="highlight-c1">//5.获取方法对象
</span><span class="highlight-ln">52</span><span class="highlight-c1"></span>        <span class="highlight-n">Method</span> <span class="highlight-n">method</span> <span class="highlight-o">=</span> <span class="highlight-n">cls</span><span class="highlight-o">.</span><span class="highlight-na">getMethod</span><span class="highlight-o">(</span><span class="highlight-n">methodName</span><span class="highlight-o">);</span>
<span class="highlight-ln">53</span>        <span class="highlight-c1">//6.执行方法
</span><span class="highlight-ln">54</span><span class="highlight-c1"></span>        <span class="highlight-n">method</span><span class="highlight-o">.</span><span class="highlight-na">invoke</span><span class="highlight-o">(</span><span class="highlight-n">obj</span><span class="highlight-o">);</span>
<span class="highlight-ln">55</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">56</span><span class="highlight-o">}</span>
</code></pre>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">package</span> <span class="highlight-nn">annotation</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.lang.annotation.ElementType</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.lang.annotation.Retention</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 5</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.lang.annotation.RetentionPolicy</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 6</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.lang.annotation.Target</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 7</span>
<span class="highlight-ln"> 8</span><span class="highlight-cm">/**
</span><span class="highlight-ln"> 9</span><span class="highlight-cm"> * 描述需要执行的类名，和方法名
</span><span class="highlight-ln">10</span><span class="highlight-cm"> */</span>
<span class="highlight-ln">11</span>
<span class="highlight-ln">12</span><span class="highlight-nd">@Target</span><span class="highlight-o">({</span><span class="highlight-n">ElementType</span><span class="highlight-o">.</span><span class="highlight-na">TYPE</span><span class="highlight-o">})</span>
<span class="highlight-ln">13</span><span class="highlight-nd">@Retention</span><span class="highlight-o">(</span><span class="highlight-n">RetentionPolicy</span><span class="highlight-o">.</span><span class="highlight-na">RUNTIME</span><span class="highlight-o">)</span>
<span class="highlight-ln">14</span><span class="highlight-kd">public</span> <span class="highlight-nd">@interface</span> <span class="highlight-n">Pro</span> <span class="highlight-o">{</span>
<span class="highlight-ln">15</span>
<span class="highlight-ln">16</span>    <span class="highlight-n">String</span> <span class="highlight-nf">className</span><span class="highlight-o">();</span>
<span class="highlight-ln">17</span>
<span class="highlight-ln">18</span>    <span class="highlight-n">String</span> <span class="highlight-nf">methodName</span><span class="highlight-o">();</span>
<span class="highlight-ln">19</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ol>
</li>
<li>注解不是程序的一部分(没有注解照应运行)，可以理解为就是一个标签。</li>
<li>注解给谁用：
<ol>
<li>编译器</li>
<li>给解析程序用</li>
</ol>
</li>
<li>Java 使用反射机制调用方法的时候，捕获到的异常是 <code>java.lang.reflect.InvocationTargetException</code>  是一种包装由调用方法或构造方法所抛出异常的经过检查的异常，此异常的 <code>message</code> 为 <code>null</code> ，我们若要获取真正的异常，应当使用 <code>Throwable getCause()</code> 方法来获取真正的异常。
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">package</span> <span class="highlight-nn">package1</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.lang.reflect.Method</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span>
<span class="highlight-ln"> 5</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">TestCheck</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 6</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">NoSuchMethodException</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 7</span>        <span class="highlight-n">Calculator</span> <span class="highlight-n">c</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">Calculator</span><span class="highlight-o">();</span>
<span class="highlight-ln"> 8</span>        <span class="highlight-n">Class</span><span class="highlight-o">&lt;?</span> <span class="highlight-kd">extends</span> <span class="highlight-n">Calculator</span><span class="highlight-o">&gt;</span> <span class="highlight-n">cls</span> <span class="highlight-o">=</span> <span class="highlight-n">c</span><span class="highlight-o">.</span><span class="highlight-na">getClass</span><span class="highlight-o">();</span>
<span class="highlight-ln"> 9</span>        <span class="highlight-n">Method</span> <span class="highlight-n">add</span> <span class="highlight-o">=</span> <span class="highlight-kc">null</span><span class="highlight-o">;</span>
<span class="highlight-ln">10</span>        <span class="highlight-n">add</span> <span class="highlight-o">=</span> <span class="highlight-n">cls</span><span class="highlight-o">.</span><span class="highlight-na">getMethod</span><span class="highlight-o">(</span><span class="highlight-s">"div"</span><span class="highlight-o">);</span>
<span class="highlight-ln">11</span>
<span class="highlight-ln">12</span>        <span class="highlight-k">try</span> <span class="highlight-o">{</span>
<span class="highlight-ln">13</span>            <span class="highlight-n">add</span><span class="highlight-o">.</span><span class="highlight-na">invoke</span><span class="highlight-o">(</span><span class="highlight-n">c</span><span class="highlight-o">);</span>
<span class="highlight-ln">14</span>        <span class="highlight-o">}</span> <span class="highlight-k">catch</span> <span class="highlight-o">(</span><span class="highlight-n">Exception</span> <span class="highlight-n">e</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">15</span>            <span class="highlight-c1">//此时必须加上getCause()
</span><span class="highlight-ln">16</span><span class="highlight-c1"></span>            <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">e</span><span class="highlight-o">.</span><span class="highlight-na">getCause</span><span class="highlight-o">().</span><span class="highlight-na">getMessage</span><span class="highlight-o">());</span>
<span class="highlight-ln">17</span>        <span class="highlight-o">}</span>
<span class="highlight-ln">18</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">19</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
<h3 id="26--JDBC-">26.【JDBC】</h3>
<ul>
<li>概念：Java DataBase Connectivity ，Java 数据库连接，Java 语言操作数据库。</li>
<li>JDBC 本质：官方定义的一套操作所有关系型数据库的规则，即接口。各个数据库厂商去实现这套接口，提供数据库驱动 jar 包。我们可以使用这套接口(JDBC)编程，真正执行的代码是驱动 jar 包中的实现类。</li>
<li>JDBC 的基本使用步骤(mysql)
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">package</span> <span class="highlight-nn">package1</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.sql.Connection</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.sql.DriverManager</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 5</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.sql.Statement</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 6</span>
<span class="highlight-ln"> 7</span><span class="highlight-cm">/**
</span><span class="highlight-ln"> 8</span><span class="highlight-cm"> * JDBC快速入门
</span><span class="highlight-ln"> 9</span><span class="highlight-cm"> */</span>
<span class="highlight-ln">10</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">JdbcDemo1</span> <span class="highlight-o">{</span>
<span class="highlight-ln">11</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">Exception</span> <span class="highlight-o">{</span>
<span class="highlight-ln">12</span>        <span class="highlight-c1">//1. 导入驱动jar包
</span><span class="highlight-ln">13</span><span class="highlight-c1"></span>        <span class="highlight-c1">//2.注册驱动
</span><span class="highlight-ln">14</span><span class="highlight-c1"></span>        <span class="highlight-n">Class</span><span class="highlight-o">.</span><span class="highlight-na">forName</span><span class="highlight-o">(</span><span class="highlight-s">"com.mysql.jdbc.Driver"</span><span class="highlight-o">);</span>
<span class="highlight-ln">15</span>        <span class="highlight-c1">//3.获取数据库连接对象
</span><span class="highlight-ln">16</span><span class="highlight-c1"></span>        <span class="highlight-n">Connection</span> <span class="highlight-n">conn</span> <span class="highlight-o">=</span> <span class="highlight-n">DriverManager</span><span class="highlight-o">.</span><span class="highlight-na">getConnection</span><span class="highlight-o">(</span><span class="highlight-s">"jdbc:mysql:///db3"</span><span class="highlight-o">,</span> <span class="highlight-s">"root"</span><span class="highlight-o">,</span> <span class="highlight-s">"root"</span><span class="highlight-o">);</span>
<span class="highlight-ln">17</span>        <span class="highlight-c1">//4.定义sql语句
</span><span class="highlight-ln">18</span><span class="highlight-c1"></span>        <span class="highlight-n">String</span> <span class="highlight-n">sql</span> <span class="highlight-o">=</span> <span class="highlight-s">"update account set balance = 2000"</span><span class="highlight-o">;</span>
<span class="highlight-ln">19</span>        <span class="highlight-c1">//5.获取执行sql的对象 Statement
</span><span class="highlight-ln">20</span><span class="highlight-c1"></span>        <span class="highlight-n">Statement</span> <span class="highlight-n">stmt</span> <span class="highlight-o">=</span> <span class="highlight-n">conn</span><span class="highlight-o">.</span><span class="highlight-na">createStatement</span><span class="highlight-o">();</span>
<span class="highlight-ln">21</span>        <span class="highlight-c1">//6.执行sql
</span><span class="highlight-ln">22</span><span class="highlight-c1"></span>        <span class="highlight-kt">int</span> <span class="highlight-n">count</span> <span class="highlight-o">=</span> <span class="highlight-n">stmt</span><span class="highlight-o">.</span><span class="highlight-na">executeUpdate</span><span class="highlight-o">(</span><span class="highlight-n">sql</span><span class="highlight-o">);</span>
<span class="highlight-ln">23</span>        <span class="highlight-c1">//7.处理结果
</span><span class="highlight-ln">24</span><span class="highlight-c1"></span>        <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">count</span><span class="highlight-o">);</span>
<span class="highlight-ln">25</span>        <span class="highlight-c1">//8.释放资源
</span><span class="highlight-ln">26</span><span class="highlight-c1"></span>        <span class="highlight-n">stmt</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln">27</span>        <span class="highlight-n">conn</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln">28</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">29</span><span class="highlight-o">}</span>
</code></pre>
</li>
<li><code>java.sql.DriverManager</code> ：JDBC 驱动管理对象。
<ul>
<li>
<p><code>static void registerDriver(Driver driver)</code> 注册给定的驱动程序</p>
</li>
<li>
<p><code>Class.forName("com.mysql.jdbc.Driver")</code> 源码</p>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kd">public</span> <span class="highlight-nf">Driver</span><span class="highlight-o">()</span> <span class="highlight-kd">throws</span> <span class="highlight-n">SQLException</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 2</span><span class="highlight-o">}</span>
<span class="highlight-ln"> 3</span>
<span class="highlight-ln"> 4</span><span class="highlight-kd">static</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 5</span>    <span class="highlight-k">try</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 6</span>        <span class="highlight-n">DriverManager</span><span class="highlight-o">.</span><span class="highlight-na">registerDriver</span><span class="highlight-o">(</span><span class="highlight-k">new</span> <span class="highlight-n">Driver</span><span class="highlight-o">());</span>
<span class="highlight-ln"> 7</span>    <span class="highlight-o">}</span> <span class="highlight-k">catch</span> <span class="highlight-o">(</span><span class="highlight-n">SQLException</span> <span class="highlight-n">var1</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 8</span>        <span class="highlight-k">throw</span> <span class="highlight-k">new</span> <span class="highlight-n">RuntimeException</span><span class="highlight-o">(</span><span class="highlight-s">"Can't register driver!"</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 9</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">10</span><span class="highlight-o">}</span>
</code></pre>
<p>可见，调用了上面的方法，与上面方法的效果一样，为了方便，一般使用这种用法。<br>
注意：mysql5 之后的驱动 jar 包可以省略注册驱动的步骤</p>
</li>
<li>
<p><code>static Connection getConnection(String url, String user, String password)</code> 获取数据库连接。</p>
<ul>
<li>url 的语法：<code>协议名:子协议://IP地址:端口号/数据库名?参数1=参数2值&amp;参数2=参数2值</code>，所以一般写为 <code>jdbc:mysql://localhost:3306/数据库名</code>，如果是本地服务器和 3306 端口的话，可以简写为 <code>jdbc:mysql:///数据库名</code>。</li>
</ul>
</li>
</ul>
</li>
<li>事务：一个包含多个步骤的业务操作。如果这个业务操作被事务管理，则这个步骤要么同时成功，要么同时失败。事务操作使用 <code>Connection</code> 中方法来管理。</li>
<li><code>java.sql.Connection</code> 数据库连接对象
<ul>
<li><code>Statement createStatement()</code> 获取执行静态 SQL 语句的对象。</li>
<li><code>PreparedStatement preparedStatement(String sql)</code> 获取执行预编译 SQL 语句的对象</li>
<li><code>void setAutoCommit(boolean autocommit)</code> 参数设为 false ，开启事务，在执行 SQL 之前开启事务。</li>
<li><code>void commit()</code> 提交事务，当所有 SQL 都执行完提交事务。</li>
<li><code>void rollback()</code> 回滚事务，在 <code>catch</code> 中回滚事务。</li>
<li>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">package</span> <span class="highlight-nn">package2</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">util.JDBCUtils</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span>
<span class="highlight-ln"> 5</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.sql.Connection</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 6</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.sql.PreparedStatement</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 7</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.sql.SQLException</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 8</span>
<span class="highlight-ln"> 9</span><span class="highlight-cm">/**
</span><span class="highlight-ln">10</span><span class="highlight-cm"> * 事务操作
</span><span class="highlight-ln">11</span><span class="highlight-cm"> */</span>
<span class="highlight-ln">12</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">JDBCDemo10</span> <span class="highlight-o">{</span>
<span class="highlight-ln">13</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">14</span>        <span class="highlight-n">Connection</span> <span class="highlight-n">conn</span> <span class="highlight-o">=</span> <span class="highlight-kc">null</span><span class="highlight-o">;</span>
<span class="highlight-ln">15</span>        <span class="highlight-n">PreparedStatement</span> <span class="highlight-n">pstmt1</span> <span class="highlight-o">=</span> <span class="highlight-kc">null</span><span class="highlight-o">;</span>
<span class="highlight-ln">16</span>        <span class="highlight-n">PreparedStatement</span> <span class="highlight-n">pstmt2</span> <span class="highlight-o">=</span> <span class="highlight-kc">null</span><span class="highlight-o">;</span>
<span class="highlight-ln">17</span>
<span class="highlight-ln">18</span>        <span class="highlight-k">try</span> <span class="highlight-o">{</span>
<span class="highlight-ln">19</span>            <span class="highlight-n">conn</span> <span class="highlight-o">=</span> <span class="highlight-n">JDBCUtils</span><span class="highlight-o">.</span><span class="highlight-na">getConnection</span><span class="highlight-o">();</span>
<span class="highlight-ln">20</span>            <span class="highlight-c1">//开启事务
</span><span class="highlight-ln">21</span><span class="highlight-c1"></span>            <span class="highlight-n">conn</span><span class="highlight-o">.</span><span class="highlight-na">setAutoCommit</span><span class="highlight-o">(</span><span class="highlight-kc">false</span><span class="highlight-o">);</span>
<span class="highlight-ln">22</span>            <span class="highlight-c1">//定义sql 张三 - 500
</span><span class="highlight-ln">23</span><span class="highlight-c1"></span>            <span class="highlight-n">String</span> <span class="highlight-n">sql1</span> <span class="highlight-o">=</span> <span class="highlight-s">"update account set balance = balance - ? where id = ?"</span><span class="highlight-o">;</span>
<span class="highlight-ln">24</span>            <span class="highlight-c1">//李四 + 500
</span><span class="highlight-ln">25</span><span class="highlight-c1"></span>            <span class="highlight-n">String</span> <span class="highlight-n">sql2</span> <span class="highlight-o">=</span> <span class="highlight-s">"update account set balance = balance + ? where id = ?"</span><span class="highlight-o">;</span>
<span class="highlight-ln">26</span>            <span class="highlight-c1">//3.获取执行sql对象
</span><span class="highlight-ln">27</span><span class="highlight-c1"></span>            <span class="highlight-n">pstmt1</span> <span class="highlight-o">=</span> <span class="highlight-n">conn</span><span class="highlight-o">.</span><span class="highlight-na">prepareStatement</span><span class="highlight-o">(</span><span class="highlight-n">sql1</span><span class="highlight-o">);</span>
<span class="highlight-ln">28</span>            <span class="highlight-n">pstmt2</span> <span class="highlight-o">=</span> <span class="highlight-n">conn</span><span class="highlight-o">.</span><span class="highlight-na">prepareStatement</span><span class="highlight-o">(</span><span class="highlight-n">sql2</span><span class="highlight-o">);</span>
<span class="highlight-ln">29</span>            <span class="highlight-c1">//4. 设置参数
</span><span class="highlight-ln">30</span><span class="highlight-c1"></span>            <span class="highlight-n">pstmt1</span><span class="highlight-o">.</span><span class="highlight-na">setDouble</span><span class="highlight-o">(</span><span class="highlight-n">1</span><span class="highlight-o">,</span> <span class="highlight-n">500</span><span class="highlight-o">);</span>
<span class="highlight-ln">31</span>            <span class="highlight-n">pstmt1</span><span class="highlight-o">.</span><span class="highlight-na">setInt</span><span class="highlight-o">(</span><span class="highlight-n">2</span><span class="highlight-o">,</span> <span class="highlight-n">1</span><span class="highlight-o">);</span>
<span class="highlight-ln">32</span>            <span class="highlight-n">pstmt2</span><span class="highlight-o">.</span><span class="highlight-na">setDouble</span><span class="highlight-o">(</span><span class="highlight-n">1</span><span class="highlight-o">,</span> <span class="highlight-n">500</span><span class="highlight-o">);</span>
<span class="highlight-ln">33</span>            <span class="highlight-n">pstmt2</span><span class="highlight-o">.</span><span class="highlight-na">setInt</span><span class="highlight-o">(</span><span class="highlight-n">2</span><span class="highlight-o">,</span> <span class="highlight-n">2</span><span class="highlight-o">);</span>
<span class="highlight-ln">34</span>            <span class="highlight-c1">//5.执行sql
</span><span class="highlight-ln">35</span><span class="highlight-c1"></span>            <span class="highlight-n">pstmt1</span><span class="highlight-o">.</span><span class="highlight-na">executeUpdate</span><span class="highlight-o">();</span>
<span class="highlight-ln">36</span>            <span class="highlight-c1">// 手动制造异常
</span><span class="highlight-ln">37</span><span class="highlight-c1"></span>            <span class="highlight-kt">int</span> <span class="highlight-n">i</span> <span class="highlight-o">=</span> <span class="highlight-n">3</span> <span class="highlight-o">/</span> <span class="highlight-n">0</span><span class="highlight-o">;</span>
<span class="highlight-ln">38</span>            <span class="highlight-n">pstmt2</span><span class="highlight-o">.</span><span class="highlight-na">executeUpdate</span><span class="highlight-o">();</span>
<span class="highlight-ln">39</span>            <span class="highlight-c1">//提交事务
</span><span class="highlight-ln">40</span><span class="highlight-c1"></span>            <span class="highlight-n">conn</span><span class="highlight-o">.</span><span class="highlight-na">commit</span><span class="highlight-o">();</span>
<span class="highlight-ln">41</span>        <span class="highlight-o">}</span> <span class="highlight-k">catch</span> <span class="highlight-o">(</span><span class="highlight-n">Exception</span> <span class="highlight-n">e</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">42</span>            <span class="highlight-c1">//事务回滚
</span><span class="highlight-ln">43</span><span class="highlight-c1"></span>            <span class="highlight-k">try</span> <span class="highlight-o">{</span>
<span class="highlight-ln">44</span>                <span class="highlight-k">if</span> <span class="highlight-o">(</span><span class="highlight-n">conn</span> <span class="highlight-o">!=</span> <span class="highlight-kc">null</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">45</span>                    <span class="highlight-n">conn</span><span class="highlight-o">.</span><span class="highlight-na">rollback</span><span class="highlight-o">();</span>
<span class="highlight-ln">46</span>                <span class="highlight-o">}</span>
<span class="highlight-ln">47</span>            <span class="highlight-o">}</span> <span class="highlight-k">catch</span> <span class="highlight-o">(</span><span class="highlight-n">SQLException</span> <span class="highlight-n">e1</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">48</span>                <span class="highlight-n">e1</span><span class="highlight-o">.</span><span class="highlight-na">printStackTrace</span><span class="highlight-o">();</span>
<span class="highlight-ln">49</span>            <span class="highlight-o">}</span>
<span class="highlight-ln">50</span>            <span class="highlight-n">e</span><span class="highlight-o">.</span><span class="highlight-na">printStackTrace</span><span class="highlight-o">();</span>
<span class="highlight-ln">51</span>        <span class="highlight-o">}</span> <span class="highlight-k">finally</span> <span class="highlight-o">{</span>
<span class="highlight-ln">52</span>            <span class="highlight-n">JDBCUtils</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">(</span><span class="highlight-n">pstmt1</span><span class="highlight-o">,</span> <span class="highlight-n">conn</span><span class="highlight-o">);</span>
<span class="highlight-ln">53</span>            <span class="highlight-n">JDBCUtils</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">(</span><span class="highlight-n">pstmt2</span><span class="highlight-o">,</span> <span class="highlight-kc">null</span><span class="highlight-o">);</span>
<span class="highlight-ln">54</span>        <span class="highlight-o">}</span>
<span class="highlight-ln">55</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">56</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
</li>
<li><code>java.sql.Statement</code> 用于执行静态 SQL 语句并返回其生成的结果的对象。
<ul>
<li><code>boolean execute(String sql)</code>：执行任意 SQL 语句，结果为 ResultSet 则返回 true，不常用，了解。</li>
<li><code>int executeUpdate(String sql)</code>：执行 DML (insert、update、delete) 语句、DDL (create、alter、drop) 语句，很少使用 Java 执行 DDL 语句，返回值为影响的行数。</li>
<li><code>ResultSet executeQuery(String sql)</code>：执行 DQL (select) 语句。</li>
<li>存在 SQL 注入问题
<ul>
<li>输入密码：<code>a' or 'a' = 'a'</code>，SQL 语句就会变成 <code>select * from user where username = 'name' and password = 'a' or 'a' = 'a'</code></li>
</ul>
</li>
</ul>
</li>
<li><code>java.sql.PreparedStatement extends Statement</code>： 执行预编译 SQL 语句的对象，防止 SQL 注入，效率更高。
<ul>
<li>SQL 语句使用 <code>?</code> 作为占位符。</li>
<li><code>void setXxx(参数1, 参数2)</code> 参数 1 为 <code>?</code> 的编号(从 1 开始)，参数 2 为 <code>?</code> 的值。</li>
<li><code>PreparedStatement</code> 的 <code>executeXxxx()</code> 方法不需要传递参数，创建对象的时候已经传过 SQL 语句。</li>
</ul>
</li>
<li><code>java.sql.ResultSet</code> 结果集对象，封装查询结果。
<ul>
<li><code>boolean next()</code> 判断下一行是否有数据，有的话，返回 true 并把光标向下移动一行。</li>
<li><code>Xxx getXxx(参数)</code> 获取数据。
<ul>
<li>Xxx：代表数据类型，如 <code>int getInt(), String getString()</code></li>
<li>参数，若是 int ，代表列的编号(从 1 开始)，若是 String 代表列的名称。</li>
<li><code>getDate()</code> 返回值为 <code>java.sql.Date extends java.util.Date</code>。</li>
</ul>
</li>
</ul>
</li>
<li>Java 中资源释放顺序一般遵循，先关输出，在关输入(OutputStream、InputStream)；后开先关(Result、PrepareStatement、Connection)，先外后内(BufferedInputStream、InputStream)规则。</li>
<li>捕获异常可以这样写
<pre><code class="language-java highlight-chroma"><span class="highlight-ln">1</span><span class="highlight-k">try</span> <span class="highlight-o">{</span>
<span class="highlight-ln">2</span><span class="highlight-o">}</span> <span class="highlight-k">catch</span> <span class="highlight-o">(</span><span class="highlight-n">ClassNotFoundException</span> <span class="highlight-o">|</span> <span class="highlight-n">IOException</span> <span class="highlight-n">e</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">3</span>    <span class="highlight-n">e</span><span class="highlight-o">.</span><span class="highlight-na">printStackTrace</span><span class="highlight-o">();</span>
<span class="highlight-ln">4</span><span class="highlight-o">}</span>
</code></pre>
</li>
<li>JDBCUtils 工具类：
<pre><code class="language-java highlight-chroma"><span class="highlight-ln">  1</span><span class="highlight-kn">package</span> <span class="highlight-nn">util</span><span class="highlight-o">;</span>
<span class="highlight-ln">  2</span>
<span class="highlight-ln">  3</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.FileReader</span><span class="highlight-o">;</span>
<span class="highlight-ln">  4</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.net.URL</span><span class="highlight-o">;</span>
<span class="highlight-ln">  5</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.sql.*</span><span class="highlight-o">;</span>
<span class="highlight-ln">  6</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.util.Properties</span><span class="highlight-o">;</span>
<span class="highlight-ln">  7</span>
<span class="highlight-ln">  8</span><span class="highlight-cm">/**
</span><span class="highlight-ln">  9</span><span class="highlight-cm"> * JDBC工具类
</span><span class="highlight-ln"> 10</span><span class="highlight-cm"> */</span>
<span class="highlight-ln"> 11</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">JDBCUtils</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 12</span>    <span class="highlight-kd">private</span> <span class="highlight-kd">static</span> <span class="highlight-n">String</span> <span class="highlight-n">url</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 13</span>    <span class="highlight-kd">private</span> <span class="highlight-kd">static</span> <span class="highlight-n">String</span> <span class="highlight-n">user</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 14</span>    <span class="highlight-kd">private</span> <span class="highlight-kd">static</span> <span class="highlight-n">String</span> <span class="highlight-n">password</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 15</span>    <span class="highlight-kd">private</span> <span class="highlight-kd">static</span> <span class="highlight-n">String</span> <span class="highlight-n">driver</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 16</span>
<span class="highlight-ln"> 17</span>    <span class="highlight-cm">/**
</span><span class="highlight-ln"> 18</span><span class="highlight-cm">     * 文件的读取，只需要读取一次即可拿到这些值。使用静态代码块
</span><span class="highlight-ln"> 19</span><span class="highlight-cm">     */</span>
<span class="highlight-ln"> 20</span>    <span class="highlight-kd">static</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 21</span>        <span class="highlight-c1">//读取资源文件，获取值
</span><span class="highlight-ln"> 22</span><span class="highlight-c1"></span>
<span class="highlight-ln"> 23</span>        <span class="highlight-k">try</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 24</span>            <span class="highlight-c1">//1. 创建Properties集合类。
</span><span class="highlight-ln"> 25</span><span class="highlight-c1"></span>            <span class="highlight-n">Properties</span> <span class="highlight-n">pro</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">Properties</span><span class="highlight-o">();</span>
<span class="highlight-ln"> 26</span>
<span class="highlight-ln"> 27</span>            <span class="highlight-c1">//获取src路径下的文件的方式---&gt;ClassLoader 类加载器
</span><span class="highlight-ln"> 28</span><span class="highlight-c1"></span>            <span class="highlight-n">ClassLoader</span> <span class="highlight-n">classLoader</span> <span class="highlight-o">=</span> <span class="highlight-n">JDBCUtils</span><span class="highlight-o">.</span><span class="highlight-na">class</span><span class="highlight-o">.</span><span class="highlight-na">getClassLoader</span><span class="highlight-o">();</span>
<span class="highlight-ln"> 29</span>            <span class="highlight-n">URL</span> <span class="highlight-n">res</span> <span class="highlight-o">=</span> <span class="highlight-n">classLoader</span><span class="highlight-o">.</span><span class="highlight-na">getResource</span><span class="highlight-o">(</span><span class="highlight-s">"jdbc.properties"</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 30</span>            <span class="highlight-n">String</span> <span class="highlight-n">path</span> <span class="highlight-o">=</span> <span class="highlight-n">res</span><span class="highlight-o">.</span><span class="highlight-na">getPath</span><span class="highlight-o">();</span>
<span class="highlight-ln"> 31</span>
<span class="highlight-ln"> 32</span>            <span class="highlight-c1">//2. 加载文件
</span><span class="highlight-ln"> 33</span><span class="highlight-c1"></span>            <span class="highlight-n">pro</span><span class="highlight-o">.</span><span class="highlight-na">load</span><span class="highlight-o">(</span><span class="highlight-k">new</span> <span class="highlight-n">FileReader</span><span class="highlight-o">(</span><span class="highlight-n">path</span><span class="highlight-o">));</span>
<span class="highlight-ln"> 34</span>
<span class="highlight-ln"> 35</span>            <span class="highlight-c1">//3.获取数据，赋值
</span><span class="highlight-ln"> 36</span><span class="highlight-c1"></span>            <span class="highlight-n">url</span> <span class="highlight-o">=</span> <span class="highlight-n">pro</span><span class="highlight-o">.</span><span class="highlight-na">getProperty</span><span class="highlight-o">(</span><span class="highlight-s">"url"</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 37</span>            <span class="highlight-n">user</span> <span class="highlight-o">=</span> <span class="highlight-n">pro</span><span class="highlight-o">.</span><span class="highlight-na">getProperty</span><span class="highlight-o">(</span><span class="highlight-s">"user"</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 38</span>            <span class="highlight-n">password</span> <span class="highlight-o">=</span> <span class="highlight-n">pro</span><span class="highlight-o">.</span><span class="highlight-na">getProperty</span><span class="highlight-o">(</span><span class="highlight-s">"password"</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 39</span>            <span class="highlight-n">driver</span> <span class="highlight-o">=</span> <span class="highlight-n">pro</span><span class="highlight-o">.</span><span class="highlight-na">getProperty</span><span class="highlight-o">(</span><span class="highlight-s">"driver"</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 40</span>
<span class="highlight-ln"> 41</span>            <span class="highlight-c1">//4.注册驱动
</span><span class="highlight-ln"> 42</span><span class="highlight-c1"></span>            <span class="highlight-n">Class</span><span class="highlight-o">.</span><span class="highlight-na">forName</span><span class="highlight-o">(</span><span class="highlight-n">driver</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 43</span>        <span class="highlight-o">}</span> <span class="highlight-k">catch</span> <span class="highlight-o">(</span><span class="highlight-n">Exception</span> <span class="highlight-n">e</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 44</span>            <span class="highlight-n">e</span><span class="highlight-o">.</span><span class="highlight-na">printStackTrace</span><span class="highlight-o">();</span>
<span class="highlight-ln"> 45</span>        <span class="highlight-o">}</span>
<span class="highlight-ln"> 46</span>    <span class="highlight-o">}</span>
<span class="highlight-ln"> 47</span>
<span class="highlight-ln"> 48</span>    <span class="highlight-cm">/**
</span><span class="highlight-ln"> 49</span><span class="highlight-cm">     * 获取连接
</span><span class="highlight-ln"> 50</span><span class="highlight-cm">     *
</span><span class="highlight-ln"> 51</span><span class="highlight-cm">     * @return 连接对象
</span><span class="highlight-ln"> 52</span><span class="highlight-cm">     */</span>
<span class="highlight-ln"> 53</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-n">Connection</span> <span class="highlight-nf">getConnection</span><span class="highlight-o">()</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 54</span>        <span class="highlight-k">try</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 55</span>            <span class="highlight-k">return</span> <span class="highlight-n">DriverManager</span><span class="highlight-o">.</span><span class="highlight-na">getConnection</span><span class="highlight-o">(</span><span class="highlight-n">url</span><span class="highlight-o">,</span> <span class="highlight-n">user</span><span class="highlight-o">,</span> <span class="highlight-n">password</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 56</span>        <span class="highlight-o">}</span> <span class="highlight-k">catch</span> <span class="highlight-o">(</span><span class="highlight-n">SQLException</span> <span class="highlight-n">e</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 57</span>            <span class="highlight-n">e</span><span class="highlight-o">.</span><span class="highlight-na">printStackTrace</span><span class="highlight-o">();</span>
<span class="highlight-ln"> 58</span>        <span class="highlight-o">}</span>
<span class="highlight-ln"> 59</span>        <span class="highlight-k">return</span> <span class="highlight-kc">null</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 60</span>    <span class="highlight-o">}</span>
<span class="highlight-ln"> 61</span>
<span class="highlight-ln"> 62</span>    <span class="highlight-cm">/**
</span><span class="highlight-ln"> 63</span><span class="highlight-cm">     * @param url
</span><span class="highlight-ln"> 64</span><span class="highlight-cm">     * @param user
</span><span class="highlight-ln"> 65</span><span class="highlight-cm">     * @param password
</span><span class="highlight-ln"> 66</span><span class="highlight-cm">     * @return
</span><span class="highlight-ln"> 67</span><span class="highlight-cm">     * @throws SQLException
</span><span class="highlight-ln"> 68</span><span class="highlight-cm">     */</span>
<span class="highlight-ln"> 69</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-n">Connection</span> <span class="highlight-nf">getConnection</span><span class="highlight-o">(</span><span class="highlight-n">String</span> <span class="highlight-n">url</span><span class="highlight-o">,</span> <span class="highlight-n">String</span> <span class="highlight-n">user</span><span class="highlight-o">,</span> <span class="highlight-n">String</span> <span class="highlight-n">password</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 70</span>        <span class="highlight-k">try</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 71</span>            <span class="highlight-k">return</span> <span class="highlight-n">DriverManager</span><span class="highlight-o">.</span><span class="highlight-na">getConnection</span><span class="highlight-o">(</span><span class="highlight-n">url</span><span class="highlight-o">,</span> <span class="highlight-n">user</span><span class="highlight-o">,</span> <span class="highlight-n">password</span><span class="highlight-o">);</span>
<span class="highlight-ln"> 72</span>        <span class="highlight-o">}</span> <span class="highlight-k">catch</span> <span class="highlight-o">(</span><span class="highlight-n">SQLException</span> <span class="highlight-n">e</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 73</span>            <span class="highlight-n">e</span><span class="highlight-o">.</span><span class="highlight-na">printStackTrace</span><span class="highlight-o">();</span>
<span class="highlight-ln"> 74</span>        <span class="highlight-o">}</span>
<span class="highlight-ln"> 75</span>        <span class="highlight-k">return</span> <span class="highlight-kc">null</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 76</span>    <span class="highlight-o">}</span>
<span class="highlight-ln"> 77</span>
<span class="highlight-ln"> 78</span>    <span class="highlight-cm">/**
</span><span class="highlight-ln"> 79</span><span class="highlight-cm">     * 释放资源
</span><span class="highlight-ln"> 80</span><span class="highlight-cm">     *
</span><span class="highlight-ln"> 81</span><span class="highlight-cm">     * @param stmt
</span><span class="highlight-ln"> 82</span><span class="highlight-cm">     * @param conn
</span><span class="highlight-ln"> 83</span><span class="highlight-cm">     */</span>
<span class="highlight-ln"> 84</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">close</span><span class="highlight-o">(</span><span class="highlight-n">Statement</span> <span class="highlight-n">stmt</span><span class="highlight-o">,</span> <span class="highlight-n">Connection</span> <span class="highlight-n">conn</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 85</span>        <span class="highlight-k">if</span> <span class="highlight-o">(</span><span class="highlight-n">stmt</span> <span class="highlight-o">!=</span> <span class="highlight-kc">null</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 86</span>            <span class="highlight-k">try</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 87</span>                <span class="highlight-n">stmt</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln"> 88</span>            <span class="highlight-o">}</span> <span class="highlight-k">catch</span> <span class="highlight-o">(</span><span class="highlight-n">SQLException</span> <span class="highlight-n">e</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 89</span>                <span class="highlight-n">e</span><span class="highlight-o">.</span><span class="highlight-na">printStackTrace</span><span class="highlight-o">();</span>
<span class="highlight-ln"> 90</span>            <span class="highlight-o">}</span>
<span class="highlight-ln"> 91</span>        <span class="highlight-o">}</span>
<span class="highlight-ln"> 92</span>
<span class="highlight-ln"> 93</span>        <span class="highlight-k">if</span> <span class="highlight-o">(</span><span class="highlight-n">conn</span> <span class="highlight-o">!=</span> <span class="highlight-kc">null</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 94</span>            <span class="highlight-k">try</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 95</span>                <span class="highlight-n">conn</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln"> 96</span>            <span class="highlight-o">}</span> <span class="highlight-k">catch</span> <span class="highlight-o">(</span><span class="highlight-n">SQLException</span> <span class="highlight-n">e</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 97</span>                <span class="highlight-n">e</span><span class="highlight-o">.</span><span class="highlight-na">printStackTrace</span><span class="highlight-o">();</span>
<span class="highlight-ln"> 98</span>            <span class="highlight-o">}</span>
<span class="highlight-ln"> 99</span>        <span class="highlight-o">}</span>
<span class="highlight-ln">100</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">101</span>
<span class="highlight-ln">102</span>    <span class="highlight-cm">/**
</span><span class="highlight-ln">103</span><span class="highlight-cm">     * 释放资源
</span><span class="highlight-ln">104</span><span class="highlight-cm">     *
</span><span class="highlight-ln">105</span><span class="highlight-cm">     * @param rs
</span><span class="highlight-ln">106</span><span class="highlight-cm">     * @param stmt
</span><span class="highlight-ln">107</span><span class="highlight-cm">     * @param conn
</span><span class="highlight-ln">108</span><span class="highlight-cm">     */</span>
<span class="highlight-ln">109</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">close</span><span class="highlight-o">(</span><span class="highlight-n">ResultSet</span> <span class="highlight-n">rs</span><span class="highlight-o">,</span> <span class="highlight-n">Statement</span> <span class="highlight-n">stmt</span><span class="highlight-o">,</span> <span class="highlight-n">Connection</span> <span class="highlight-n">conn</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">110</span>        <span class="highlight-k">if</span> <span class="highlight-o">(</span><span class="highlight-n">rs</span> <span class="highlight-o">!=</span> <span class="highlight-kc">null</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">111</span>            <span class="highlight-k">try</span> <span class="highlight-o">{</span>
<span class="highlight-ln">112</span>                <span class="highlight-n">rs</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln">113</span>            <span class="highlight-o">}</span> <span class="highlight-k">catch</span> <span class="highlight-o">(</span><span class="highlight-n">SQLException</span> <span class="highlight-n">e</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">114</span>                <span class="highlight-n">e</span><span class="highlight-o">.</span><span class="highlight-na">printStackTrace</span><span class="highlight-o">();</span>
<span class="highlight-ln">115</span>            <span class="highlight-o">}</span>
<span class="highlight-ln">116</span>        <span class="highlight-o">}</span>
<span class="highlight-ln">117</span>        <span class="highlight-n">close</span><span class="highlight-o">(</span><span class="highlight-n">stmt</span><span class="highlight-o">,</span> <span class="highlight-n">conn</span><span class="highlight-o">);</span>
<span class="highlight-ln">118</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">119</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
<h3 id="27--JDBC-连接池-JDBCTemplate-">27.【JDBC 连接池、JDBCTemplate】</h3>
<ul>
<li>
<p><code>java</code> 包是 <code>Java API</code> 标准的包，<code>javax</code> 是扩展包，<code>org</code> 是由企业或组织提供的 Java 类库。</p>
</li>
<li>
<p>数据库连接池的好处：</p>
<ul>
<li>节约资源</li>
<li>用户访问高效</li>
</ul>
</li>
<li>
<p><code>javax.sql.DataSource</code> 数据库连接池的标准接口，由数据库厂商提供</p>
<ul>
<li><code>Connection getConnection()</code> 获取连接</li>
<li><code>Connection.close()</code> 归还连接，如果连接对象 <code>Connection</code> 是从连接池中获取的，那么调用 <code>Connection.close()</code> 方法，则不会再关闭连接了，而是归还连接。</li>
</ul>
</li>
<li>
<p>C3P0 数据库连接池技术</p>
<ol>
<li>导入 jar 包。</li>
<li>定义配置文件：名称必须为 <code>c3p0.propertied</code> 或者 <code>c3p0-config.xml</code> ，将文件放置在 src 目录下即可(src 目录的东西编译的时候会全部放置到 class 类路径中)。</li>
<li>创建核心对象：数据库连接池对象 <code>CombopooledDataSource</code>。</li>
<li>获取连接：<code>getConnection</code>。</li>
</ol>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">import</span> <span class="highlight-nn">com.mchange.v2.c3p0.ComboPooledDataSource</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">javax.sql.DataSource</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.sql.Connection</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 5</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.sql.SQLException</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 6</span>
<span class="highlight-ln"> 7</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 8</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">SQLException</span> <span class="highlight-o">{</span>
<span class="highlight-ln"> 9</span>        <span class="highlight-n">DataSource</span> <span class="highlight-n">ds</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">ComboPooledDataSource</span><span class="highlight-o">();</span><span class="highlight-c1">//可通过传参获取指定name的配置，空参代表使用默认配置
</span><span class="highlight-ln">10</span><span class="highlight-c1"></span>        <span class="highlight-n">Connection</span> <span class="highlight-n">connection</span> <span class="highlight-o">=</span> <span class="highlight-n">ds</span><span class="highlight-o">.</span><span class="highlight-na">getConnection</span><span class="highlight-o">();</span>
<span class="highlight-ln">11</span>        <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">connection</span><span class="highlight-o">);</span>
<span class="highlight-ln">12</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">13</span><span class="highlight-o">}</span>
</code></pre>
<p>配置文件样例：</p>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-o">&lt;</span><span class="highlight-n">c3p0</span><span class="highlight-o">-</span><span class="highlight-n">config</span><span class="highlight-o">&gt;</span>
<span class="highlight-ln"> 2</span>    <span class="highlight-o">&lt;!--</span> <span class="highlight-n">使用默认的配置读取连接池对象</span> <span class="highlight-o">--&gt;</span>
<span class="highlight-ln"> 3</span>    <span class="highlight-o">&lt;</span><span class="highlight-k">default</span><span class="highlight-o">-</span><span class="highlight-n">config</span><span class="highlight-o">&gt;</span>
<span class="highlight-ln"> 4</span>        <span class="highlight-o">&lt;!--</span>  <span class="highlight-n">连接参数</span> <span class="highlight-o">--&gt;</span>
<span class="highlight-ln"> 5</span>        <span class="highlight-o">&lt;</span><span class="highlight-n">property</span> <span class="highlight-n">name</span><span class="highlight-o">=</span><span class="highlight-s">"driverClass"</span><span class="highlight-o">&gt;</span><span class="highlight-n">com</span><span class="highlight-o">.</span><span class="highlight-na">mysql</span><span class="highlight-o">.</span><span class="highlight-na">jdbc</span><span class="highlight-o">.</span><span class="highlight-na">Driver</span><span class="highlight-o">&lt;/</span><span class="highlight-n">property</span><span class="highlight-o">&gt;</span>
<span class="highlight-ln"> 6</span>        <span class="highlight-o">&lt;</span><span class="highlight-n">property</span> <span class="highlight-n">name</span><span class="highlight-o">=</span><span class="highlight-s">"jdbcUrl"</span><span class="highlight-o">&gt;</span><span class="highlight-n">jdbc</span><span class="highlight-o">:</span><span class="highlight-n">mysql</span><span class="highlight-o">:</span><span class="highlight-c1">//localhost:3306/mysql&lt;/property&gt;
</span><span class="highlight-ln"> 7</span><span class="highlight-c1"></span>        <span class="highlight-o">&lt;</span><span class="highlight-n">property</span> <span class="highlight-n">name</span><span class="highlight-o">=</span><span class="highlight-s">"user"</span><span class="highlight-o">&gt;</span><span class="highlight-n">root</span><span class="highlight-o">&lt;/</span><span class="highlight-n">property</span><span class="highlight-o">&gt;</span>
<span class="highlight-ln"> 8</span>        <span class="highlight-o">&lt;</span><span class="highlight-n">property</span> <span class="highlight-n">name</span><span class="highlight-o">=</span><span class="highlight-s">"password"</span><span class="highlight-o">&gt;</span><span class="highlight-n">123456</span><span class="highlight-o">&lt;/</span><span class="highlight-n">property</span><span class="highlight-o">&gt;</span>
<span class="highlight-ln"> 9</span>
<span class="highlight-ln">10</span>        <span class="highlight-o">&lt;!--</span> <span class="highlight-n">连接池参数</span> <span class="highlight-o">--&gt;</span>
<span class="highlight-ln">11</span>        <span class="highlight-o">&lt;</span><span class="highlight-n">property</span> <span class="highlight-n">name</span><span class="highlight-o">=</span><span class="highlight-s">"initialPoolSize"</span><span class="highlight-o">&gt;</span><span class="highlight-n">5</span><span class="highlight-o">&lt;/</span><span class="highlight-n">property</span><span class="highlight-o">&gt;</span>
<span class="highlight-ln">12</span>        <span class="highlight-o">&lt;!--</span> <span class="highlight-n">最大可同时连接的数量</span><span class="highlight-o">--&gt;</span>
<span class="highlight-ln">13</span>        <span class="highlight-o">&lt;</span><span class="highlight-n">property</span> <span class="highlight-n">name</span><span class="highlight-o">=</span><span class="highlight-s">"maxPoolSize"</span><span class="highlight-o">&gt;</span><span class="highlight-n">10</span><span class="highlight-o">&lt;/</span><span class="highlight-n">property</span><span class="highlight-o">&gt;</span>
<span class="highlight-ln">14</span>        <span class="highlight-o">&lt;!--</span> <span class="highlight-n">超时时间</span><span class="highlight-o">--&gt;</span>
<span class="highlight-ln">15</span>        <span class="highlight-o">&lt;</span><span class="highlight-n">property</span> <span class="highlight-n">name</span><span class="highlight-o">=</span><span class="highlight-s">"checkoutTimeout"</span><span class="highlight-o">&gt;</span><span class="highlight-n">3000</span><span class="highlight-o">&lt;/</span><span class="highlight-n">property</span><span class="highlight-o">&gt;</span>
<span class="highlight-ln">16</span>    <span class="highlight-o">&lt;/</span><span class="highlight-k">default</span><span class="highlight-o">-</span><span class="highlight-n">config</span><span class="highlight-o">&gt;</span>
<span class="highlight-ln">17</span>
<span class="highlight-ln">18</span>    <span class="highlight-o">&lt;!--</span>  <span class="highlight-n">指定名称的配置</span>  <span class="highlight-o">--&gt;</span>
<span class="highlight-ln">19</span>    <span class="highlight-o">&lt;</span><span class="highlight-n">named</span><span class="highlight-o">-</span><span class="highlight-n">config</span> <span class="highlight-n">name</span><span class="highlight-o">=</span><span class="highlight-s">"otherc3p0"</span><span class="highlight-o">&gt;</span>
<span class="highlight-ln">20</span>        <span class="highlight-o">&lt;!--</span>  <span class="highlight-n">连接参数</span> <span class="highlight-o">--&gt;</span>
<span class="highlight-ln">21</span>        <span class="highlight-o">&lt;</span><span class="highlight-n">property</span> <span class="highlight-n">name</span><span class="highlight-o">=</span><span class="highlight-s">"driverClass"</span><span class="highlight-o">&gt;</span><span class="highlight-n">com</span><span class="highlight-o">.</span><span class="highlight-na">mysql</span><span class="highlight-o">.</span><span class="highlight-na">jdbc</span><span class="highlight-o">.</span><span class="highlight-na">Driver</span><span class="highlight-o">&lt;/</span><span class="highlight-n">property</span><span class="highlight-o">&gt;</span>
<span class="highlight-ln">22</span>        <span class="highlight-o">&lt;</span><span class="highlight-n">property</span> <span class="highlight-n">name</span><span class="highlight-o">=</span><span class="highlight-s">"jdbcUrl"</span><span class="highlight-o">&gt;</span><span class="highlight-n">jdbc</span><span class="highlight-o">:</span><span class="highlight-n">mysql</span><span class="highlight-o">:</span><span class="highlight-c1">//localhost:3306/day25&lt;/property&gt;
</span><span class="highlight-ln">23</span><span class="highlight-c1"></span>        <span class="highlight-o">&lt;</span><span class="highlight-n">property</span> <span class="highlight-n">name</span><span class="highlight-o">=</span><span class="highlight-s">"user"</span><span class="highlight-o">&gt;</span><span class="highlight-n">root</span><span class="highlight-o">&lt;/</span><span class="highlight-n">property</span><span class="highlight-o">&gt;</span>
<span class="highlight-ln">24</span>        <span class="highlight-o">&lt;</span><span class="highlight-n">property</span> <span class="highlight-n">name</span><span class="highlight-o">=</span><span class="highlight-s">"password"</span><span class="highlight-o">&gt;</span><span class="highlight-n">123456</span><span class="highlight-o">&lt;/</span><span class="highlight-n">property</span><span class="highlight-o">&gt;</span>
<span class="highlight-ln">25</span>
<span class="highlight-ln">26</span>        <span class="highlight-o">&lt;!--</span> <span class="highlight-n">连接池参数</span> <span class="highlight-o">--&gt;</span>
<span class="highlight-ln">27</span>        <span class="highlight-o">&lt;</span><span class="highlight-n">property</span> <span class="highlight-n">name</span><span class="highlight-o">=</span><span class="highlight-s">"initialPoolSize"</span><span class="highlight-o">&gt;</span><span class="highlight-n">5</span><span class="highlight-o">&lt;/</span><span class="highlight-n">property</span><span class="highlight-o">&gt;</span>
<span class="highlight-ln">28</span>        <span class="highlight-o">&lt;</span><span class="highlight-n">property</span> <span class="highlight-n">name</span><span class="highlight-o">=</span><span class="highlight-s">"maxPoolSize"</span><span class="highlight-o">&gt;</span><span class="highlight-n">8</span><span class="highlight-o">&lt;/</span><span class="highlight-n">property</span><span class="highlight-o">&gt;</span>
<span class="highlight-ln">29</span>        <span class="highlight-o">&lt;</span><span class="highlight-n">property</span> <span class="highlight-n">name</span><span class="highlight-o">=</span><span class="highlight-s">"checkoutTimeout"</span><span class="highlight-o">&gt;</span><span class="highlight-n">1000</span><span class="highlight-o">&lt;/</span><span class="highlight-n">property</span><span class="highlight-o">&gt;</span>
<span class="highlight-ln">30</span>    <span class="highlight-o">&lt;/</span><span class="highlight-n">named</span><span class="highlight-o">-</span><span class="highlight-n">config</span><span class="highlight-o">&gt;</span>
<span class="highlight-ln">31</span><span class="highlight-o">&lt;/</span><span class="highlight-n">c3p0</span><span class="highlight-o">-</span><span class="highlight-n">config</span><span class="highlight-o">&gt;</span>
</code></pre>
</li>
<li>
<p>Druid：数据库连接池实现技术，由阿里巴巴提供</p>
<ol>
<li>导入 jar 包。</li>
<li>定义配置文件：是 properties 形式的，可以叫任意名称，放在任意目录下。</li>
<li>加载配置文件 <code>.properties</code>。</li>
<li>获取数据库连接池对象：通过工厂类 <code>DruidDataSourceFactory</code> 获取。</li>
<li>获取连接：<code>getConnection</code>。</li>
</ol>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln">1</span><span class="highlight-n">driverClassName</span><span class="highlight-o">=</span><span class="highlight-n">com</span><span class="highlight-o">.</span><span class="highlight-na">mysql</span><span class="highlight-o">.</span><span class="highlight-na">jdbc</span><span class="highlight-o">.</span><span class="highlight-na">Driver</span>
<span class="highlight-ln">2</span><span class="highlight-n">url</span><span class="highlight-o">=</span><span class="highlight-n">jdbc</span><span class="highlight-o">:</span><span class="highlight-n">mysql</span><span class="highlight-o">:</span><span class="highlight-c1">///test
</span><span class="highlight-ln">3</span><span class="highlight-c1"></span><span class="highlight-n">username</span><span class="highlight-o">=</span><span class="highlight-n">root</span>
<span class="highlight-ln">4</span><span class="highlight-n">password</span><span class="highlight-o">=</span><span class="highlight-n">123456</span>
<span class="highlight-ln">5</span><span class="highlight-n">initialSize</span><span class="highlight-o">=</span><span class="highlight-n">5</span>
<span class="highlight-ln">6</span><span class="highlight-err">#</span> <span class="highlight-n">最大连接数</span>
<span class="highlight-ln">7</span><span class="highlight-n">maxActive</span><span class="highlight-o">=</span><span class="highlight-n">10</span>
<span class="highlight-ln">8</span><span class="highlight-n">maxWait</span><span class="highlight-o">=</span><span class="highlight-n">3000</span>
</code></pre>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">package</span> <span class="highlight-nn">package1</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">com.alibaba.druid.pool.DruidDataSourceFactory</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span>
<span class="highlight-ln"> 5</span><span class="highlight-kn">import</span> <span class="highlight-nn">javax.sql.DataSource</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 6</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.InputStream</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 7</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.sql.Connection</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 8</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.util.Properties</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 9</span>
<span class="highlight-ln">10</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln">11</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">Exception</span> <span class="highlight-o">{</span>
<span class="highlight-ln">12</span>        <span class="highlight-n">Properties</span> <span class="highlight-n">pro</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">Properties</span><span class="highlight-o">();</span>
<span class="highlight-ln">13</span>        <span class="highlight-n">InputStream</span> <span class="highlight-n">resourceAsStream</span> <span class="highlight-o">=</span> <span class="highlight-n">Main</span><span class="highlight-o">.</span><span class="highlight-na">class</span><span class="highlight-o">.</span><span class="highlight-na">getClassLoader</span><span class="highlight-o">().</span><span class="highlight-na">getResourceAsStream</span><span class="highlight-o">(</span><span class="highlight-s">"druid.properties"</span><span class="highlight-o">);</span>
<span class="highlight-ln">14</span>        <span class="highlight-n">pro</span><span class="highlight-o">.</span><span class="highlight-na">load</span><span class="highlight-o">(</span><span class="highlight-n">resourceAsStream</span><span class="highlight-o">);</span>
<span class="highlight-ln">15</span>        <span class="highlight-n">DataSource</span> <span class="highlight-n">ds</span> <span class="highlight-o">=</span> <span class="highlight-n">DruidDataSourceFactory</span><span class="highlight-o">.</span><span class="highlight-na">createDataSource</span><span class="highlight-o">(</span><span class="highlight-n">pro</span><span class="highlight-o">);</span>
<span class="highlight-ln">16</span>        <span class="highlight-n">Connection</span> <span class="highlight-n">conn</span> <span class="highlight-o">=</span> <span class="highlight-n">ds</span><span class="highlight-o">.</span><span class="highlight-na">getConnection</span><span class="highlight-o">();</span>
<span class="highlight-ln">17</span>        <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">conn</span><span class="highlight-o">);</span>
<span class="highlight-ln">18</span>        <span class="highlight-n">conn</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln">19</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">20</span><span class="highlight-o">}</span>
</code></pre>
</li>
<li>
<p>Druid-JDBCUtils</p>
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">package</span> <span class="highlight-nn">utils</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">com.alibaba.druid.pool.DruidDataSourceFactory</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span>
<span class="highlight-ln"> 5</span><span class="highlight-kn">import</span> <span class="highlight-nn">javax.sql.DataSource</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 6</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.io.IOException</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 7</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.sql.Connection</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 8</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.sql.ResultSet</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 9</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.sql.SQLException</span><span class="highlight-o">;</span>
<span class="highlight-ln">10</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.sql.Statement</span><span class="highlight-o">;</span>
<span class="highlight-ln">11</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.util.Properties</span><span class="highlight-o">;</span>
<span class="highlight-ln">12</span>
<span class="highlight-ln">13</span><span class="highlight-cm">/**
</span><span class="highlight-ln">14</span><span class="highlight-cm"> * Druid连接池的工具类
</span><span class="highlight-ln">15</span><span class="highlight-cm"> */</span>
<span class="highlight-ln">16</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">JDBCUtils</span> <span class="highlight-o">{</span>
<span class="highlight-ln">17</span>
<span class="highlight-ln">18</span>    <span class="highlight-c1">//1.定义成员变量 DataSource
</span><span class="highlight-ln">19</span><span class="highlight-c1"></span>    <span class="highlight-kd">private</span> <span class="highlight-kd">static</span> <span class="highlight-n">DataSource</span> <span class="highlight-n">ds</span><span class="highlight-o">;</span>
<span class="highlight-ln">20</span>
<span class="highlight-ln">21</span>    <span class="highlight-kd">static</span> <span class="highlight-o">{</span>
<span class="highlight-ln">22</span>        <span class="highlight-n">Properties</span> <span class="highlight-n">pro</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">Properties</span><span class="highlight-o">();</span>
<span class="highlight-ln">23</span>        <span class="highlight-k">try</span> <span class="highlight-o">{</span>
<span class="highlight-ln">24</span>            <span class="highlight-c1">//1.加载配置文件
</span><span class="highlight-ln">25</span><span class="highlight-c1"></span>            <span class="highlight-n">pro</span><span class="highlight-o">.</span><span class="highlight-na">load</span><span class="highlight-o">(</span><span class="highlight-n">JDBCUtils</span><span class="highlight-o">.</span><span class="highlight-na">class</span><span class="highlight-o">.</span><span class="highlight-na">getClassLoader</span><span class="highlight-o">().</span><span class="highlight-na">getResourceAsStream</span><span class="highlight-o">(</span><span class="highlight-s">"druid.properties"</span><span class="highlight-o">));</span>
<span class="highlight-ln">26</span>            <span class="highlight-c1">//2.获取DataSource
</span><span class="highlight-ln">27</span><span class="highlight-c1"></span>            <span class="highlight-n">ds</span> <span class="highlight-o">=</span> <span class="highlight-n">DruidDataSourceFactory</span><span class="highlight-o">.</span><span class="highlight-na">createDataSource</span><span class="highlight-o">(</span><span class="highlight-n">pro</span><span class="highlight-o">);</span>
<span class="highlight-ln">28</span>        <span class="highlight-o">}</span> <span class="highlight-k">catch</span> <span class="highlight-o">(</span><span class="highlight-n">IOException</span> <span class="highlight-n">e</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">29</span>            <span class="highlight-n">e</span><span class="highlight-o">.</span><span class="highlight-na">printStackTrace</span><span class="highlight-o">();</span>
<span class="highlight-ln">30</span>        <span class="highlight-o">}</span> <span class="highlight-k">catch</span> <span class="highlight-o">(</span><span class="highlight-n">Exception</span> <span class="highlight-n">e</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">31</span>            <span class="highlight-n">e</span><span class="highlight-o">.</span><span class="highlight-na">printStackTrace</span><span class="highlight-o">();</span>
<span class="highlight-ln">32</span>        <span class="highlight-o">}</span>
<span class="highlight-ln">33</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">34</span>
<span class="highlight-ln">35</span>    <span class="highlight-cm">/**
</span><span class="highlight-ln">36</span><span class="highlight-cm">     * 获取连接
</span><span class="highlight-ln">37</span><span class="highlight-cm">     */</span>
<span class="highlight-ln">38</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-n">Connection</span> <span class="highlight-nf">getConnection</span><span class="highlight-o">()</span> <span class="highlight-kd">throws</span> <span class="highlight-n">SQLException</span> <span class="highlight-o">{</span>
<span class="highlight-ln">39</span>        <span class="highlight-k">return</span> <span class="highlight-n">ds</span><span class="highlight-o">.</span><span class="highlight-na">getConnection</span><span class="highlight-o">();</span>
<span class="highlight-ln">40</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">41</span>
<span class="highlight-ln">42</span>    <span class="highlight-cm">/**
</span><span class="highlight-ln">43</span><span class="highlight-cm">     * 释放资源
</span><span class="highlight-ln">44</span><span class="highlight-cm">     */</span>
<span class="highlight-ln">45</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">close</span><span class="highlight-o">(</span><span class="highlight-n">Statement</span> <span class="highlight-n">stmt</span><span class="highlight-o">,</span> <span class="highlight-n">Connection</span> <span class="highlight-n">conn</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">46</span>        <span class="highlight-n">close</span><span class="highlight-o">(</span><span class="highlight-kc">null</span><span class="highlight-o">,</span> <span class="highlight-n">stmt</span><span class="highlight-o">,</span> <span class="highlight-n">conn</span><span class="highlight-o">);</span>
<span class="highlight-ln">47</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">48</span>
<span class="highlight-ln">49</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">close</span><span class="highlight-o">(</span><span class="highlight-n">ResultSet</span> <span class="highlight-n">rs</span><span class="highlight-o">,</span> <span class="highlight-n">Statement</span> <span class="highlight-n">stmt</span><span class="highlight-o">,</span> <span class="highlight-n">Connection</span> <span class="highlight-n">conn</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">50</span>        <span class="highlight-k">if</span> <span class="highlight-o">(</span><span class="highlight-n">rs</span> <span class="highlight-o">!=</span> <span class="highlight-kc">null</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">51</span>            <span class="highlight-k">try</span> <span class="highlight-o">{</span>
<span class="highlight-ln">52</span>                <span class="highlight-n">rs</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln">53</span>            <span class="highlight-o">}</span> <span class="highlight-k">catch</span> <span class="highlight-o">(</span><span class="highlight-n">SQLException</span> <span class="highlight-n">e</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">54</span>                <span class="highlight-n">e</span><span class="highlight-o">.</span><span class="highlight-na">printStackTrace</span><span class="highlight-o">();</span>
<span class="highlight-ln">55</span>            <span class="highlight-o">}</span>
<span class="highlight-ln">56</span>        <span class="highlight-o">}</span>
<span class="highlight-ln">57</span>
<span class="highlight-ln">58</span>        <span class="highlight-k">if</span> <span class="highlight-o">(</span><span class="highlight-n">stmt</span> <span class="highlight-o">!=</span> <span class="highlight-kc">null</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">59</span>            <span class="highlight-k">try</span> <span class="highlight-o">{</span>
<span class="highlight-ln">60</span>                <span class="highlight-n">stmt</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln">61</span>            <span class="highlight-o">}</span> <span class="highlight-k">catch</span> <span class="highlight-o">(</span><span class="highlight-n">SQLException</span> <span class="highlight-n">e</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">62</span>                <span class="highlight-n">e</span><span class="highlight-o">.</span><span class="highlight-na">printStackTrace</span><span class="highlight-o">();</span>
<span class="highlight-ln">63</span>            <span class="highlight-o">}</span>
<span class="highlight-ln">64</span>        <span class="highlight-o">}</span>
<span class="highlight-ln">65</span>
<span class="highlight-ln">66</span>        <span class="highlight-k">if</span> <span class="highlight-o">(</span><span class="highlight-n">conn</span> <span class="highlight-o">!=</span> <span class="highlight-kc">null</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">67</span>            <span class="highlight-k">try</span> <span class="highlight-o">{</span>
<span class="highlight-ln">68</span>                <span class="highlight-n">conn</span><span class="highlight-o">.</span><span class="highlight-na">close</span><span class="highlight-o">();</span>
<span class="highlight-ln">69</span>            <span class="highlight-o">}</span> <span class="highlight-k">catch</span> <span class="highlight-o">(</span><span class="highlight-n">SQLException</span> <span class="highlight-n">e</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">70</span>                <span class="highlight-n">e</span><span class="highlight-o">.</span><span class="highlight-na">printStackTrace</span><span class="highlight-o">();</span>
<span class="highlight-ln">71</span>            <span class="highlight-o">}</span>
<span class="highlight-ln">72</span>        <span class="highlight-o">}</span>
<span class="highlight-ln">73</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">74</span>
<span class="highlight-ln">75</span>    <span class="highlight-cm">/**
</span><span class="highlight-ln">76</span><span class="highlight-cm">     * 获取连接池方法
</span><span class="highlight-ln">77</span><span class="highlight-cm">     */</span>
<span class="highlight-ln">78</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-n">DataSource</span> <span class="highlight-nf">getDataSource</span><span class="highlight-o">()</span> <span class="highlight-o">{</span>
<span class="highlight-ln">79</span>        <span class="highlight-k">return</span> <span class="highlight-n">ds</span><span class="highlight-o">;</span>
<span class="highlight-ln">80</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">81</span><span class="highlight-o">}</span>
</code></pre>
</li>
<li>
<p><code>JdbcTemplate</code> :Spring 框架对 JDBC 进行了封装，提供 JdbcTemplate 对象简化 JDBC 的开发。</p>
<ul>
<li><code>JdbcTemplate(DataSource dataSource) </code>：传递数据库连接池。</li>
<li><code>int update(String sql)</code>：执行 DML 语句。增删改语句。</li>
<li><code>int update(String sql, Object... args)</code>：args 为取代 <code>?</code> 的值，位置要对应。</li>
<li><code>Map&lt;String,Object&gt; queryForMap(String sql, Object... args)</code> ：查询结果并将结果集封装为 Map 集合，Key 为列名，Value 为值，此方法<strong>查询返回的长度只能为 1</strong>，重载方法没第二个参数。</li>
<li><code>List&lt;Map&lt;String,Object&gt;&gt; queryForList(String sql, Object... args)</code>：查询结果并将结果集封装为 List 集合，重载方法没第二个参数。</li>
<li><code>&lt;T&gt; List&lt;T&gt; query(String sql, RowMapper&lt;T&gt; rowMapper)</code> 将结果封装为 List ，List 中存的为  JavaBean 对象。</li>
<li><code>&lt;T&gt; List&lt;T&gt; query(String sql, RowMapper&lt;T&gt; rowMapper, Object... args)</code></li>
<li><code>&lt;T&gt; List&lt;T&gt; query(String sql, Object[] args, RowMapper&lt;T&gt; rowMapper)</code></li>
<li><code>&lt;T&gt; T queryForObject(String sql, Class&lt;T&gt; requiredType, Object... args)</code> 查询结果，将结果封装为指定对象，一般用于聚合函数。</li>
</ul>
</li>
<li>
<p><code>RowMapper&lt;T&gt;</code> 介绍：为接口，含有抽象方法 <code>T mapRow(ResultSet var1, int var2)</code></p>
<ul>
<li>通过实现此接口封装为 JavaBean 对象
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">package</span> <span class="highlight-nn">package1</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">bean.User</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span><span class="highlight-kn">import</span> <span class="highlight-nn">org.springframework.jdbc.core.JdbcTemplate</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 5</span><span class="highlight-kn">import</span> <span class="highlight-nn">org.springframework.jdbc.core.RowMapper</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 6</span><span class="highlight-kn">import</span> <span class="highlight-nn">utils.JDBCUtils</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 7</span>
<span class="highlight-ln"> 8</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.sql.ResultSet</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 9</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.sql.SQLException</span><span class="highlight-o">;</span>
<span class="highlight-ln">10</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.util.List</span><span class="highlight-o">;</span>
<span class="highlight-ln">11</span>
<span class="highlight-ln">12</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln">13</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">Exception</span> <span class="highlight-o">{</span>
<span class="highlight-ln">14</span>        <span class="highlight-n">JdbcTemplate</span> <span class="highlight-n">template</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">JdbcTemplate</span><span class="highlight-o">(</span><span class="highlight-n">JDBCUtils</span><span class="highlight-o">.</span><span class="highlight-na">getDataSource</span><span class="highlight-o">());</span>
<span class="highlight-ln">15</span>        <span class="highlight-n">String</span> <span class="highlight-n">sql</span> <span class="highlight-o">=</span> <span class="highlight-s">"select * from user where age = ?"</span><span class="highlight-o">;</span>
<span class="highlight-ln">16</span>        <span class="highlight-n">List</span><span class="highlight-o">&lt;</span><span class="highlight-n">User</span><span class="highlight-o">&gt;</span> <span class="highlight-n">list</span> <span class="highlight-o">=</span> <span class="highlight-n">template</span><span class="highlight-o">.</span><span class="highlight-na">query</span><span class="highlight-o">(</span><span class="highlight-n">sql</span><span class="highlight-o">,</span> <span class="highlight-k">new</span> <span class="highlight-n">RowMapper</span><span class="highlight-o">&lt;</span><span class="highlight-n">User</span><span class="highlight-o">&gt;()</span> <span class="highlight-o">{</span>
<span class="highlight-ln">17</span>            <span class="highlight-nd">@Override</span>
<span class="highlight-ln">18</span>            <span class="highlight-kd">public</span> <span class="highlight-n">User</span> <span class="highlight-nf">mapRow</span><span class="highlight-o">(</span><span class="highlight-n">ResultSet</span> <span class="highlight-n">resultSet</span><span class="highlight-o">,</span> <span class="highlight-kt">int</span> <span class="highlight-n">i</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">SQLException</span> <span class="highlight-o">{</span>
<span class="highlight-ln">19</span>                <span class="highlight-n">User</span> <span class="highlight-n">user</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">User</span><span class="highlight-o">();</span>
<span class="highlight-ln">20</span>                <span class="highlight-kt">int</span> <span class="highlight-n">id</span> <span class="highlight-o">=</span> <span class="highlight-n">resultSet</span><span class="highlight-o">.</span><span class="highlight-na">getInt</span><span class="highlight-o">(</span><span class="highlight-s">"id"</span><span class="highlight-o">);</span>
<span class="highlight-ln">21</span>                <span class="highlight-n">String</span> <span class="highlight-n">username</span> <span class="highlight-o">=</span> <span class="highlight-n">resultSet</span><span class="highlight-o">.</span><span class="highlight-na">getString</span><span class="highlight-o">(</span><span class="highlight-s">"username"</span><span class="highlight-o">);</span>
<span class="highlight-ln">22</span>                <span class="highlight-n">String</span> <span class="highlight-n">password</span> <span class="highlight-o">=</span> <span class="highlight-n">resultSet</span><span class="highlight-o">.</span><span class="highlight-na">getString</span><span class="highlight-o">(</span><span class="highlight-s">"password"</span><span class="highlight-o">);</span>
<span class="highlight-ln">23</span>                <span class="highlight-kt">int</span> <span class="highlight-n">age</span> <span class="highlight-o">=</span> <span class="highlight-n">resultSet</span><span class="highlight-o">.</span><span class="highlight-na">getInt</span><span class="highlight-o">(</span><span class="highlight-s">"age"</span><span class="highlight-o">);</span>
<span class="highlight-ln">24</span>
<span class="highlight-ln">25</span>                <span class="highlight-n">user</span><span class="highlight-o">.</span><span class="highlight-na">setId</span><span class="highlight-o">(</span><span class="highlight-n">id</span><span class="highlight-o">);</span>
<span class="highlight-ln">26</span>                <span class="highlight-n">user</span><span class="highlight-o">.</span><span class="highlight-na">setUsername</span><span class="highlight-o">(</span><span class="highlight-n">username</span><span class="highlight-o">);</span>
<span class="highlight-ln">27</span>                <span class="highlight-n">user</span><span class="highlight-o">.</span><span class="highlight-na">setPassword</span><span class="highlight-o">(</span><span class="highlight-n">password</span><span class="highlight-o">);</span>
<span class="highlight-ln">28</span>                <span class="highlight-n">user</span><span class="highlight-o">.</span><span class="highlight-na">setAge</span><span class="highlight-o">(</span><span class="highlight-n">age</span><span class="highlight-o">);</span>
<span class="highlight-ln">29</span>
<span class="highlight-ln">30</span>                <span class="highlight-k">return</span> <span class="highlight-n">user</span><span class="highlight-o">;</span>
<span class="highlight-ln">31</span>            <span class="highlight-o">}</span>
<span class="highlight-ln">32</span>        <span class="highlight-o">},</span> <span class="highlight-n">18</span><span class="highlight-o">);</span>
<span class="highlight-ln">33</span>
<span class="highlight-ln">34</span>        <span class="highlight-k">for</span> <span class="highlight-o">(</span><span class="highlight-n">User</span> <span class="highlight-n">user</span> <span class="highlight-o">:</span> <span class="highlight-n">list</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">35</span>            <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">user</span><span class="highlight-o">);</span>
<span class="highlight-ln">36</span>        <span class="highlight-o">}</span>
<span class="highlight-ln">37</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">38</span><span class="highlight-o">}</span>
</code></pre>
</li>
<li>通过调用服务商实现的子类的构造方法 <code>BeanPropertyRowMapper(Class&lt;T&gt; mappedClass)</code> (一般这样使用)，这样使用的时候 Bean 类中的字段和数据库表中的字段完全对应(字段名字一样或者类中驼峰式与数据库表中的下划线式对应)
<pre><code class="language-java highlight-chroma"><span class="highlight-ln"> 1</span><span class="highlight-kn">package</span> <span class="highlight-nn">package1</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 2</span>
<span class="highlight-ln"> 3</span><span class="highlight-kn">import</span> <span class="highlight-nn">bean.User</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 4</span><span class="highlight-kn">import</span> <span class="highlight-nn">org.springframework.jdbc.core.BeanPropertyRowMapper</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 5</span><span class="highlight-kn">import</span> <span class="highlight-nn">org.springframework.jdbc.core.JdbcTemplate</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 6</span><span class="highlight-kn">import</span> <span class="highlight-nn">utils.JDBCUtils</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 7</span>
<span class="highlight-ln"> 8</span><span class="highlight-kn">import</span> <span class="highlight-nn">java.util.List</span><span class="highlight-o">;</span>
<span class="highlight-ln"> 9</span>
<span class="highlight-ln">10</span><span class="highlight-kd">public</span> <span class="highlight-kd">class</span> <span class="highlight-nc">Main</span> <span class="highlight-o">{</span>
<span class="highlight-ln">11</span>    <span class="highlight-kd">public</span> <span class="highlight-kd">static</span> <span class="highlight-kt">void</span> <span class="highlight-nf">main</span><span class="highlight-o">(</span><span class="highlight-n">String</span><span class="highlight-o">[]</span> <span class="highlight-n">args</span><span class="highlight-o">)</span> <span class="highlight-kd">throws</span> <span class="highlight-n">Exception</span> <span class="highlight-o">{</span>
<span class="highlight-ln">12</span>        <span class="highlight-n">JdbcTemplate</span> <span class="highlight-n">template</span> <span class="highlight-o">=</span> <span class="highlight-k">new</span> <span class="highlight-n">JdbcTemplate</span><span class="highlight-o">(</span><span class="highlight-n">JDBCUtils</span><span class="highlight-o">.</span><span class="highlight-na">getDataSource</span><span class="highlight-o">());</span>
<span class="highlight-ln">13</span>        <span class="highlight-n">String</span> <span class="highlight-n">sql</span> <span class="highlight-o">=</span> <span class="highlight-s">"select * from user where age = ?"</span><span class="highlight-o">;</span>
<span class="highlight-ln">14</span>        <span class="highlight-n">List</span><span class="highlight-o">&lt;</span><span class="highlight-n">User</span><span class="highlight-o">&gt;</span> <span class="highlight-n">list</span> <span class="highlight-o">=</span> <span class="highlight-n">template</span><span class="highlight-o">.</span><span class="highlight-na">query</span><span class="highlight-o">(</span><span class="highlight-n">sql</span><span class="highlight-o">,</span> <span class="highlight-k">new</span> <span class="highlight-n">BeanPropertyRowMapper</span><span class="highlight-o">&lt;</span><span class="highlight-n">User</span><span class="highlight-o">&gt;(</span><span class="highlight-n">User</span><span class="highlight-o">.</span><span class="highlight-na">class</span><span class="highlight-o">),</span> <span class="highlight-n">18</span><span class="highlight-o">);</span>
<span class="highlight-ln">15</span>
<span class="highlight-ln">16</span>        <span class="highlight-k">for</span> <span class="highlight-o">(</span><span class="highlight-n">User</span> <span class="highlight-n">user</span> <span class="highlight-o">:</span> <span class="highlight-n">list</span><span class="highlight-o">)</span> <span class="highlight-o">{</span>
<span class="highlight-ln">17</span>            <span class="highlight-n">System</span><span class="highlight-o">.</span><span class="highlight-na">out</span><span class="highlight-o">.</span><span class="highlight-na">println</span><span class="highlight-o">(</span><span class="highlight-n">user</span><span class="highlight-o">);</span>
<span class="highlight-ln">18</span>        <span class="highlight-o">}</span>
<span class="highlight-ln">19</span>    <span class="highlight-o">}</span>
<span class="highlight-ln">20</span><span class="highlight-o">}</span>
</code></pre>
</li>
</ul>
</li>
<li>
<p><code>JdbcTemplate</code> 使用步骤</p>
<ol>
<li>导入 jar 包</li>
<li>创建 JdbcTemplate 对象，构造方法传递数据源 DataSource</li>
<li>调用 JdbcTemplate 的方法来完成 CRUD 的操作。</li>
</ol>
</li>
</ul>
                            <div>
                                <hr>

标题：Java学习笔记-基础篇(2)<br>
作者：<a href="https://rainsheep.github.io" target="_blank">Rainsheep</a><br>
地址：<a href="https://rainsheep.github.io/articles/2020/02/19/1582052137407.html" target="_blank">https://rainsheep.github.io/articles/2020/02/19/1582052137407.html</a><br>

<!-- 签名档内可使用 HTML、JavaScript -->
<br>
                            </div>
                    </div>
                </div>
            </div>

                <div class="module mobile__hidden">
                    <div class="module__content fn__clear">
                            <a href="https://rainsheep.github.io/articles/2020/02/19/1582051510367.html" rel="prev" class="fn__left breadcrumb">
                                旧一篇: Java学习笔记-基础篇(1)
                            </a>
                            <a href="https://rainsheep.github.io/articles/2020/02/20/1582176149227.html" rel="next"
                               class="fn__right breadcrumb">
                                MySQL学习笔记: 新一篇
                            </a>
                    </div>
                </div>

                <div class="module mobile__hidden fn__none">
                    <div class="module__content">
                        <a href="https://rainsheep.github.io/articles/2020/02/19/1582051510367.html" rel="prev" class="breadcrumb">
                            旧一篇: Java学习笔记-基础篇(1)
                        </a>
                    </div>
                </div>

                <div class="module mobile__hidden fn__none">
                    <div class="module__content">
                        <a href="https://rainsheep.github.io/articles/2020/02/20/1582176149227.html" rel="next"
                           class="breadcrumb">
                            新一篇: MySQL学习笔记
                        </a>
                    </div>
                </div>
                <div id="gitalk-container" class="module__content"
                     style="border-radius: 5px;margin-bottom: 30px;box-shadow: 1px 1px 3px 1px rgba(0,0,0,0.2);transition: all .3s;"></div>
                <div id="b3logsolocomments"></div>
                <div id="vcomment" class="module__content"
                     style="border-radius: 5px;margin-bottom: 30px;box-shadow: 1px 1px 3px 1px rgba(0,0,0,0.2);transition: all .3s;"
                     data-name="Rainsheep" data-postId="1582052137407"></div>

            <div class="fn__flex article__relevant">
                <div class="fn__flex-1" id="externalRelevantArticlesWrap">
                    <div class="module">
                        <div id="externalRelevantArticles" class="module__list"></div>
                    </div>
                </div>
                <div class="mobile__hidden">&nbsp; &nbsp; &nbsp; &nbsp;</div>
                <div class="fn__flex-1" id="randomArticlesWrap">
                    <div class="module">
                        <div id="randomArticles" class="module__list"></div>
                    </div>
                </div>
                <div class="mobile__hidden">&nbsp; &nbsp; &nbsp; &nbsp;</div>
                <div class="fn__flex-1" id="relevantArticlesWrap">
                    <div class="module">
                        <div id="relevantArticles" class="module__list"></div>
                    </div>
                </div>
            </div>
        </main>
    </div>
<aside class="side">
        <div class="module">
            <div class="module__list">
<ul class="article__toc">
        <li class="toc__h3">
            <a href="#19--File-类-递归-">19.【File 类、递归】</a>
        </li>
        <li class="toc__h3">
            <a href="#20--字节流-字符流-">20.【字节流、字符流】</a>
        </li>
        <li class="toc__h3">
            <a href="#21--缓冲流-转换流-序列化流-打印流-">21.【缓冲流、转换流、序列化流、打印流】</a>
        </li>
        <li class="toc__h3">
            <a href="#22--网络编程-">22.【网络编程】</a>
        </li>
        <li class="toc__h3">
            <a href="#23--函数式接口-">23.【函数式接口】</a>
        </li>
        <li class="toc__h3">
            <a href="#24--Stream流-方法引用-">24.【Stream 流、方法引用】</a>
        </li>
        <li class="toc__h3">
            <a href="#25--基础加强-反射-注解-">25.【基础加强、反射、注解】</a>
        </li>
        <li class="toc__h3">
            <a href="#26--JDBC-">26.【JDBC】</a>
        </li>
        <li class="toc__h3">
            <a href="#27--JDBC-连接池-JDBCTemplate-">27.【JDBC 连接池、JDBCTemplate】</a>
        </li>
</ul>            </div>
        </div>
        <section class="vditor-reset module">
            <main class="module__content">
                <b><i><font><span id="hitokoto">欢迎来到Rain sheep的博客</span></font></i></b>
<script src="https://v1.hitokoto.cn/?encode=js&select=%23hitokoto" defer></script>
<!-- 公告栏可使用 HTML、JavaScript，比如可以在此加入第三方统计 js -->
            </main>
        </section>


    <div class="module item">
        <header class="module__header ft__center">
            Rainsheep
        </header>
        <main class="module__content ft__center">
            <img class="side__avatar" src="https://b3logfile.com/avatar/1573792699119_1591777626791.jpeg?imageView2/1/w/128/h/128/interlace/0/q/100" alt="Rainsheep"/>
            咸鱼不配拥有梦想 <br> <br>
    <a href="https://hacpai.com/member/Rainsheep"
       title="https://hacpai.com/member/Rainsheep"
       class="user__site"
       target="_blank" rel="noopener nofollow">
        <svg viewBox="0 0 32 32" width="100%" height="100%">
            <path fill="#d23f31" style="fill: var(--color1, #d23f31)" d="M5.787 17.226h17.033l5.954 9.528c0.47 0.752 0.003 1.361-1.042 1.361h-15.141z"></path>
            <path d="M10.74 3.927h17.033c1.045 0 1.512 0.609 1.042 1.361l-5.954 9.528h-19.872l6.379-10.209c0.235-0.376 0.849-0.681 1.372-0.681z"></path>
            <path d="M2.953 17.226h2.839l6.804 10.889h-1.892c-0.523 0-1.137-0.305-1.372-0.681z"></path>
        </svg>
    </a>

        <a href="https://github.com/Rainsheep"
           title="https://github.com/Rainsheep"
           class="user__site"
           target="_blank" rel="noopener nofollow">
            <svg viewBox="0 0 32 32" width="100%" height="100%">
                <path d="M16 0.331c-8.836 0-16 7.163-16 16 0 7.069 4.585 13.067 10.942 15.182 0.8 0.148 1.094-0.347 1.094-0.77 0-0.381-0.015-1.642-0.022-2.979-4.452 0.968-5.391-1.888-5.391-1.888-0.728-1.849-1.776-2.341-1.776-2.341-1.452-0.993 0.11-0.973 0.11-0.973 1.606 0.113 2.452 1.649 2.452 1.649 1.427 2.446 3.743 1.739 4.656 1.33 0.143-1.034 0.558-1.74 1.016-2.14-3.554-0.404-7.29-1.777-7.29-7.907 0-1.747 0.625-3.174 1.649-4.295-0.166-0.403-0.714-2.030 0.155-4.234 0 0 1.344-0.43 4.401 1.64 1.276-0.355 2.645-0.532 4.005-0.539 1.359 0.006 2.729 0.184 4.008 0.539 3.054-2.070 4.395-1.64 4.395-1.64 0.871 2.204 0.323 3.831 0.157 4.234 1.026 1.12 1.647 2.548 1.647 4.295 0 6.145-3.743 7.498-7.306 7.895 0.574 0.497 1.085 1.47 1.085 2.963 0 2.141-0.019 3.864-0.019 4.391 0 0.426 0.288 0.925 1.099 0.768 6.354-2.118 10.933-8.113 10.933-15.18 0-8.837-7.164-16-16-16z"></path>
            </svg>
        </a>

        <a href="tencent://message/?uin=1045674971"
           title="1045674971"
           target="_blank"
           class="user__site" rel="noopener nofollow">
            <svg viewBox="0 0 32 32" width="100%" height="100%">
                <path d="M4.821 14.393c-0.125-0.304-0.143-0.607-0.143-0.929 0-0.5 0.321-1.304 0.625-1.679-0.018-0.464 0.179-1.411 0.536-1.714 0-3.304 2.554-7.464 5.536-8.893 1.839-0.875 3.768-1.179 5.786-1.179 1.571 0 3.286 0.375 4.75 0.982 4.196 1.768 5.143 5.054 6.036 9.25l0.018 0.089c0.518 0.786 0.982 1.714 0.982 2.679 0 0.482-0.321 0.964-0.321 1.393 0 0.036 0.107 0.179 0.125 0.214 1.536 2.268 2.929 4.732 2.929 7.554 0 0.625-0.339 2.804-1.339 2.804-0.696 0-1.464-1.696-1.714-2.161-0.018-0.018-0.036-0.018-0.054-0.018l-0.089 0.071c-0.571 1.482-1.196 2.875-2.357 3.982 1.018 0.982 2.661 0.893 2.964 2.589-0.089 0.196-0.054 0.411-0.196 0.607-1.018 1.536-3.75 1.732-5.393 1.732-2.179 0-3.946-0.571-6-1.179-0.429-0.125-1.071-0.054-1.536-0.107-1.089 1.196-3.75 1.518-5.286 1.518-1.357 0-6.607-0.089-6.607-2.411 0-1 0.214-1.286 0.911-1.929 0.554-0.107 0.964-0.411 1.607-0.446 0.089 0 0.161-0.018 0.25-0.036 0.018-0.018 0.036-0.018 0.036-0.071l-0.036-0.054c-1.232-0.286-2.964-3.393-3.232-4.679l-0.089-0.054c-0.125 0-0.179 0.268-0.214 0.357-0.393 0.911-1.321 1.893-2.357 2h-0.018c-0.143 0-0.089-0.143-0.196-0.179-0.25-0.589-0.411-1.125-0.411-1.786 0-3.571 1.714-6.214 4.5-8.321z"></path>
            </svg>
        </a>
        </main>
    </div>


        <div class="module item">
            <header class="module__header">标签</header>
            <main class="module__content--three module__content fn__clear">
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/acm"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="76 篇文章">
                        acm</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="59 篇文章">
                        知识点总结</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/Java"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="31 篇文章">
                        Java</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/%E8%BD%AF%E4%BB%B6%E6%95%99%E7%A8%8B"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="26 篇文章">
                        软件教程</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="25 篇文章">
                        学习笔记</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/STL"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="20 篇文章">
                        STL</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/windows"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="15 篇文章">
                        windows</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/Linux"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="15 篇文章">
                        Linux</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/DP"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="15 篇文章">
                        DP</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/ss"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="13 篇文章">
                        ss</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/Shadowsocks"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="13 篇文章">
                        Shadowsocks</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/%E5%89%8D%E7%AB%AF"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="11 篇文章">
                        前端</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/%E6%A0%91"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="6 篇文章">
                        树</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/%E7%94%9F%E6%B4%BB%E8%BD%A8%E8%BF%B9"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="6 篇文章">
                        生活轨迹</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/%E6%A8%A1%E6%8B%9F"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="5 篇文章">
                        模拟</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/%E6%95%B0%E5%AD%A6%E9%97%AE%E9%A2%98"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="5 篇文章">
                        数学问题</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/%E5%9B%BE"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="3 篇文章">
                        图</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="3 篇文章">
                        字符串</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/%E9%80%92%E5%BD%92"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="3 篇文章">
                        递归</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/python"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="3 篇文章">
                        python</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/%E9%80%92%E6%8E%A8"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="2 篇文章">
                        递推</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/%E5%BC%80%E6%BA%90"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="2 篇文章">
                        开源</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/%E6%B0%B4%E9%A2%98"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="2 篇文章">
                        水题</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/centos"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="2 篇文章">
                        centos</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/%E7%A1%AC%E4%BB%B6"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="1 篇文章">
                        硬件</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="1 篇文章">
                        数据库</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/bfs"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="1 篇文章">
                        bfs</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/%E8%B5%84%E6%BA%90%E6%90%9C%E7%B4%A2"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="1 篇文章">
                        资源搜索</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/%E5%9B%BE%E5%BA%8A"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="1 篇文章">
                        图床</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/GitHub"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="1 篇文章">
                        GitHub</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/NOSQL"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="1 篇文章">
                        NOSQL</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/html"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="1 篇文章">
                        html</a>
                    <a rel="tag"
                       href="https://rainsheep.github.io/tags/dfs"
                       class="tag vditor-tooltipped vditor-tooltipped__n"
                       aria-label="1 篇文章">
                        dfs</a>
            </main>
        </div>

    <div class="module item">
        <div class="module__header">
            <div class="fn__flex">
                <a href="https://rainsheep.github.io/archives.html" class="fn__flex-1 ft__center">
                    227
                    文章
                </a>
            </div>
            <br/>
            <div class="fn__flex">
                <div class="fn__flex-1 ft__center">
                    <span data-uvstaturl="https://rainsheep.github.io">3369</span> <span class="ft-gray">浏览</span>
                </div>
            </div>
        </div>
    </div>
</aside>
    
</div>
</div>
<div class="icon__up" onclick="Util.goTop()"></div>
<footer class="footer">
    &copy; 2020
    <a href="https://rainsheep.github.io">雨羊的个人博客</a>
    <a href="http://www.beian.miit.gov.cn/" rel="noopener nofollow" target="_blank">豫ICP备19042440号</a>
    <div class="fn__none"></div>
</footer>
<div class="icon-up" onclick="Util.goTop()"></div>

<script>
  var Label = {
    speech: false,
    servePath: "https://rainsheep.github.io",
    staticServePath: "https://cdn.jsdelivr.net/gh/88250/solo@fa541a0/src/main/resources",
    luteAvailable: true,
    hljsStyle: 'github',
    langLabel: "zh_CN",
    version: "4.3.0",
    staticSite: true,
    showCodeBlockLn: true,
    articleId: "1582052137407",
  }
</script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/88250/solo@fa541a0/src/main/resources/skins/nijigen/js/common.min.js?1595344563647" charset="utf-8"></script>


<script type="text/javascript">
    Util.addScript('https://cdn.jsdelivr.net/gh/88250/solo@fa541a0/src/main/resources/js/page.min.js?1595344563647', 'soloPageScript')
    var page = new Page({
        "commentContentCannotEmptyLabel": "评论不能为空",
        "oId": "1582052137407",
        "blogHost": "https://rainsheep.github.io",
        "randomArticles1Label": "随机阅读：",
        "externalRelevantArticles1Label": "站外相关阅读："
    });
    $(document).ready(function () {
        page.load();
    page.tips.externalRelevantArticlesDisplayCount = "0";
    page.loadRandomArticles('<header class="module__header">随机阅读</header>');
    page.loadRelevantArticles('1582052137407', '<header class="module__header">相关阅读</header>');
    Skin.initArticle()
    });
</script>

</body>
</html>

<!-- Generated by Latke (https://github.com/88250/latke) in 88ms, 2020/07/29 21:44:11 -->